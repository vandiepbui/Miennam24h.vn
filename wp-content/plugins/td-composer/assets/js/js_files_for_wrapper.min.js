var tdcNotice;
(function(g,e){tdcNotice={$_noticeWrapper:e,_isInitialized:!1,notice:function(d,c,a){if(tdcNotice._isInitialized){var b="";"undefined"!==typeof c&&!0===c&&(b="tdc-notice-error");var k="";"undefined"!==typeof a&&!0===a&&(k='<div class="tdc-close-notice"></div>');this.$element=g('<div class="tdc-notice '+b+'">'+d+k+"</div>");tdcNotice.$_noticeWrapper.append(this.$element);var f=this;if("undefined"!==typeof c&&!0===c)throw d;setTimeout(function(){f.$element.length&&f.$element.remove()},5E3)}},init:function(){tdcNotice._isInitialized||
(tdcNotice.$_noticeWrapper=g('<div class="tdc-notice-wrapper"></div>'),tdcNotice.$_noticeWrapper.on("click",".tdc-close-notice",function(d){g(this).closest(".tdc-notice").remove()}),g("#tdc-live-iframe-wrapper").append(tdcNotice.$_noticeWrapper),tdcNotice._isInitialized=!0)}};tdcNotice.init()})(jQuery);var tdcDebug;
(function(g,e){tdcDebug={_debug:!0,_logWindowObj:e,_content:e,_disabled:!1,log:function(d){tdcDebug._debug&&console.log(d)},dumpAllItems:function(){var d=tdcAdminIFrameUI.getIframeWindow();console.group("All items dump:");"undefined"!==typeof d.tdcComposerBlocksApi&&(console.log("%c tdcComposerBlocksApi.items ","background: #222; color: white"),console.log(d.tdcComposerBlocksApi.items));"undefined"!==typeof d.tdPullDown&&(console.log("%c tdPullDown.items ","background: #222; color: white"),console.log(d.tdPullDown.items));
"undefined"!==typeof d.tdAnimationSprite&&(console.log("%c tdAnimationSprite.items ","background: #222; color: white"),console.log(d.tdAnimationSprite.items));"undefined"!==typeof d.tdHomepageFull&&(console.log("%c tdHomepageFull.items ","background: #222; color: white"),console.log(d.tdHomepageFull.items));"undefined"!==typeof d.tdTrendingNow&&(console.log("%c tdTrendingNow.items ","background: #222; color: white"),console.log(d.tdTrendingNow.items));console.groupEnd()},group:function(d,c){!1!==
tdcDebug._debug&&(console.group?console.group(d,c):console.log(d))},groupCollapsed:function(d,c){!1!==tdcDebug._debug&&(console.groupCollapsed?console.groupCollapsed(d,c):console.log(d))},groupEnd:function(){!1!==tdcDebug._debug&&console.groupEnd&&console.groupEnd()},logWindow:function(d){if(e===tdcDebug._logWindowObj){tdcDebug._logWindowObj=g("<div></div>");var c=g('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Clear</div>'),a=g('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Disable</div>');
tdcDebug._content=g('<div style="clear: both"></div>');tdcDebug._logWindowObj.append(c);tdcDebug._logWindowObj.append(a);c.click(function(a){tdcDebug._content.html("")});a.click(function(a){tdcDebug._disabled=!tdcDebug._disabled;tdcDebug._disabled?g(this).css("background-color","#FF000"):g(this).css("background-color","")});tdcDebug._logWindowObj.append(tdcDebug._content);g("body").append(tdcDebug._logWindowObj);tdcDebug._logWindowObj.css({width:300,height:500,border:"1px solid red",position:"fixed",
bottom:0,right:20,"background-color":"#FFFFFF",overflow:"scroll","z-index":1E4})}tdcDebug._disabled||tdcDebug._content.html(d+"<br>"+tdcDebug._content.html())}}})(jQuery);var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(g,e){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+g+"&"+e:window.tdcAdminSettings.wpRestUrl+g+"?"+e},makeSafeForCSS:function(g){return g.replace(/[^a-z0-9]/g,function(e){var d=e.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?e.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})},updateTdcSavings:function(g,e){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(d){d.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(d,c,a){"success"===c&&(_.isObject(d)&&_.has(d,"errors")?new tdcNotice.notice(d.errors,!0,!1):("undefined"!==typeof e&&e.call(g),tdcSidebar.updateSavedShortcodes()))}).fail(function(d,c,a){})}}})();var tdcRecycle;
(function(g,e,d){tdcRecycle={_maxItems:100,_items:[],$_restoreItem:d,$_restoreContent:d,item:function(d,a,b){this.timestamp=d;this.description=a;this.shortcode=b},init:function(){tdcRecycle.$_restoreItem=g("#tdc-restore");tdcRecycle.$_restoreContent=g("#tdc-restore-content");tdcRecycle.$_restoreItem.on("click",function(d){tdcRecycle.$_restoreContent.toggle()});tdcRecycle.$_restoreContent.on("click",".tdc-snapshot",function(c){c=new tdcJobManager.job;var a=g(this).find(".tdc-snapshot-shortcode").html();
c.shortcode=a;c.columns=3;c.success_callback=function(b){var c=g(tdcAdminIFrameUI._$liveIframe).contents(),f=c.find("#tdc-rows");e.has(b,"replyHtml")&&f.replaceWith(b.replyHtml);window.addWrappers(c);tdcIFrameData._isInitialized=!1;tdcIFrameData._postOriginalContentJSON=d;window.tdcPostSettings.postContent=a;tdcIFrameData.init(c);tdcOperationUI.init(c);e.has(b,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(b.replyJsForEval)};c.error_callback=function(a,d){tdcDebug.log(d);tdcDebug.log(a)};tdcJobManager.addJob(c)})},
takeSnapshot:function(c){var a={error:d,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);e.isUndefined(a.error)||tdcDebug.log(a.error);if(!e.isUndefined(a.getShortcode)){var b=new Date;c=new tdcRecycle.item(b.getTime(),c,a.getShortcode);tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(0,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:first").remove());tdcRecycle._items.push(c);tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot"><div style="width: 150px; float: left">'+
b.toLocaleDateString()+" "+b.toLocaleTimeString()+'</div><div style="width: 350px; float: left">Before '+c.description+'</div><div class="tdc-snapshot-shortcode" style="display: none">'+c.shortcode+"</div></div>")}}};tdcRecycle.init()})(jQuery,_);var tdcSavePost;
(function(g,e,d,c){tdcSavePost={content:c,save:function(){var a={error:c,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);d.isUndefined(a.error)||tdcDebug.log(a.error);d.isUndefined(a.getShortcode)||d.isUndefined(window.tdcPostSettings)||(tdcSavePost.content=a.getShortcode,tdcLivePanel.$tdcAction.val("tdc_ajax_save_post"),tdcLivePanel.$tdcContent.val(tdcSavePost.content),tdcDebug.log(tdcSavePost.content),g.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_post","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);tdcLivePanelMenuSettings.saveMenuSettings()},data:tdcLivePanel.$panel.serialize()}).done(function(a,c,f){window.tdcPostSettings.postContent=tdcSavePost.content;g(".tdc-save-page").removeClass("tdc-saving-loader");"success"===c&&(d.isObject(a)&&d.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):new tdcNotice.notice(c,!1,!0),tdcMain.resetContentModified())}).fail(function(a,
d,c){}))}}})(jQuery,Backbone,_);var tdcShortcodeParser={};
(function(){tdcShortcodeParser={levels:{},init:function(g){tdcShortcodeParser.levels=_.clone(g);tdcShortcodeParser.levels[2]=tdcShortcodeParser.levels[2].concat(tdcShortcodeParser.levels[4])},multiNext:function(g,e){for(var d=tdcShortcodeParser.levels[g],c,a=0;a<d.length;a++){var b=tdcShortcodeParser.generateTreeElement(wp.shortcode.next(d[a],e));"undefined"!==typeof b&&("undefined"===typeof c||c.index>b.index)&&(c=b)}return c},parse:function(g,e){for(var d=tdcShortcodeParser.multiNext(g,e),c=0,a=
[];"undefined"!==typeof d&&5E3>c;)e=e.substring(d.index+d.content.length),4>g&&(d.child=tdcShortcodeParser.parse(g+1,d.content)),a.push(d),d=tdcShortcodeParser.multiNext(g,e),c++;return a},generateTreeElement:function(g){return g}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(g){this.shortcode=g.shortcode;this.columns=g.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(g){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var e=new tdcJobManager.jobRequest(g);
jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+e.jobId+"&tmp_blockUid="+e.blockUid+"&uuid="+tdcJobManager._getUniqueID()+"&post_id="+window.tdcPostSettings.postId),beforeSend:function(d){d.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:e,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},
success:function(d,c,a){null===d?g.error_callback(e,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(g.blockUid,d.jobId)?g.success_callback(d):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(d,c,a){g.error_callback(e,"tdcJobManager.addJob - Error callback - textStatus: "+c+" errorThrown: "+a);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(g,
e){return"undefined"===typeof tdcJobManager._sentJobs[g]||parseInt(tdcJobManager._sentJobs[g])<parseInt(e)?(tdcJobManager._sentJobs[g]=e,!0):!1},_generateJobId:function(){var g=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return g},_getUniqueID:function(){function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()}}})();var tdcAdminWrapperUI;
(function(g,e){tdcAdminWrapperUI={$placeholder:e,$helper:e,_helperClass:"",$recycle:e,_initialized:!1,init:function(){tdcAdminWrapperUI._tdcJqObjElements=g(".tdc-sidebar-elements");tdcAdminWrapperUI.helperId="tdc-dragged-helper";tdcAdminWrapperUI.placeholderId="tdc-placeholder";tdcAdminWrapperUI.maskId="tdc-mask";tdcAdminWrapperUI.$helper=g('<div id="'+tdcAdminWrapperUI.helperId+'"></div>');tdcAdminWrapperUI.$placeholder=g('<span id="'+tdcAdminWrapperUI.placeholderId+'"></span>');g("body").append(tdcAdminWrapperUI.$helper);
g("body").append(tdcAdminWrapperUI.$placeholder);g(".tdc-save-page").click(function(d){g(this).hasClass("tdc-saving-loader")||(g(this).addClass("tdc-saving-loader"),tdcSavePost.save())})},setHelperClass:function(d){tdcAdminWrapperUI._helperClass!==d&&(tdcAdminWrapperUI._helperClass=d,tdcAdminWrapperUI.$helper.addClass(d))},getHelperClass:function(){return tdcAdminWrapperUI._helperClass},clearHelperClass:function(){tdcAdminWrapperUI._helperClass=""}};tdcAdminWrapperUI.init()})(jQuery);var tdcOperationUI;
(function(g,e,d,c){tdcOperationUI={iframeContents:c,_draggedElement:{$element:c},_currentElementOver:{$element:c},_emptyElementClass:"tdc-element-empty",_isPlaceholderVisible:!1,_intervalUpdateInfoHelper:c,_isMenuDeactivated:!1,init:function(a,b){window.previousMouseClientX=0;window.previousMouseClientY=0;tdcOperationUI.iframeContents=a;tdcRowUI.init(tdcOperationUI.iframeContents.find("#tdc-rows"));tdcColumnUI.init(tdcOperationUI.iframeContents);tdcInnerRowUI.init(tdcOperationUI.iframeContents);tdcInnerColumnUI.init(tdcOperationUI.iframeContents);
tdcElementUI.init(tdcOperationUI.iframeContents);tdcRecycleUI.init(b);tdcAdminWrapperUI.$mask=g('<div id="'+tdcAdminWrapperUI.maskId+'"></div>');tdcOperationUI.iframeContents.find("body").append(tdcAdminWrapperUI.$mask);tdcMaskUI.init(tdcAdminWrapperUI.$mask,b);g(window).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper()}).mousemove(function(a){tdcOperationUI.showHelper(a)}).keydown(function(a){});a.mousedown(function(a){tdcSidebar.setSettings({$currentRow:c,$currentColumn:c,
$currentInnerRow:c,$currentInnerColumn:c,$currentElement:c});tdcSidebar.closeModals()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(c);tdcElementUI.positionElementPlaceholder(a)}).mousemove(function(a){tdcOperationUI.showHelper(a);window.previousMouseClientX=a.clientX;window.previousMouseClientY=a.clientY}).scroll(function(a){tdcOperationUI.isElementDragged()?tdcElementUI.positionElementPlaceholder(a):tdcOperationUI.isInnerColumnDragged()?
tdcInnerColumnUI.positionInnerColumnPlaceholder(a):tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?tdcInnerRowUI.positionInnerRowPlaceholder(a):tdcOperationUI.isColumnDragged()?tdcColumnUI.positionColumnPlaceholder(a):(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())&&tdcRowUI.positionRowPlaceholder(a)}).keydown(function(a){});tdcAdminWrapperUI.$helper.mouseup(function(a){tdcOperationUI.hideHelper()})},_keyDownHandler:function(a){46===a.keyCode&&(a=tdcSidebar.getCurrentModel(),
d.isUndefined(a)||"vc_row"===a.get("tag")||"vc_column"===a.get("tag")||"vc_row_inner"===a.get("tag")||"vc_column_inner"===a.get("tag")||tdcElementHandlerUI.deleteHandler(null))},setDraggedElement:function(a){tdcOperationUI._draggedElement.$element=a;d.isUndefined(a)||(tdcOperationUI._draggedElement.classes=a[0].className.split(" "))},getDraggedElement:function(){return tdcOperationUI._draggedElement.$element},hasClassDraggedElement:function(a){if(!d.isUndefined(tdcOperationUI._draggedElement.$element))return-1!==
tdcOperationUI._draggedElement.classes.indexOf(a)},addClassDraggedElement:function(a){d.isUndefined(tdcOperationUI._draggedElement.$element)||tdcOperationUI._draggedElement.$element.addClass(a)},setCurrentElementOver:function(a){if(!d.isUndefined(a)||!d.isUndefined(tdcOperationUI._currentElementOver.$element))if(d.isUndefined(a)||d.isUndefined(tdcOperationUI._currentElementOver.$element)||!a.is(tdcOperationUI._currentElementOver.$element.get(0)))tdcOperationUI._currentElementOver.$element=a,d.isUndefined(a)||
(tdcOperationUI._currentElementOver.elementOuterHeight=a.outerHeight(!0),tdcOperationUI._currentElementOver.elementOuterWidth=a.outerWidth(!0),tdcOperationUI._currentElementOver.elementOffset=a.offset())},getCurrentElementOver:function(){return tdcOperationUI._currentElementOver.$element},getCurrentElementOverOuterHeight:function(){if(!d.isUndefined(tdcOperationUI._currentElementOver.$element)&&!d.isUndefined(tdcOperationUI._currentElementOver.elementOuterHeight))return tdcOperationUI._currentElementOver.elementOuterHeight},
getCurrentElementOverOuterWidth:function(){if(!d.isUndefined(tdcOperationUI._currentElementOver.$element)&&!d.isUndefined(tdcOperationUI._currentElementOver.elementOuterWidth))return tdcOperationUI._currentElementOver.elementOuterWidth},getCurrentElementOverOffset:function(){if(!d.isUndefined(tdcOperationUI._currentElementOver.$element)&&!d.isUndefined(tdcOperationUI._currentElementOver.elementOffset))return tdcOperationUI._currentElementOver.elementOffset},_placeholderCacheCssSettings:{classes:c,
props:c},setPlaceholderCss:function(a){if(d.isUndefined(tdcOperationUI._placeholderCacheCssSettings)||!d.isEqual(tdcOperationUI._placeholderCacheCssSettings,a))tdcOperationUI._placeholderCacheCssSettings=a,tdcAdminWrapperUI.$placeholder.css(a)},setReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();d.isUndefined(a)||a.addClass("tdc-ready-to-move")},clearReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();d.isUndefined(a)||a.removeClass("tdc-ready-to-move")},activeDraggedElement:function(a){tdcOperationUI.setDraggedElement(a);
tdcOperationUI.hasClassDraggedElement("tdc-dragged")||tdcOperationUI.addClassDraggedElement("tdc-dragged")},deactiveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement();d.isUndefined(a)||(a.removeClass("tdc-dragged"),tdcOperationUI._moveDraggedElement(),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a}),tdcOperationUI.setDraggedElement(c))},
showHelper:function(a){var b=tdcAdminWrapperUI.$helper,c=tdcOperationUI.getDraggedElement();if(d.isUndefined(c))tdcOperationUI.hideHelper(),tdcRecycleUI.hide(),tdcOperationUI.setLiveIframeCss("tdc-active-helper",!0);else{var f=0;!0!==tdcMain.getSidebarInline()||!1!==tdcMain.getSidebarHidden()||g(a.target).closest("#tdc-sidebar").length||(f=tdcSidebar.$_sidebar.width());var h=tdcAdminIFrameUI.getLiveIframe().width(),e=0;window.innerWidth!==h&&(e=(window.innerWidth-h)/2,!0===tdcMain.getSidebarInline()&&
!1===tdcMain.getSidebarHidden()&&(e-=tdcSidebar.$_sidebar.width()/2));g(a.target).closest("#tdc-sidebar").length?e=0:g(a.target).closest("#tdc-live-iframe-wrapper").length&&(e=0,tdcMain.getSidebarInline()&&(e=-tdcSidebar.$_sidebar.width()));b.css({left:a.clientX-30+f+e,top:a.clientY-22});b.show();tdcOperationUI.deactivateMenu();tdcOperationUI.setLiveIframeCss("tdc-active-helper");a=c.data("shortcodeName");b=c.data("templateContent");d.isUndefined(a)&&d.isUndefined(b)&&(c=c.data("model_id"),a=tdcIFrameData.getModel(c).get("tag"));
d.isUndefined(a)||tdcAdminWrapperUI.setHelperClass("tdc-element-ico tdc-ico-"+a);tdcRecycleUI.show()}},hideHelper:function(){tdcAdminWrapperUI.clearHelperClass();tdcAdminWrapperUI.$helper.hide();tdcAdminWrapperUI.$helper.removeClass();tdcOperationUI.activateMenu()},setLiveIframeCss:function(a,b){var c=tdcAdminIFrameUI.getLiveIframe();d.isUndefined(b)?c.contents().find("body").addClass(a):c.contents().find("body").removeClass(a)},activateMenu:function(){if(tdcOperationUI._isMenuDeactivated){var a=
tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.removeClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!1}},deactivateMenu:function(){if(!tdcOperationUI._isMenuDeactivated){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.addClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!0}},updateInfoHelper:function(a){},showPlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!1===tdcOperationUI._isPlaceholderVisible&&
(tdcOperationUI._isPlaceholderVisible=!0,a.show(),tdcOperationUI.updateInfoHelper(c))},hidePlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!0===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=!1,a.hide(),tdcOperationUI.updateInfoHelper(!0))},isPlaceholderVisible:function(){return tdcOperationUI._isPlaceholderVisible},isRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcRowUI.getElementCssClass())},
inRow:function(a){a=a.closest("."+tdcRowUI.getElementCssClass());if(a.length)return a},isRow:function(a){return a.hasClass(tdcRowUI.getElementCssClass())},isTempRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-row-temp")},isElementWithRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-with-row")},isColumnDragged:function(a){var b=
tdcOperationUI.getDraggedElement();b=!d.isUndefined(b)&&tdcOperationUI.hasClassDraggedElement(tdcColumnUI.getElementCssClass());d.isUndefined(a)||(b=b&&(0<a.siblings(".tdc-column.tdc-dragged").length||a.hasClass("tdc-dragged")));return b},inColumn:function(a){a=a.closest("."+tdcColumnUI.getElementCssClass());if(a.length)return a},isColumn:function(a){return a.hasClass(tdcColumnUI.getElementCssClass())},isInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&
tdcOperationUI.hasClassDraggedElement(tdcInnerRowUI.getElementCssClass())},inInnerRow:function(a){a=a.closest("."+tdcInnerRowUI.getElementCssClass());if(a.length)return a},isInnerRow:function(a){return a.hasClass(tdcInnerRowUI.getElementCssClass())},isTempInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-inner-row-temp")},isInnerColumnDragged:function(a){var b=tdcOperationUI.getDraggedElement();b=!d.isUndefined(b)&&
tdcOperationUI.hasClassDraggedElement(tdcInnerColumnUI.getElementCssClass());d.isUndefined(a)||(b=b&&(0<a.siblings(".tdc-inner-column.tdc-dragged").length||a.hasClass("tdc-dragged")));return b},inInnerColumn:function(a){a=a.closest("."+tdcInnerColumnUI.getElementCssClass());if(a.length)return a},isInnerColumn:function(a){return a.hasClass(tdcInnerColumnUI.getElementCssClass())},isElement:function(a){return a.hasClass(tdcElementUI.getElementCssClass())},isElementDragged:function(){var a=tdcOperationUI.getDraggedElement();
return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element")},isSidebarElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-sidebar-element")},getRowStartValues:function(){var a=tdcOperationUI.getDraggedElement();return!d.isUndefined(a)&&tdcOperationUI._draggedElement.$element.data("row-start-values")},setPlaceholder:function(a,b){var c=tdcAdminWrapperUI.$placeholder;if(d.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)||
!d.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)&&tdcOperationUI._placeholderCacheCssSettings.classes!==a)tdcOperationUI._placeholderCacheCssSettings.classes=a,a.length?c.addClass(a):c.attr("class","");d.isObject(b)&&(d.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)||!d.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)&&!d.isEqual(tdcOperationUI._placeholderCacheCssSettings.props,b))&&(tdcOperationUI._placeholderCacheCssSettings.props=b,c.css(b))},setHorizontalPlaceholder:function(a){tdcOperationUI.setPlaceholder("",
a)},setVerticalPlaceholder:function(a){tdcOperationUI.setPlaceholder("vertical",a)},_moveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement(),b=tdcOperationUI.getCurrentElementOver(),k=tdcAdminWrapperUI.$placeholder,f="";if(!(d.isUndefined(a)||d.isUndefined(b)||d.isUndefined(k)||!k.is(":visible")&&b!==tdcAdminWrapperUI.$recycle)){var h=tdcOperationUI.isSidebarElementDragged(),e=tdcOperationUI.isElementDragged(),l=!1,m=!1,p=!1,n=!1,q=!1,w=!1,z=tdcOperationUI.isElementWithRowDragged(),
r=tdcOperationUI.getRowStartValues();if(e){var t=a.closest(".tdc-elements");h||(f=tdcIFrameData._getSourceCol())}else(l=tdcOperationUI.isInnerColumnDragged())&&(t=a.closest(".tdc-inner-columns"));!l&&(m=tdcOperationUI.isInnerRowDragged(),p=tdcOperationUI.isTempInnerRowDragged(),m||p)&&(t=a.closest(".tdc-elements"));m||p||(n=tdcOperationUI.isColumnDragged())&&(t=a.closest(".tdc-columns"));!n&&(q=tdcOperationUI.isRowDragged(),w=tdcOperationUI.isTempRowDragged(),q||w)&&(t=a.closest("#tdc-rows"));if(h||
e||l||m||p||n||q||w){var C="",v=a.find(".td_block_inner");v.length&&(C=v.attr("id"));if(!h&&!d.isUndefined(t)&&t.length){var y=t.children();v=y.index(a);var x=y.index(k);if(b!==tdcAdminWrapperUI.$recycle&&-1!==x&&1===Math.abs(v-x))return;if(e||m||p||q||w){if((e||m||q)&&b===tdcAdminWrapperUI.$recycle){k="Deleting ";tdConfirm.showModal(m?k+"inner row":q?k+"row":k+"element",tdcOperationUI,function(){if((-1===x&&1===y.length||2===y.length&&-1!==x)&&(!q||1!==tdcIFrameData.tdcRows.length)){var b="";A=a.closest(".tdc-inner-column");
A.length?b=" tdc-element-inner-column":(B=a.closest(".tdc-column"),B.length&&(b=" tdc-element-column"));b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);t.append(b)}tdcOperationUI.setDraggedElement(a);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);tdcIFrameData.changeData({wasSidebarElementDragged:h,wasElementDragged:e,wasInnerColumnDragged:l,wasInnerRowDragged:m,wasTempInnerRowDragged:p,
wasColumnDragged:n,wasRowDragged:q,wasTempRowDragged:w,wasElementWithRowDragged:z,rowStartValues:r,draggedBlockUid:C,sourceColParam:f});tdcSidebarPanel.clearPanel();tdcOperationUI.setDraggedElement(c);tdcOperationUI.setCurrentElementOver(c);tb_remove()},c,"Are you sure you want to delete this element?");return}if(-1===x&&1===y.length||2===y.length&&-1!==x){b="";var A=a.closest(".tdc-inner-column");if(A.length)b=" tdc-element-inner-column";else{var B=a.closest(".tdc-column");B.length&&(b=" tdc-element-column")}b=
g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);t.append(b)}}}h&&(b="",e?b="tdc-element":p?b="tdc-element-inner-row-temp":m?b="tdc-element-inner-row":w?b="tdc-row-temp":q&&(b="tdc-row"),b=g('<div class="'+b+'">'+a.html()+"</div>"),d.isUndefined(a.data("shortcodeName"))?b.data("templateContent",a.data("templateContent")):(b.data("shortcodeName",a.data("shortcodeName")),d.isUndefined(a.data("startValues"))||
b.data("startValues",a.data("startValues")),d.isUndefined(a.data("shortcodeContent"))||b.data("shortcodeContent",a.data("shortcodeContent")),d.isUndefined(a.data("rowStartValues"))||b.data("rowStartValues",a.data("rowStartValues"))),tdcOperationUI.setDraggedElement(b),a=tdcOperationUI.getDraggedElement());k.replaceWith(a);if(h||e)A=a.closest(".tdc-inner-column"),A.length?(a.removeClass("tdc-element-column"),a.addClass("tdc-element-inner-column")):(B=a.closest(".tdc-column"),B.length&&(a.removeClass("tdc-element-inner-column"),
a.addClass("tdc-element-column")));k=a.prev();k.hasClass(tdcOperationUI._emptyElementClass)&&k.remove();k=a.next();k.hasClass(tdcOperationUI._emptyElementClass)&&k.remove();tdcIFrameData.changeData({wasSidebarElementDragged:h,wasElementDragged:e,wasInnerColumnDragged:l,wasInnerRowDragged:m,wasTempInnerRowDragged:p,wasColumnDragged:n,wasRowDragged:q,wasTempRowDragged:w,wasElementWithRowDragged:z,rowStartValues:r,draggedBlockUid:C,sourceColParam:f})}else new tdcNotice.notice("_moveDraggedElement Error: $draggedElement not valid!",
!0,!1)}}}})(jQuery,Backbone,_);var tdcRowUI;
(function(g,e,d,c){tdcRowUI={_elementCssClass:"tdc-row",tdcRow:c,init:function(a){d.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcRowUI.tdcRow=a.find("."+tdcRowUI._elementCssClass);tdcRowUI.tdcRow.each(function(a,d){tdcRowUI.bindRow(g(d))})},_mouseCoordinates:c,_setMouseCoordinates:function(a){tdcRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcRowUI._mouseCoordinates},bindRow:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===
b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a)}),tdcRowUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(b){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())b.preventDefault(),tdcOperationUI.clearReadyToMove(),
tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcRowUI._setMouseCoordinates(c);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(b){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())d.isEqual({screenX:b.screenX,screenY:b.screenY},tdcRowUI._getMouseCoordinates())?(b.stopPropagation(),tdcOperationUI.hideHelper()):(b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b),
tdcMaskUI.hide(),tdcRowUI._setMouseCoordinates(c),tdcOperationUI.clearReadyToMove())}).mouseenter(function(b){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(a.preventDefault(),tdcOperationUI.setCurrentElementOver(c),
tdcRowUI.positionRowPlaceholder(a)):tdcMaskUI.setCurrentContainer(c)}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()){var d=a.outerHeight(!0),c=a.outerWidth(),h=a.offset();parseInt(h.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(h.left+c)&&parseInt(h.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(h.top+d)&&(tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b))}})},positionRowPlaceholder:function(a,b){var k=
tdcAdminWrapperUI.$placeholder,f=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,h=a.pageY,d.isUndefined(a.clientX)||d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var e={pageX:f,pageY:h};tdcOperationUI.setCurrentElementOver(c);
tdcRowUI.tdcRow.each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",e))});return}f=tdcOperationUI.getCurrentElementOver();if(d.isUndefined(tdcOperationUI.getDraggedElement())||d.isUndefined(f))tdcOperationUI.hidePlaceholder();else{var l=tdcOperationUI.getCurrentElementOverOuterHeight(),m=tdcOperationUI.getCurrentElementOverOuterWidth(),p=tdcOperationUI.getCurrentElementOverOffset();if(h>p.top+l/2){h=f.next();if(!h.length||h.length&&
h.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(k),tdcOperationUI.updateInfoHelper();parseInt(p.top)+parseInt(l)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"",right:"auto",bottom:"0",width:m,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:m,"margin-left":""})}else{h=f.prev();if(!h.length||h.length&&h.attr("id")!==
tdcAdminWrapperUI.placeholderId)f.before(k),tdcOperationUI.updateInfoHelper();parseInt(p.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"",right:"auto",bottom:"",width:m,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:m,"margin-left":""})}d.isUndefined(b)||!0!==b?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcRowUI._elementCssClass}}})(jQuery,
Backbone,_);var tdcColumnUI;
(function(g,e,d,c){tdcColumnUI={_elementCssClass:"tdc-column",tdcColumn:c,init:function(a){d.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcColumnUI.tdcColumn=a.find("."+tdcColumnUI._elementCssClass);tdcColumnUI.tdcColumn.each(function(a,d){tdcColumnUI.bindColumn(g(d))})},_mouseCoordinates:c,_setMouseCoordinates:function(a){tdcColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcColumnUI._mouseCoordinates},bindColumn:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===
b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(b,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcColumnUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(b){tdcOperationUI.isColumnDragged(a)&&(b.preventDefault(),tdcOperationUI.clearReadyToMove(),
tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(c),tdcColumnUI.positionColumnPlaceholder(b),tdcColumnUI._setMouseCoordinates(c));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(b){tdcOperationUI.isColumnDragged(a)&&(d.isEqual({screenX:b.screenX,screenY:b.screenY},tdcColumnUI._getMouseCoordinates())?(b.stopPropagation(),tdcOperationUI.hideHelper()):(b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),
tdcColumnUI.positionColumnPlaceholder(b),tdcMaskUI.hide(),tdcColumnUI._setMouseCoordinates(c),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(b){tdcOperationUI.isColumnDragged(a)?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),b.stopPropagation())}).mouseleave(function(b){tdcOperationUI.isColumnDragged(a)?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(c),
tdcColumnUI.positionColumnPlaceholder(b)):(tdcMaskUI.setCurrentContainer(c),b=tdcOperationUI.inRow(a),d.isUndefined(b)||b.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isColumnDragged(a)){var d=a.find(".tdc-elements:first");if(d.length){var c=d.outerHeight(!0);d=d.outerWidth();var h=a.offset(),e=0,l=a.prevAll("."+tdcColumnUI._elementCssClass);l.length&&l.each(function(a,b){e+=parseInt(g(b).find(".tdc-elements:first").width())});e+=h.left;parseInt(e)<=parseInt(b.pageX)&&parseInt(b.pageX)<=
parseInt(e+d)&&parseInt(h.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(h.top+c)&&(tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(b))}}})},positionColumnPlaceholder:function(a,b){var k=tdcAdminWrapperUI.$placeholder,f=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,h=a.pageY,d.isUndefined(a.clientX)||d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===
a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var e={pageX:f,pageY:h};tdcOperationUI.setCurrentElementOver(c);tdcOperationUI.getDraggedElement().closest(".tdc-columns").find(".tdc-column").each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",e))});return}h=tdcOperationUI.getCurrentElementOver();if(d.isUndefined(tdcOperationUI.getDraggedElement())||
d.isUndefined(h))tdcOperationUI.hidePlaceholder();else{var l=h.outerWidth(!0),m=tdcOperationUI.getCurrentElementOverOffset(),p=0,n=h.prevAll();n.length&&n.each(function(a,b){var d=g(b);d.hasClass("tdc-column")&&(p+=parseInt(d.outerWidth(!0)))});n=h.parent(".tdc-columns").parent(".vc_row");var q=n.css("position");if(d.isUndefined(q)||"static"!==q)if(n=n.css("padding-left"),d.isUndefined(n)||(n=parseInt(n.replace("px",""))),f>p+m.left+l/2){f=h.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.after(k),
tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(p+l+n),"margin-left":-24})}else{f=h.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.before(k),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(p+n),"margin-left":-24})}else if(f>m.left+l/2){f=h.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.after(k),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left+
l),"margin-left":-24})}else{f=h.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.before(k),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left),"margin-left":-24})}d.isUndefined(b)||!0!==b?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerRowUI;
(function(g,e,d,c){tdcInnerRowUI={_elementCssClass:"tdc-element-inner-row",tdcElementInnerRow:c,init:function(a){d.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerRowUI.tdcElementInnerRow=a.find("."+tdcInnerRowUI._elementCssClass);tdcInnerRowUI.tdcElementInnerRow.each(function(a,d){tdcInnerRowUI.bindInnerRow(g(d))})},_mouseCoordinates:c,_setMouseCoordinates:function(a){tdcInnerRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerRowUI._mouseCoordinates},bindInnerRow:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcInnerRowUI._setMouseCoordinates({screenX:b.screenX,
screenY:b.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(b){b.preventDefault();tdcOperationUI.clearReadyToMove();tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(b){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())d.isEqual({screenX:b.screenX,screenY:b.screenY},tdcInnerRowUI._getMouseCoordinates())?(b.stopPropagation(),tdcOperationUI.hideHelper()):
(b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b),tdcMaskUI.hide(),tdcInnerRowUI._setMouseCoordinates(c),tdcOperationUI.clearReadyToMove())}).mouseenter(function(b){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&
(tdcMaskUI.setCurrentContainer(a),b.stopPropagation())}).mouseleave(function(b){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(c),tdcInnerRowUI.positionInnerRowPlaceholder(b)):(tdcMaskUI.setCurrentContainer(c),b=tdcOperationUI.inColumn(a),d.isUndefined(b)||b.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged()){var d=a.outerHeight(!0),c=a.outerWidth(),h=a.offset();parseInt(h.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(h.left+c)&&parseInt(h.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(h.top+d)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b))}})},positionInnerRowPlaceholder:function(a,b){var k=tdcAdminWrapperUI.$placeholder,f=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=
a.pageX,h=a.pageY,d.isUndefined(a.clientX)||d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var e={pageX:f,pageY:h};tdcOperationUI.setCurrentElementOver(c);tdcElementUI.tdcElement.each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",
e))});tdcInnerRowUI.tdcElementInnerRow.each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",e))});return}f=tdcOperationUI.getCurrentElementOver();if(d.isUndefined(tdcOperationUI.getDraggedElement())||d.isUndefined(f))tdcOperationUI.hidePlaceholder();else{var l=f.outerHeight(!0),m=f.innerWidth(),p=f.offset();if(h>p.top+l/2){h=f.next();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(k),tdcOperationUI.updateInfoHelper(c);
parseInt(p.top)+parseInt(l)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"","margin-left":"",bottom:"0",width:m}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:m})}else{h=f.prev();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)f.before(k),tdcOperationUI.updateInfoHelper(c);parseInt(p.top)<
parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:m}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:m})}d.isUndefined(b)||!0!==b?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerColumnUI;
(function(g,e,d,c){tdcInnerColumnUI={_elementCssClass:"tdc-inner-column",tdcInnerColumn:c,init:function(a){d.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerColumnUI.tdcInnerColumn=a.find("."+tdcInnerColumnUI._elementCssClass);tdcInnerColumnUI.tdcInnerColumn.each(function(a,d){tdcInnerColumnUI.bindInnerColumn(g(d))})},_mouseCoordinates:c,_setMouseCoordinates:function(a){tdcInnerColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerColumnUI._mouseCoordinates},bindInnerColumn:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(b,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),
tdcInnerColumnUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(b){tdcOperationUI.isInnerColumnDragged(a)&&(b.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(c),tdcInnerColumnUI.positionInnerColumnPlaceholder(b),tdcInnerColumnUI._setMouseCoordinates(c));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(b){tdcOperationUI.isInnerColumnDragged(a)&&
(d.isEqual({screenX:b.screenX,screenY:b.screenY},tdcInnerColumnUI._getMouseCoordinates())?(b.stopPropagation(),tdcOperationUI.hideHelper()):(b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(b),tdcMaskUI.hide(),tdcInnerColumnUI._setMouseCoordinates(c),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(b){tdcOperationUI.isInnerColumnDragged(a)?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),
tdcInnerColumnUI.positionInnerColumnPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),b.stopPropagation())}).mouseleave(function(b){tdcOperationUI.isInnerColumnDragged(a)?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(c),tdcInnerColumnUI.positionInnerColumnPlaceholder(b)):(tdcMaskUI.setCurrentContainer(c),b=tdcOperationUI.inInnerRow(a),d.isUndefined(b)||b.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isInnerColumnDragged(a)){var d=
a.find(".tdc-elements:first");if(d.length){var c=d.outerHeight(!0);d=d.outerWidth();var h=a.offset(),e=0,l=a.prevAll("."+tdcInnerColumnUI._elementCssClass);l.length&&l.each(function(a,b){e+=parseInt(g(b).find(".tdc-elements:first").width())});e+=h.left;parseInt(e)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(e+d)&&parseInt(h.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(h.top+c)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(b))}}})},positionInnerColumnPlaceholder:function(a,
b){var k=tdcAdminWrapperUI.$placeholder,f=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,h=a.pageY,d.isUndefined(a.clientX)||d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var e={pageX:f,pageY:h};tdcOperationUI.setCurrentElementOver(c);
tdcOperationUI.getDraggedElement().closest(".tdc-inner-columns").find(".tdc-inner-column").each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",e))});return}h=tdcOperationUI.getCurrentElementOver();if(d.isUndefined(tdcOperationUI.getDraggedElement())||d.isUndefined(h))tdcOperationUI.hidePlaceholder();else{var l=h.outerWidth(!0),m=h.offset(),p=0,n=h.prevAll();n.length&&n.each(function(a,b){var d=g(b);d.hasClass("tdc-inner-column")&&(p+=
parseInt(d.outerWidth(!0)))});n=h.parent(".tdc-inner-columns").parent(".vc_row_inner").css("padding-left");n=d.isUndefined(n)?0:parseInt(n.replace("px",""));if(f>m.left+l/2){f=h.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.after(k),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(p+l+n),"margin-left":-24})}else{f=h.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)h.before(k),tdcOperationUI.updateInfoHelper();
tdcOperationUI.setVerticalPlaceholder({left:parseInt(p+n),"margin-left":-24})}d.isUndefined(b)||!0!==b?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcElementsUI;
(function(g,e,d,c){tdcElementsUI={tdcElements:c,init:function(){tdcElementsUI.tdcElements=tdcOperationUI.iframeContents.find(".tdc-elements");tdcElementsUI.tdcElements.each(function(a,b){tdcElementsUI.bindElementList(g(b))})},bindElementList:function(a){a.mousemove(function(a){a.preventDefault()}).mouseenter(function(a){a.preventDefault()}).mouseleave(function(a){a.preventDefault()})}}})(jQuery,Backbone,_);var tdcElementUI;
(function(g,e,d,c){tdcElementUI={_elementCssClass:"tdc-element",_innerColumnGap:10,tdcElements:c,init:function(a){d.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcElementUI.tdcElement=a.find("."+tdcElementUI._elementCssClass);tdcElementUI.tdcElement.each(function(a,d){tdcElementUI.bindElement(g(d))})},positionElementPlaceholder:function(a,b){var k=tdcAdminWrapperUI.$placeholder,f=0,h=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,h=a.pageY,d.isUndefined(a.clientX)||
d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;h=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var e={pageX:f,pageY:h};tdcOperationUI.setCurrentElementOver(c);tdcElementUI.tdcElement.each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",e))});return}var l=tdcOperationUI.getCurrentElementOver();
if(d.isUndefined(tdcOperationUI.getDraggedElement())||d.isUndefined(l))tdcOperationUI.hidePlaceholder();else{var m=tdcOperationUI.getCurrentElementOverOuterHeight();f=tdcOperationUI.getCurrentElementOverOuterWidth();var p=tdcOperationUI.getCurrentElementOverOffset();if(h>p.top+m/2){var n=!1;tdcElementUI.isInnerColumnLastElement(l)&&h>p.top+m-tdcElementUI._innerColumnGap&&(n=!0);n&&(l=l.closest(".tdc-element-inner-row"),f=l.outerWidth(!0));h=l.next();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)l.after(k),
tdcOperationUI.updateInfoHelper(c);parseInt(p.top)+parseInt(m)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"","margin-left":"",bottom:"0",width:f}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:f})}else{m=!1;tdcElementUI.isInnerColumnFirstElement(l)&&h<p.top+tdcElementUI._innerColumnGap&&(m=!0);m&&
(l=l.closest(".tdc-element-inner-row"),f=l.outerWidth(!0));h=l.prev();if(!h.length||h.length&&h.attr("id")!==tdcAdminWrapperUI.placeholderId)l.before(k),tdcOperationUI.updateInfoHelper(c);parseInt(p.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:f}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",
width:f})}d.isUndefined(b)||!0!==b?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},positionEmptyElementPlaceholder:function(a){var b=tdcAdminWrapperUI.$placeholder,k=0,f=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)k=a.pageX,f=a.pageY,d.isUndefined(a.clientX)||d.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){k=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;
f=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var h={pageX:k,pageY:f};tdcOperationUI.setCurrentElementOver(c);tdcElementUI.tdcElement.each(function(a,b){d.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(b).trigger(g.Event("fakemouseenterevent",h))});return}var e=tdcOperationUI.getCurrentElementOver();if(d.isUndefined(tdcOperationUI.getDraggedElement())||d.isUndefined(e))tdcOperationUI.hidePlaceholder();else{var l=tdcOperationUI.getCurrentElementOverOuterHeight();a=
tdcOperationUI.getCurrentElementOverOuterWidth();k=tdcOperationUI.getCurrentElementOverOffset();if(f>k.top+l/2){var m=!1;tdcElementUI.isInnerColumnLastElement(e)&&f>k.top+l-tdcElementUI._innerColumnGap&&(m=!0);m&&(e=e.closest(".tdc-element-inner-row"),a=e.outerWidth(!0));f=e.next();f.length||(e.after(b),tdcOperationUI.updateInfoHelper(c));parseInt(k.top)+parseInt(l)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",
top:"",left:"","margin-top":"","margin-left":"",bottom:0,width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":-50,"margin-left":"",bottom:"",width:a})}else l=!1,tdcElementUI.isInnerColumnFirstElement(e)&&f<k.top+tdcElementUI._innerColumnGap&&(l=!0),l&&(e=e.closest(".tdc-element-inner-row"),a=e.outerWidth(!0)),f=e.prev(),f.length||(e.before(b),tdcOperationUI.updateInfoHelper(c)),parseInt(k.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",
top:0,left:"","margin-top":0,"margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":0,"margin-left":"",bottom:"",width:a});tdcOperationUI.showPlaceholder()}},_mouseCoordinates:c,_setMouseCoordinates:function(a){tdcElementUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcElementUI._mouseCoordinates},bindElement:function(a){a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){tdcDebug.log("element mouse down");
if(1===b.which){if("td-lock-button"===b.target.className)return window.open(b.target.href),!1;b.preventDefault();b.stopPropagation();tdcOperationUI.activeDraggedElement(a);tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(a);tdcElementUI.positionElementPlaceholder(b,!0);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a});
tdcElementUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY});tdcOperationUI.setReadyToMove()}}).mouseup(function(b){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionElementPlaceholder(b),tdcElementUI._setMouseCoordinates(c);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(b){if(tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))d.isEqual({screenX:b.screenX,screenY:b.screenY},tdcElementUI._getMouseCoordinates())?(b.stopPropagation(),tdcOperationUI.hideHelper()):(b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(b),tdcMaskUI.hide(),tdcElementUI._setMouseCoordinates(c),tdcOperationUI.clearReadyToMove())}).mouseenter(function(b){tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(a),b.stopPropagation())}).mouseleave(function(b){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),
tdcOperationUI.setCurrentElementOver(c),tdcElementUI.positionElementPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(c),tdcMaskUI.setCurrentContainer(c),b=tdcOperationUI.inInnerColumn(a),d.isUndefined(b)?(b=tdcOperationUI.inColumn(a),d.isUndefined(b)||b.mouseenter()):b.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")){b.preventDefault();
b.stopPropagation();var d=a.outerHeight(!0),c=a.outerWidth(),h=a.offset();parseInt(h.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(h.left+c)&&parseInt(h.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(h.top+d)&&(tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(b))}})},bindEmptyElement:function(a){a.click(function(a){a.preventDefault()}).mousedown(function(b){1===b.which&&(a.hasClass("tdc-element-column")?tdcColumnHandlerUI._triggerEvent(b):a.hasClass("tdc-element-inner-column")&&
tdcInnerColumnHandlerUI._triggerEvent(b))}).mouseup(function(b){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),b.stopPropagation(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionEmptyElementPlaceholder(b)):tdcMaskUI.setCurrentElement(a)}).mousemove(function(b){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&
a.hasClass("tdc-element-column"))b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(b)}).mouseenter(function(b){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&
tdcMaskUI.setCurrentElement(a)}).mouseleave(function(b){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),tdcOperationUI.setCurrentElementOver(c),tdcElementUI.positionEmptyElementPlaceholder(b)):d.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(c)})},isInnerColumnFirstElement:function(a){var b=a.closest(".tdc-inner-column");return b.length&&(b=b.find(".tdc-element-inner-column"),
b.length&&0===b.index(a))?!0:!1},isInnerColumnLastElement:function(a){var b=a.closest(".tdc-inner-column");return b.length&&(b=b.find(".tdc-element-inner-column"),b.length&&b.length===b.index(a)+1)?!0:!1},getElementCssClass:function(){return tdcElementUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRecycleUI;
(function(g,e,d,c){tdcRecycleUI={_activeClass:"active",_showClass:"show",_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcRecycleUI._isInitialized=!1);tdcRecycleUI._isInitialized||(tdcAdminWrapperUI.$recycle.mouseup(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcRecycleUI._deactivate())}).mouseenter(function(a){(tdcOperationUI.isElementDragged()||
tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle),tdcRecycleUI._activate())}).mouseleave(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(c),tdcRecycleUI._deactivate())}),tdcRecycleUI._isInitialized=
!0)},_activate:function(){tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._activeClass)},_deactivate:function(){tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._activeClass)},show:function(){!0!==tdcMain.getRecycleShown()&&(tdcMain.setRecycleShown(),!0===tdcMain.getRecycleShown()&&tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._showClass))},hide:function(){!1!==tdcMain.getRecycleShown()&&(tdcMain.resetRecycleShown(),tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._showClass))}}})(jQuery,
Backbone,_);var tdcMaskUI;
(function(g,e,d,c){tdcMaskUI={$currentContainer:c,$currentElement:c,$wrapper:c,$content:c,_inMouseUpBubbling:!1,_isInitialized:!1,_handlers:c,contentSettings:{innerColumn:{top:0,left:0},innerRow:{top:0,left:0},column:{top:0,left:0},row:{top:0,left:0}},init:function(a,b){d.isUndefined(b)||!0!==b||(tdcMaskUI._isInitialized=!1);tdcMaskUI._isInitialized||(tdcMaskUI.$wrapper=a,tdcMaskUI.$content=g('<div id="tdc-mask-content"></div>'),tdcMaskUI.$handlerStructure=g('<div id="tdc-mask-handler-structure"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$content),
tdcMaskUI.$wrapper.append(tdcMaskUI.$handlerStructure),tdcRowHandlerUI.init(b),tdcColumnHandlerUI.init(b),tdcInnerRowHandlerUI.init(b),tdcInnerColumnHandlerUI.init(b),tdcElementHandlerUI.init(b),tdcMaskUI._isInitialized=!0)},setCurrentContainer:function(a){if(tdcMaskUI._isInitialized)if(tdcMaskUI.$currentContainer=a,d.isUndefined(tdcMaskUI.$currentContainer))tdcMaskUI.$content.css({top:"",left:"",width:"",height:""}),tdcMaskUI.$content.hide(),tdcSidebar.setSidebarInfo("");else{var b="";if(tdcOperationUI.isRow(tdcMaskUI.$currentContainer)){var c=
tdcMaskUI.$currentContainer;b="tdc-content-row"}else tdcOperationUI.isColumn(tdcMaskUI.$currentContainer)?(c=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),b="tdc-content-column"):tdcOperationUI.isInnerRow(tdcMaskUI.$currentContainer)?(c=tdcMaskUI.$currentContainer,b="tdc-content-inner-row"):tdcOperationUI.isInnerColumn(tdcMaskUI.$currentContainer)&&(c=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),b="tdc-content-inner-column");if(c.length){var f=c.offset();a=f.top;f=f.left;var h=
c.outerWidth();c=c.outerHeight(!0);tdcMaskUI.$content.css({top:a,left:f,width:h,height:c});tdcMaskUI.$content.attr("class",b);tdcMaskUI.$content.show();c=tdcMaskUI.$currentContainer.data("model_id");d.isUndefined(c)||(c=tdcIFrameData.getModel(c),tdcSidebar.setSidebarInfo(c.get("tag")));tdcElementHandlerUI.hide()}}},setCurrentElement:function(a){if(tdcMaskUI._isInitialized)if(tdcMaskUI.$currentElement=a,d.isUndefined(tdcMaskUI.$currentElement))tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide();else{a=
tdcMaskUI.$currentElement.offset();var b=tdcMaskUI.$currentElement.outerWidth(),c=tdcMaskUI.$currentElement.outerHeight(!0);tdcMaskUI.$wrapper.css({top:a.top,left:a.left,width:b,height:c});tdcMaskUI.$content.css({top:a.top,left:a.left,width:b,height:c});tdcMaskUI.$content.removeAttr("class");tdcMaskUI.$wrapper.show();tdcMaskUI.$content.show();tdcMaskUI.setHandlers();a=tdcMaskUI.$currentElement.data("model_id");d.isUndefined(a)||(a=tdcIFrameData.getModel(a),b=a.get("attrs"),d.has(b,"custom_title")?
tdcSidebar.setSidebarInfo(b.custom_title):tdcSidebar.setSidebarInfo(a.get("tag")))}},repositionMask:function(a){tdcMaskUI._isInitialized&&(a=tdcAdminIFrameUI._$liveIframe[0].contentWindow.document.elementFromPoint(a.pageX,a.pageY),a=g(a).closest(".tdc-element"),a.length&&tdcMaskUI.setCurrentElement(a))},setContentAtMouseUp:function(a){a.hasClass("tdc-row")?tdcMaskUI._inMouseUpBubbling?tdcMaskUI._inMouseUpBubbling=!1:tdcMaskUI.setCurrentContainer(a):a.hasClass("tdc-column")?tdcMaskUI._inMouseUpBubbling||
(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element-inner-row")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-inner-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element")&&(tdcMaskUI.setCurrentElement(a),tdcMaskUI._inMouseUpBubbling=!0)},setHandlers:function(){tdcMaskUI._isInitialized&&(d.isUndefined(tdcMaskUI.$currentElement)||
d.isUndefined(tdcMaskUI._handlers)||d.map(tdcMaskUI._handlers,function(a,b){a.setElement(tdcMaskUI.$currentElement)}))},addHandler:function(a,b){tdcMaskUI._isInitialized||(d.isUndefined(tdcMaskUI._handlers)?(tdcMaskUI._handlers={},tdcMaskUI._handlers[a]=b):d.has(tdcMaskUI._handlers,a)||(tdcMaskUI._handlers[a]=b))},show:function(){tdcMaskUI._isInitialized&&!d.isUndefined(tdcMaskUI.$wrapper)&&(tdcMaskUI.$wrapper.show(),tdcMaskUI.$content.show())},hide:function(){tdcMaskUI._isInitialized&&!d.isUndefined(tdcMaskUI.$wrapper)&&
(tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide())}}})(jQuery,Backbone,_);var tdcRowHandlerUI;
(function(g,e,d,c){tdcRowHandlerUI={_handlerId:"tdc-row",_handlerText:"Row",_handlerCssClass:"tdc-mask-row",$elementRow:c,_$handlerWrapper:c,_$handlerClone:c,_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcRowHandlerUI._isInitialized=!1);tdcRowHandlerUI._isInitialized||(tdcRowHandlerUI._$handlerWrapper=g('<div id="'+tdcRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-arrow-vertical" title="Drag row vertically"></div><div class="tdc-mask-handler-drag" title="Row settings">'+tdcRowHandlerUI._handlerText+
"</div></div>"),tdcRowHandlerUI._$handlerClone=g('<div class="tdc-mask-clone" title="Duplicate row"></div>'),tdcRowHandlerUI._$handlerWrapper.append(tdcRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcRowHandlerUI._$handlerWrapper),tdcRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcRowHandlerUI.$elementRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(c);tdcMaskUI.hide()}),tdcRowHandlerUI._$handlerClone.mousedown(tdcRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcRowHandlerUI._handlerId,tdcRowHandlerUI),tdcRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inRow(a);d.isUndefined(a)?tdcRowHandlerUI._$handlerWrapper.hide():(tdcRowHandlerUI.$elementRow=a,tdcRowHandlerUI._$handlerWrapper.show())},
_triggerEvent:function(a){d.isUndefined(a)||d.isUndefined(tdcRowHandlerUI.$elementRow)||tdcRowHandlerUI.$elementRow.trigger(a)},cloneHandler:function(a){1===a.which&&(a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone row",tdcRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-clone-row")){a=a.data("model_id");var b=tdcIFrameData.getModel(a).get("blockUid"),f=tdcAdminIFrameUI.getLiveIframe();tdcRowHandlerUI.$elementRow=f.contents().find("#"+b);tdcDebug.log(a);tdcDebug.log(b);
if(!tdcRowHandlerUI.$elementRow.length){tb_remove();return}tdcRowHandlerUI.$elementRow.data("model_id",a)}a=tdcRowHandlerUI.$elementRow.data("model_id");if(d.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),d.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{tdcOperationUI.setDraggedElement(g('<div class="tdc-row">Cloned row</div>'));
var h=tdcOperationUI.getDraggedElement();h.insertAfter(tdcRowHandlerUI.$elementRow);tdcRowUI.bindRow(h);var e=h.prevAll(".tdc-row").length;b=new tdcIFrameData.TdcModel({content:"",attrs:d.clone(a.get("attrs")),tag:"vc_row",type:"closed",level:0,parentModel:c});new tdcIFrameData.TdcLiveView({model:b,el:h[0]});f=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:b});h.data("model_id",b.cid);tdcIFrameData.tdcRows.add(b,{at:e});h=new tdcIFrameData.TdcCollection;
h.add(f);b.set("childCollection",h);h=new tdcIFrameData.TdcCollection;f.set("childCollection",h);b.getShortcodeRender(1,"",!0,a);tdcOperationUI.setDraggedElement(c);tb_remove()}},[a],"Are you sure you want to clone the current row and all its elements?"),tdcRowHandlerUI._inCloneOperation=!1)},deleteHandler:function(a){null!==a&&a.preventDefault();a.preventDefault();a.stopPropagation();tdConfirm.showModal("Delete row",tdcRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-delete-row")){a=
a.data("model_id");var b=tdcIFrameData.getModel(a).get("blockUid"),d=tdcAdminIFrameUI.getLiveIframe();tdcRowHandlerUI.$elementRow=d.contents().find("#"+b);tdcDebug.log(a);tdcDebug.log(b);if(!tdcRowHandlerUI.$elementRow.length){tb_remove();return}tdcRowHandlerUI.$elementRow.data("model_id",a)}tdcOperationUI.setDraggedElement(tdcRowHandlerUI.$elementRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();b=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");
d=a.children();b=d.index(b);if(-1===b&&1===d.length||2===d.length&&-1!==b)b="",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(b=" tdc-element-column"),b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(b),a.append(b);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!1,
wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!0,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(c);tdcOperationUI.setCurrentElementOver(c);tdcSidebarPanel.clearPanel();tb_remove()},[a],"Are you sure you want to delete the current row and all its elements?")}}})(jQuery,Backbone,_);var tdcColumnHandlerUI;
(function(g,e,d,c){tdcColumnHandlerUI={_handlerId:"tdc-column",_handlerText:"Column",_handlerCssClass:"tdc-mask-column",$elementColumn:c,_$handlerWrapper:c,_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcColumnHandlerUI._isInitialized=!1);tdcColumnHandlerUI._isInitialized||(a=g('<div id="'+tdcColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-arrow-horizontal" title="Drag column horizontally"></div><div class="tdc-mask-handler-drag" title="Column settings">'+tdcColumnHandlerUI._handlerText+
"</div></div>"),tdcColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a),tdcColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcColumnHandlerUI._triggerEvent(a)}),tdcColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcColumnHandlerUI.$elementColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(c);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcColumnHandlerUI._handlerId,tdcColumnHandlerUI),tdcColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inColumn(a);d.isUndefined(a)?tdcColumnHandlerUI._$handlerWrapper.hide():(tdcColumnHandlerUI.$elementColumn=a,tdcColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){d.isUndefined(a)||
d.isUndefined(tdcColumnHandlerUI.$elementColumn)||tdcColumnHandlerUI.$elementColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcInnerRowHandlerUI;
(function(g,e,d,c){tdcInnerRowHandlerUI={_handlerId:"tdc-element-inner-row",_handlerText:"Inner Row",_handlerCssClass:"tdc-mask-inner-row",$elementInnerRow:c,_$handlerWrapper:c,_$handlerClone:c,_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcInnerRowHandlerUI._isInitialized=!1);tdcInnerRowHandlerUI._isInitialized||(tdcInnerRowHandlerUI._$handlerWrapper=g('<div id="'+tdcInnerRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-arrow-vertical" title="Drag inner row"></div><div class="tdc-mask-handler-drag" title="Inner row settings">'+
tdcInnerRowHandlerUI._handlerText+"</div></div>"),tdcInnerRowHandlerUI._$handlerClone=g('<div class="tdc-mask-clone" title="Duplicate inner row"></div>'),tdcInnerRowHandlerUI._$handlerWrapper.append(tdcInnerRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcInnerRowHandlerUI._$handlerWrapper),tdcInnerRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();
tdcInnerRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerRowHandlerUI.$elementInnerRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(c);tdcMaskUI.hide()}),tdcInnerRowHandlerUI._$handlerClone.mousedown(tdcInnerRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcInnerRowHandlerUI._handlerId,tdcInnerRowHandlerUI),tdcInnerRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerRow(a);
d.isUndefined(a)?tdcInnerRowHandlerUI._$handlerWrapper.hide():(tdcInnerRowHandlerUI.$elementInnerRow=a,tdcInnerRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){d.isUndefined(a)||d.isUndefined(tdcInnerRowHandlerUI.$elementInnerRow)||tdcInnerRowHandlerUI.$elementInnerRow.trigger(a)},cloneHandler:function(a){1===a.which&&(a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone inner row",tdcInnerRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-clone-inner-row")){a=
a.data("model_id");var b=tdcIFrameData.getModel(a).get("blockUid"),f=tdcAdminIFrameUI.getLiveIframe();console.log(a);console.log(b);b=f.contents().find("#"+b);if(!b.length){tb_remove();return}tdcInnerRowHandlerUI.$elementInnerRow=b.closest("."+tdcInnerRowUI.getElementCssClass());tdcInnerRowHandlerUI.$elementInnerRow.data("model_id",a)}a=tdcInnerRowHandlerUI.$elementInnerRow.data("model_id");if(d.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",
!0,!1);else if(a=tdcIFrameData.getModel(a),d.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{tdcOperationUI.setDraggedElement(g('<div class="tdc-element-column tdc-element-inner-row">Cloned Inner Row</div>'));var h=tdcOperationUI.getDraggedElement();h.insertAfter(tdcInnerRowHandlerUI.$elementInnerRow);tdcInnerRowUI.bindInnerRow(h);var e=h.prevAll(".tdc-element-column").length;b=new tdcIFrameData.TdcModel({content:"",
attrs:d.clone(a.get("attrs")),tag:"vc_row_inner",type:"closed",level:2,parentModel:a.get("parentModel")});new tdcIFrameData.TdcLiveView({model:b,el:h[0]});f=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:b});h.data("model_id",b.cid);a.get("parentModel").get("childCollection").add(b,{at:e});h=new tdcIFrameData.TdcCollection;h.add(f);b.set("childCollection",h);h=new tdcIFrameData.TdcCollection;f.set("childCollection",h);f=tdcIFrameData._getDestinationCol();
b.getShortcodeRender(f,"",!0,a);tdcOperationUI.setDraggedElement(c);tb_remove()}},[a],"Are you sure you want to clone the current inner row and all its elements?"))},deleteHandler:function(a){null!==a&&a.preventDefault();tdConfirm.showModal("Delete inner row",tdcInnerRowHandlerUI,function(){tdcOperationUI.setDraggedElement(tdcInnerRowHandlerUI.$elementInnerRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);var a=tdcOperationUI.getDraggedElement(),k=tdcAdminWrapperUI.$placeholder;
a=a.closest(".tdc-elements");var f=a.children();k=f.index(k);if(-1===k&&1===f.length||2===f.length&&-1!==k)k="",d.isUndefined(tdcElementHandlerUI.$element)&&(tdcElementHandlerUI.$element=tdcInnerRowHandlerUI.$elementInnerRow),tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?k=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(k=" tdc-element-column"),k=g('<div class="'+tdcOperationUI._emptyElementClass+k+'" title="Empty element that should be removed by composer"></div>'),
tdcElementUI.bindEmptyElement(k),a.append(k);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!1,wasInnerColumnDragged:!1,wasInnerRowDragged:!0,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(c);tdcOperationUI.setCurrentElementOver(c);tdcSidebarPanel.clearPanel();tb_remove()},c,"Are you sure you want to delete the current inner row and all its elements?")}}})(jQuery,
Backbone,_);var tdcInnerColumnHandlerUI;
(function(g,e,d,c){tdcInnerColumnHandlerUI={_handlerId:"tdc-inner-column",_handlerText:"Inner Column",_handlerCssClass:"tdc-mask-inner-column",$elementInnerColumn:c,_$handlerWrapper:c,_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcInnerColumnHandlerUI._isInitialized=!1);tdcInnerColumnHandlerUI._isInitialized||(a=g('<div id="'+tdcInnerColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-arrow-horizontal" title="Drag inner column horizontally"></div><div class="tdc-mask-handler-drag" title="Inner column settings">'+tdcInnerColumnHandlerUI._handlerText+
"</div></div>"),tdcInnerColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a),tdcInnerColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}),
tdcInnerColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerColumnHandlerUI.$elementInnerColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(c);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcInnerColumnHandlerUI._handlerId,tdcInnerColumnHandlerUI),tdcInnerColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerColumn(a);d.isUndefined(a)?tdcInnerColumnHandlerUI._$handlerWrapper.hide():
(tdcInnerColumnHandlerUI.$elementInnerColumn=a,tdcInnerColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){d.isUndefined(a)||d.isUndefined(tdcInnerColumnHandlerUI.$elementInnerColumn)||tdcInnerColumnHandlerUI.$elementInnerColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcElementHandlerUI;
(function(g,e,d,c){tdcElementHandlerUI={_handlerId:"tdc-element",_handlerCssClass:"tdc-mask-element",_confirmDeletion:"Do you want to delete element?",$element:c,_$handlerWrapper:c,_$handlerClone:c,_$handlerDelete:c,_isInitialized:!1,init:function(a){d.isUndefined(a)||!0!==a||(tdcElementHandlerUI._isInitialized=!1);tdcElementHandlerUI._isInitialized||(tdcElementHandlerUI._$handlerWrapper=g('<div id="'+tdcElementHandlerUI._handlerCssClass+'"></div>'),tdcElementHandlerUI._$handlerDelete=g('<div class="tdc-mask-element-delete" title="Delete element"></div>'),
tdcElementHandlerUI._$handlerClone=g('<div class="tdc-mask-element-clone" title="Duplicate element"></div>'),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerDelete),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcElementHandlerUI._$handlerWrapper),tdcElementHandlerUI._$handlerDelete.click(function(a){tdConfirm.showModal("Delete current element",tdcElementHandlerUI,function(a){tdcElementHandlerUI.deleteHandler(a);
tb_remove()},[a],"Are you sure you want to delete this element?")}),tdcElementHandlerUI._$handlerClone.click(function(a){a.preventDefault();a.stopPropagation();a=tdcElementHandlerUI.$element.data("model_id");if(d.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),d.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model not in structure data!",
!0,!1);else{var b=a.clone(),f=a.get("parentModel").get("childCollection");f.add(b,{at:f.indexOf(a)+1,silent:!0});tdcOperationUI.setDraggedElement(g('<div class="tdc-element">Cloned Element</div>'));f=tdcOperationUI.getDraggedElement();f.insertAfter(tdcElementHandlerUI.$element);tdcElementUI.bindElement(f);var h=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);d.isUndefined(h)&&new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Destination model not in structure data!",
!0,!1);h=tdcIFrameData._getDestinationCol();new tdcIFrameData.TdcLiveView({model:b,el:f[0]});f.data("model_id",b.cid);b.getShortcodeRender(h,"",!0,a);tdcOperationUI.setDraggedElement(c)}}),tdcElementHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcElementHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcElementHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcElementHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(tdcElementHandlerUI.$element);
tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(c);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcElementHandlerUI._handlerId,tdcElementHandlerUI),tdcElementHandlerUI._isInitialized=!0)},deleteHandler:function(a){null!==a&&a.preventDefault();tdcOperationUI.setDraggedElement(tdcElementHandlerUI.$element);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var b=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");
var d=a.children();b=d.index(b);if(-1===b&&1===d.length||2===d.length&&-1!==b)b="",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(b=" tdc-element-column"),b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(b),a.append(b);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!0,
wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(c);tdcOperationUI.setCurrentElementOver(c);tdcSidebarPanel.clearPanel()},setElement:function(a){!d.isUndefined(a)&&tdcOperationUI.isElement(a)?(tdcElementHandlerUI.$element=a,tdcElementHandlerUI._$handlerWrapper.show()):tdcElementHandlerUI._$handlerWrapper.hide()},show:function(){tdcElementHandlerUI._$handlerWrapper.show()},
hide:function(){tdcElementHandlerUI._$handlerWrapper.hide()},_triggerEvent:function(a){d.isUndefined(a)||d.isUndefined(tdcElementHandlerUI.$element)||tdcElementHandlerUI.$element.trigger(a)}}})(jQuery,Backbone,_);var tdcIFrameData;
(function(g,e,d,c){tdcIFrameData={iframeContents:c,tdcRows:c,TdcModel:c,TdcCollection:c,TdcLiveView:c,_postOriginalContentJSON:c,_shortcodeParserSettingsClone:c,_isInitialized:!1,init:function(a,b){d.isUndefined(b)||!0!==b||(tdcIFrameData._isInitialized=!1);if(!tdcIFrameData._isInitialized&&(tdcIFrameData.iframeContents=a,tdcIFrameData._defineStructuredData(),!0===tdcIFrameData._initStructuredData())){var c={};tdcIFrameData.bindViewsModelsWrappers(c);if(!d.isEmpty(c)){for(var f in c)tdcDebug.log(c[f]);
new tdcNotice.notice("Errors happened during tdcIframeData.init() -> bindViewsModelsWrappers()!",!0,!1)}tdcDebug.log(tdcIFrameData.tdcRows.models);tdcIFrameData._isInitialized=!0}},_defineStructuredData:function(){tdcIFrameData._isInitialized||(tdcIFrameData.TdcModel=Backbone.Model.extend({getShortcodeRender:function(a,b,k,f){var h=this,e={error:c,getShortcode:""};d.isUndefined(f)?tdcIFrameData._checkModelData(h,e):tdcIFrameData._checkModelData(f,e);if(!d.isUndefined(e.getShortcode)){var l=new tdcJobManager.job;
l.shortcode=e.getShortcode;l.columns=a;l.blockUid=b;l.success_callback=function(a){tdcDebug.log(a);var e=tdcAdminIFrameUI.getIframeWindow();d.isUndefined(f)&&tdcIFrameData.deleteCallback(h);!1===k?h.set("blockUid",a.blockUid):h.set("blockUid",c);d.has(a,"replyHtml")&&(h.set("bindNewContent",k),h.set("shortcode",l.shortcode),h.set("html",a.replyHtml));d.has(a,"replyJsForEval")&&(e.tdcEvalGlobal={oldBlockUid:b},tdcAdminIFrameUI.evalInIframe(a.replyJsForEval))};l.error_callback=function(a,b){tdcDebug.log(b);
tdcDebug.log(a)};a=tdcOperationUI.getDraggedElement();d.isUndefined(a)||a.addClass("tdc-dropped");tdcJobManager.addJob(l)}e={error:c,getShortcode:""};tdcIFrameData._checkModelData(h,e);d.isUndefined(e.error)||tdcDebug.log(e.error);e={error:c,getShortcode:""};d.isUndefined(h.get("parentModel"))||(tdcIFrameData._checkModelData(h.get("parentModel"),e),d.isUndefined(e.error)||tdcDebug.log(e.error))}}),tdcIFrameData.TdcCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),tdcIFrameData.TdcLiveView=
Backbone.View.extend({initialize:function(){this.listenTo(this.model,"change:current",this.changeCurrent);this.listenTo(this.model,"change:html",this.customRender);this.listenTo(this.model,"remove",this.customRemove)},changeCurrent:function(a,b,c){this.model.has("current")&&!d.isUndefined(this.model.get("current"))&&!0===this.model.get("current")?this.$el.addClass("tdc-element-selected"):this.$el.removeClass("tdc-element-selected");this.model.set("cssWidth",this.$el.width())},customRemove:function(a,
b,d){"tdc-rows"===this.$el.attr("id")?this.$el.html(""):this.remove()},customRender:function(a,b,k){tdcDebug.log("customRender - Rendering our model");if(this.model.has("html")&&!d.isUndefined(this.model.get("html"))&&(this.$el.removeClass("tdc-dropped"),this.$el.removeClass("tdc-changed"),this.$el.html(this.model.get("html")),setTimeout(function(){"undefined"!==typeof tdcIFrameData.iframeContents.lastMouseEvent&&tdcMaskUI.repositionMask(tdcIFrameData.iframeContents.lastMouseEvent)},100),k=this.$el.find(".td_block_wrap"),
k.length&&0===parseInt(k.height())&&k.addClass("tdc-block-empty"),this.model.has("bindNewContent")&&!0===this.model.get("bindNewContent")))if(this.model.set("bindNewContent",!1,{silent:!0}),this.$el.hasClass("tdc-element-inner-row-temp")){var f=this.$el.find(".tdc-inner-row");b=a.get("childCollection");this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row");this.model.set("blockUid",f.attr("id"));window.addInnerRowWrappers(this.$el);if(!d.isUndefined(b)){var h={};tdcIFrameData.bindViewsModelsWrappers(h,
b,this.$el,3);if(!d.isEmpty(h)){for(var e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}}tdcInnerRowUI.init(this.$el.parent());tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},c,this.model)}else if(this.$el.hasClass("tdc-element-inner-row")){f=
this.$el.find(".tdc-inner-row");b=this.model.get("childCollection");d.isUndefined(b)||b.reset();window.addInnerRowWrappers(this.$el);this.model.set("blockUid",f.attr("id"));var l=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,l,a)&&(b=this.model.get("childCollection"),!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,3),!d.isEmpty(h)))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},c,this.model)}else if(this.$el.hasClass("tdc-row-temp"))if(this.model.has("templateContent")){var m=this;a=m.model.get("templateContent");e=m.$el.find(".tdc-row");tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);
a=tdcShortcodeParser.parse(0,JSON.parse(window.atob(a)));if(a.length!==e.length)new tdcNotice.notice("Errors happened in templateContent(content.length!==$tdcRows.length) during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);else{var p=tdcIFrameData.tdcRows;tdcIFrameData.tdcRows=new tdcIFrameData.TdcCollection;d.each(a,function(a,b,d){tdcIFrameData._getData(c,a,h)});d.isEmpty(h)||(tdcDebug.log(h),new tdcNotice.notice("Errors happened in templateContent during tdcIFrameData.changeData() -> _getData()!",
!0,!1));a={error:c,shortcode:c};tdcIFrameData.checkCurrentData(a);d.isUndefined(a.error)||(tdcDebug.log(a.error),new tdcNotice.notice(h,!0,!1));e.length!==tdcIFrameData.tdcRows.length?new tdcNotice.notice("Errors happened in templateContent during() tdcIFrameData.TdcLiveView -> customRender!",!0,!1):(m.$el.find(".tdc-row").each(function(a,b){var c=g(b);c.insertBefore(m.$el);var f=tdcIFrameData.tdcRows.at(a);new tdcIFrameData.TdcLiveView({model:f,el:b});var k=m.$el.prevAll().length,h=f.get("childCollection");
p.add(f,{at:k});window.addRowWrappers(c);if(!0===tdcIFrameData._initNewContentStructureData(1,l,f)&&!d.isUndefined(h))if(k={},tdcIFrameData.bindViewsModelsWrappers(k,h,c,1),d.isEmpty(k))c.data("model_id",f.cid);else{for(var e in k)tdcDebug.log(k[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1)}}),tdcIFrameData.tdcRows.reset(),tdcIFrameData.tdcRows=p,m.$el.remove(),tdcIFrameData.removeModel(m.model),tdcRowUI.init(f),tdcColumnUI.init(f),tdcInnerRowUI.init(f),
tdcInnerColumnUI.init(f),tdcElementUI.init(f),tdcSidebar.setSettings({$currentRow:f},c,this.model))}}else if(f=this.$el.find(".tdc-row"),b=a.get("childCollection"),this.$el.removeClass("tdc-row-temp").addClass(f.attr("class")),this.$el.attr("id",f.attr("id")),this.$el.html(f.html()),this.model.set("blockUid",f.attr("id")),window.addRowWrappers(this.$el),h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,1),d.isEmpty(h))tdcRowUI.init(this.$el.parent()),tdcColumnUI.init(this.$el),tdcElementUI.init(this.$el),
tdcSidebar.setSettings({$currentRow:this.$el,$currentColumn:tdcOperationUI.inColumn(k),$currentElement:k},c,this.model);else{for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1)}else if(this.$el.hasClass("tdc-row")){f=this.$el.find(".tdc-row");b=this.model.get("childCollection");d.isUndefined(b)||b.reset();this.$el.html(f.html());this.$el.attr("class",f.attr("class"));this.$el.attr("id",f.attr("id"));this.model.set("blockUid",
f.attr("id"));window.addRowWrappers(this.$el);l=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(1,l,this.model)&&!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,1),!d.isEmpty(h))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:this.$el},
c,this.model)}else if(this.$el.hasClass("tdc-column")){f=this.$el.find(".tdc-column");b=this.model.get("childCollection");d.isUndefined(b)||b.reset();f.unwrap();this.$el=f;this.$el.data("model_id",this.model.cid);window.addColumnWrappers(this.$el);l=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(2,l,this.model)&&!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,2),!d.isEmpty(h))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcColumnUI.init(this.$el.parent());tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:this.$el},c,this.model)}else if(this.$el.hasClass("tdc-inner-row")){f=this.$el.find(".tdc-inner-row");b=this.model.get("childCollection");d.isUndefined(b)||b.reset();this.$el.html(f.html());window.addInnerRowWrappers(this.$el);l=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,
l,this.model)&&!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,3),!d.isEmpty(h))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:this.$el},c,this.model)}else if(this.$el.hasClass("tdc-inner-column")){f=
this.$el.find(".tdc-inner-column");b=this.model.get("childCollection");d.isUndefined(b)||b.reset();f.unwrap();this.$el=f;this.$el.data("model_id",this.model.cid);window.addInnerColumnWrappers(this.$el);l=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(4,l,this.model)&&!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,this.$el,4),!d.isEmpty(h))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerColumnUI.init(this.$el.parent());tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:this.$el},c,this.model)}else if("tdc-rows"===this.$el.attr("id")){f=this.$el.find(".tdc-row");k=this.model.cid;a=tdcIFrameData.getModel(k);b=a.get("childCollection");f.data("model_id",k);this.model.set("blockUid",f.attr("id"));window.addRowWrappers(this.$el);
if(!d.isUndefined(b)&&(h={},tdcIFrameData.bindViewsModelsWrappers(h,b,f,1),!d.isEmpty(h))){for(e in h)tdcDebug.log(h[e]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el);tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);this.$el=f;tdcSidebar.setSettings({$currentRow:f},c,this.model)}else if(this.$el.hasClass("tdc-element")){e=this.$el.attr("class");f=[];d.isUndefined(e)||
(f=this.$el.attr("class").split(/\s+/));this.$el.html(this.model.get("html"));e=this.$el.find(".td_block_wrap");e.unwrap();this.$el=e;this.$el.data("model_id",this.model.cid);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:tdcOperationUI.inInnerColumn(this.$el),$currentElement:this.$el},c,this.model);var n=this;g.each(f,function(a,b){0===b.indexOf("tdc-element")&&
n.$el.addClass(b)});tdcElementUI.bindElement(this.$el)}}}))},_getPostOriginalContentJSON:function(){if(d.isUndefined(tdcIFrameData._postOriginalContentJSON)&&!d.isUndefined(window.tdcPostSettings)){var a=Object.keys(window.tdcAdminSettings.mappedShortcodes);a=a.filter(function(a){return 0>["vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)});a={0:["vc_row"],1:["vc_column"],2:["vc_row_inner"],3:["vc_column_inner"],4:a};tdcIFrameData._shortcodeParserSettingsClone=a;tdcShortcodeParser.init(a);
tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,window.tdcPostSettings.postContent)}return tdcIFrameData._postOriginalContentJSON},_getContentJSON:function(a,b){var c;d.isUndefined(window.tdcPostSettings)||(c=tdcShortcodeParser.parse(a,b));return c},_initStructuredData:function(){if(!tdcIFrameData._isInitialized){var a=tdcIFrameData._getPostOriginalContentJSON();tdcDebug.log(a);if(a.length){tdcIFrameData.tdcRows=new tdcIFrameData.TdcCollection;var b={};d.each(a,function(a,d,h){tdcIFrameData._getData(c,
a,b)});d.isEmpty(b)||(tdcDebug.log(b),new tdcNotice.notice("Errors happened during _initStructureData() -> _getData()!",!0,!1));a={error:c,shortcode:c};tdcIFrameData.checkCurrentData(a);d.isUndefined(a.error)||(tdcDebug.log(a.error),new tdcNotice.notice(b,!0,!1))}return!0}},_initNewContentStructureData:function(a,b,k){b=tdcIFrameData._getContentJSON(a,b);if(b.length){var f={};d.each(b,function(b,d,c){tdcIFrameData._getData(k,b,f,a)});d.isEmpty(f)||(tdcDebug.log(f),new tdcNotice.notice(f,!0,!1));b=
{error:c,shortcode:c};tdcIFrameData.checkCurrentData(b);d.isUndefined(b.error)||(tdcDebug.log(b.error),new tdcNotice.notice("Errors happened during _initNewContentStructureData() -> checkCurrentData()!",!0,!1))}return!0},_getData:function(a,b,k,f){var h;var e=d.isUndefined(a)?tdcIFrameData.tdcRows:a.get("childCollection");for(var l in tdcIFrameData._shortcodeParserSettingsClone)if(!(!d.isUndefined(f)&&parseInt(f,10)>l||d.isUndefined(b.shortcode))&&d.isObject(b.shortcode)&&d.has(b.shortcode,"tag")&&
-1!==d.indexOf(tdcIFrameData._shortcodeParserSettingsClone[l],b.shortcode.tag)){0<parseInt(l,10)&&d.isUndefined(a)&&(h="Not rows as the first elements!");!d.isUndefined(a)&&parseInt(a.get("level"),10)>=parseInt(l,10)&&(h="Elements does not respect the shortcode levels!");!d.isUndefined(a)&&1<parseInt(l,10)-parseInt(a.get("level"),10)&&2!==parseInt(a.get("level"),10)&&4!==parseInt(l,10)&&(h="Elements respect the shortcode levels, but the difference higher than 1 is not allowed here!");d.isUndefined(h)||
(k[d.keys(k).length]={element:b,info:h,parentModel:a});4!==parseInt(l,10)||d.isUndefined(b.shortcode.content)||(f=d.clone(b.shortcode.attrs.named),f.content=b.shortcode.content,b.shortcode.attrs.named=f);var m=new tdcIFrameData.TdcModel({content:b.content,attrs:b.shortcode.attrs.named,tag:b.shortcode.tag,type:b.shortcode.type,level:parseInt(l,10),parentModel:a,bindNewContent:!1});d.has(b,"child")&&0<b.child.length&&(m.set("childCollection",new tdcIFrameData.TdcCollection),d.each(b.child,function(a,
b,d){tdcIFrameData._getData(m,a,k,c)}));break}d.isUndefined(m)?k[d.keys(k).length]={element:b,info:"Element not found!",parentModel:a}:d.isUndefined(e)||e.add(m)},getModel:function(a,b){if(tdcIFrameData._isInitialized){var c;d.isUndefined(b)&&(b=tdcIFrameData.tdcRows);d.each(b.models,function(b,k,e){d.isUndefined(c)&&(b.cid===a?c=b:b.has("childCollection")&&(b=b.get("childCollection"),c=tdcIFrameData.getModel(a,b)))});if(!d.isUndefined(c))return c}},getFirstModelByTag:function(a,b){if(tdcIFrameData._isInitialized){var c;
d.isUndefined(b)&&(b=tdcIFrameData.tdcRows);d.each(b.models,function(b,k,e){d.isUndefined(c)&&(b.attributes.tag===a?c=b:b.has("childCollection")&&(b=b.get("childCollection"),c=tdcIFrameData.getFirstModelByTag(a,b)))});if(!d.isUndefined(c))return c}},removeModel:function(a,b,c){(d.isUndefined(b)||!0===b)&&tdcIFrameData.deleteCallback(a);b=a.get("parentModel");d.isUndefined(c)&&(c={});d.isUndefined(b)?tdcIFrameData.tdcRows.remove(a,c):b.get("childCollection").remove(a,c)},deleteCallback:function(a){var b=
a.get("blockUid");a=a.get("childCollection");tdcAdminIFrameUI.getIframeWindow().tdcComposerBlocksApi.deleteItem(b);!d.isUndefined(a)&&a.length&&d.each(a.models,function(a,b,d){tdcIFrameData.deleteCallback(a)})},_checkModelData:function(a,b){if(d.isUndefined(b.error)){var k=a.get("parentModel");if(0!==a.level||d.isUndefined(k))if(!d.isUndefined(k)&&parseInt(k.get("level"),10)>=parseInt(a.level,10))b.error="Elements does not respect the shortcode levels!";else if(!d.isUndefined(k)&&1<parseInt(a.level,
10)-parseInt(k.get("level"),10)&&2!==parseInt(k.get("level"),10)&&4!==parseInt(a.level,10))b.error="Elements respect the shortcode levels, but the difference higher than 1 is not allowed here!";else{!d.isUndefined(b.getShortcode)&&d.isUndefined(b.deepLevel)&&(b.deepLevel=0,b["tempShortcodeDeepLevel"+b.deepLevel]="");if(!d.isUndefined(b.getShortcode)&&a.has("templateContent")&&""!==a.get("templateContent"))b.template=JSON.parse(window.atob(a.get("templateContent")));else if(a.has("childCollection")){d.isUndefined(b.getShortcode)||
(b.deepLevel++,b["tempShortcodeDeepLevel"+b.deepLevel]="");var f=a.get("childCollection");d.each(f.models,function(a,d,c){tdcIFrameData._checkModelData(f.get(a.cid),b)});d.isUndefined(b.getShortcode)||b.deepLevel--}if(!d.isUndefined(b.getShortcode)){var h=a.get("type");k=a.get("tag");var e=a.get("attrs"),l="";if("td_block_text_with_title"===k||"vc_column_text"===k||"vc_raw_html"===k)d.map(e,function(a,b){"content"!==b&&(l+=" "+b+'="'+a+'"')}),l=d.has(e,"content")?"["+k+l+"]"+d.unescape(e.content)+
"[/"+k+"]":"["+k+l+"]";else switch(d.map(e,function(a,b){l+=" "+b+'="'+a+'"'}),h){case "single":l="["+k+l+"]";break;case "closed":h="";d.isUndefined(b["tempShortcodeDeepLevel"+(parseInt(b.deepLevel)+1)])||(h=b["tempShortcodeDeepLevel"+(parseInt(b.deepLevel)+1)],b["tempShortcodeDeepLevel"+(parseInt(b.deepLevel)+1)]=c);l="["+k+l+"]"+h+"[/"+k+"]";break;case "template":l=b.template}b["tempShortcodeDeepLevel"+b.deepLevel]+=l;0===b.deepLevel&&(b.getShortcode+=l)}}else b.error="Not rows as the first elements!"}},
checkCurrentData:function(a){tdcIFrameData._isInitialized&&d.each(tdcIFrameData.tdcRows.models,function(b,d,c){tdcIFrameData._checkModelData(tdcIFrameData.tdcRows.get(b.cid),a)})},changeData:function(a){if(tdcIFrameData._isInitialized){tdcMain.setContentModified();var b=tdcOperationUI.getDraggedElement(),k=b.prevAll().length;if(a.wasSidebarElementDragged)if(a.wasElementDragged){var f=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);d.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1);var h=tdcIFrameData._getDestinationCol();f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection);var e=f.get("childCollection");var l={},m=b.data("start-values"),g;"undefined"!==typeof m&&(m=JSON.parse(window.atob(m)),"undefined"!==typeof m&&(d.isArray(m)&&m.length?(l=m[0],1<m.length&&(g=m)):l=m));m=b.data("shortcodeName");m=new tdcIFrameData.TdcModel({content:"",attrs:l,tag:m,type:"single",level:4,parentModel:f});new tdcIFrameData.TdcLiveView({model:m,el:b[0]});
d.isUndefined(g)||m.set("presetValues",g);tdcElementUI.bindElement(b);tdcRecycle.takeSnapshot(m.get("tag")+" : sidebar element added");b.data("model_id",m.cid);e.add(m,{at:k});m.set("parentModel",f);m.getShortcodeRender(h,a.draggedBlockUid,!0)}else a.wasTempInnerRowDragged?(tdcRecycle.takeSnapshot("Sidebar inner-row added"),f=tdcIFrameData._getDestinationModel([".tdc-column"]),d.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1),h=tdcIFrameData._getDestinationCol(),
f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection),e=f.get("childCollection"),m=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row_inner",type:"closed",level:2,parentModel:f}),new tdcIFrameData.TdcLiveView({model:m,el:b[0]}),l=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:m}),b.data("model_id",m.cid),e.add(m,{at:k}),b=new tdcIFrameData.TdcCollection,b.add(l),m.set("childCollection",b),b=new tdcIFrameData.TdcCollection,
l.set("childCollection",b),m.getShortcodeRender(h,a.draggedBlockUid,!0)):a.wasTempRowDragged&&(tdcRecycle.takeSnapshot("Sidebar row added"),m=b.data("templateContent"),d.isUndefined(m)?(h=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:0,parentModel:c}),new tdcIFrameData.TdcLiveView({model:h,el:b[0]}),l=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:h}),b.data("model_id",h.cid),tdcIFrameData.tdcRows.add(h,{at:k}),
k=new tdcIFrameData.TdcCollection,k.add(l),h.set("childCollection",k),k=new tdcIFrameData.TdcCollection,l.set("childCollection",k),a.wasElementWithRowDragged&&(e={},f={},m=b.data("start-values"),g=b.data("row-start-values"),"undefined"!==typeof g&&(f=JSON.parse(window.atob(g))),h.set({attrs:f}),"undefined"!==typeof m&&(e=JSON.parse(window.atob(m)),d.isArray(e)&&(e=e[0])),m=b.data("shortcodeName"),b=new tdcIFrameData.TdcModel({content:"",attrs:e,tag:m,type:"single",level:2,parentModel:l}),k.add(b),
k=new tdcIFrameData.TdcCollection,b.set("childCollection",k))):(h=new tdcIFrameData.TdcModel({templateContent:m,attrs:{},tag:"vc_row",type:"template",level:0,parentModel:c}),new tdcIFrameData.TdcLiveView({model:h,el:b[0]}),b.data("model_id",h.cid),tdcIFrameData.tdcRows.add(h,{at:k}),k=new tdcIFrameData.TdcCollection,h.set("childCollection",k)),h.getShortcodeRender(1,a.draggedBlockUid,!0));else{m=b.data("model_id");if(d.isUndefined(m)){new tdcNotice.notice("changeData Error: Element model id is not in $draggedElement data!",
!0,!1);return}m=tdcIFrameData.getModel(m);if(d.isUndefined(m)){new tdcNotice.notice("changeData Error: Element model not in structure data!",!0,!1);return}if(a.wasElementDragged){tdcDebug.log("case 1");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("element recycled");tdcIFrameData.removeModel(m);return}tdcRecycle.takeSnapshot(m.get("tag")+" : element moved");g=m.get("parentModel");f=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);d.isUndefined(f)&&
new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);g.cid===f.cid?(h=g.get("childCollection"),h.remove(m,{silent:!0}),h.add(m,{at:k})):(h=tdcIFrameData._getDestinationCol(),f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection),e=f.get("childCollection"),tdcIFrameData.removeModel(m,!1,{silent:!0}),e.add(m,{at:k}),m.set("parentModel",f),a.sourceColParam!==h&&m.getShortcodeRender(h,a.draggedBlockUid,!0))}else if(a.wasInnerRowDragged){tdcDebug.log("case 2");
if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("inner row recycled");tdcRecycle.takeSnapshot("Inner row recycled");tdcIFrameData.removeModel(m);return}tdcRecycle.takeSnapshot("Inner row moved");g=m.get("parentModel");f=tdcIFrameData._getDestinationModel([".tdc-column"]);d.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);if(g.cid===f.cid)h=g.get("childCollection"),h.remove(m,{silent:!0}),h.add(m,{at:k});else{f.has("childCollection")||
f.set("childCollection",new tdcIFrameData.TdcCollection);e=f.get("childCollection");tdcIFrameData.removeModel(m,!0,{silent:!0});e.add(m,{at:k});m.set("parentModel",f);a=g.get("attrs");k=f.get("attrs");if(d.has(a,"width"))switch(a.width){case "1/3":h="13";break;case "2/3":h="23"}if(d.has(k,"width"))switch(k.width){case "1/3":l="13";break;case "2/3":l="23"}d.isUndefined(h)&&(h="11");d.isUndefined(l)&&(l="11");if(h!==l&&(a=m.get("childCollection"),!d.isUndefined(a))){a=tdcIFrameData.getChildCollectionWidths(a);
d.isUndefined(a)&&(a="11");k="11";e=1;switch(l){case "11":switch(a){case "11":k="11";break;case "23_13":k="23_13";break;case "13_23":k="13_23";break;case "12_12":k="13_13_13";break;case "13_13_13":k="13_13_13"}e=3;break;case "13":switch(a){case "11":k="11";break;case "23_13":k="11";break;case "13_23":k="11";break;case "12_12":k="11";break;case "13_13_13":k="11"}break;case "23":switch(a){case "11":k="12_12";break;case "23_13":k="12_12";break;case "13_23":k="12_12";break;case "12_12":k="12_12";break;
case "13_13_13":k="12_12"}e=2}if(a!==k||h!==l)tdcIFrameData.changeInnerRowModel(m,a,k),m.getShortcodeRender(e,null,!0)}a=tdcOperationUI.inRow(b);k=tdcOperationUI.inColumn(b);b=tdcOperationUI.inInnerRow(b);d.isUndefined(a)||d.isUndefined(k)||d.isUndefined(b)||tdcSidebar.setSettings({$currentRow:a,$currentColumn:k,$currentInnerRow:b},!0)}}else if(a.wasInnerColumnDragged||a.wasColumnDragged)tdcDebug.log("case 3"),a.wasColumnDragged?tdcRecycle.takeSnapshot("Column moved"):a.wasInnerColumnDragged&&tdcRecycle.takeSnapshot("Inner-column moved"),
g=m.get("parentModel"),h=g.get("childCollection"),h.remove(m,{silent:!0}),h.add(m,{at:k}),a.wasColumnDragged?(a=tdcOperationUI.inRow(b),d.isUndefined(a)||tdcSidebar.setSettings({$currentRow:a})):a.wasInnerColumnDragged&&(a=tdcOperationUI.inRow(b),k=tdcOperationUI.inColumn(b),b=tdcOperationUI.inInnerRow(b),d.isUndefined(a)||d.isUndefined(k)||d.isUndefined(b)||tdcSidebar.setSettings({$currentRow:a,$currentColumn:k,$currentInnerRow:b}));else if(a.wasRowDragged){tdcDebug.log("case 4");if(tdcOperationUI.getCurrentElementOver()===
tdcAdminWrapperUI.$recycle){tdcDebug.log("row recycled");tdcRecycle.takeSnapshot("Row recycled");tdcIFrameData.removeModel(m);tdcDebug.log(tdcIFrameData.tdcRows);tdcIFrameData.tdcRows.length||(h=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:0,parentModel:c}),new tdcIFrameData.TdcLiveView({model:h,el:tdcIFrameData.iframeContents.find("#tdc-rows")[0]}),l=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:h}),tdcIFrameData.tdcRows.add(h,
{at:0}),k=new tdcIFrameData.TdcCollection,k.add(l),h.set("childCollection",k),k=new tdcIFrameData.TdcCollection,l.set("childCollection",k),h.getShortcodeRender(1,a.draggedBlockUid,!0));return}tdcRecycle.takeSnapshot("Row moved");tdcIFrameData.tdcRows.remove(m,{silent:!0});tdcIFrameData.tdcRows.add(m,{at:k});tdcDebug.log("newPosition: "+k);tdcDebug.log(b)}}tdcDebug.log(tdcIFrameData.tdcRows)}},_parseModelWidthAttrs:function(a){a=a.get("attrs");var b=3;if(d.has(a,"width"))switch(a.width){case "1/3":b=
1;break;case "2/3":b=2;break;case "1/2":b=1}return b},getColumnNumber:function(a){var b=3,c=parseInt(a.get("level"),10),f=a.get("parentModel");d.isUndefined(f)||(a=4===c?tdcIFrameData._parseModelWidthAttrs(f):tdcIFrameData._parseModelWidthAttrs(a),b=3===a?tdcIFrameData.getColumnNumber(f):a);return b},_getDestinationModel:function(a){for(var b=tdcOperationUI.getDraggedElement(),c,f=0;f<a.length&&(c=b.closest(a[f]),!c.length);f++);c.length||new tdcNotice.notice("_getDestinationModel Error: Container destination not available!",
!0,!1);a=c.data("model_id");d.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model id of the container destination not in data!",!0,!1);a=tdcIFrameData.getModel(a);d.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model not in structure data!",!0,!1);return a},_getDestinationCol:function(){var a=tdcOperationUI.getDraggedElement();var b=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),d.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model id not in data!",
!0,!1),a=tdcIFrameData.getModel(a),d.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(b.length)return b=b.data("model_id"),d.isUndefined(b)&&new tdcNotice.notice("_getDestinationCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(b),d.isUndefined(b)&&new tdcNotice.notice("_getDestinationCol Error: Tne column model not in structure data!",!0,!1),
a=tdcIFrameData._parseModelWidthAttrs(a);new tdcNotice.notice("_getDestinationCol Error: The destination container is not inside of .tdc-column !",!0,!1)},_getSourceCol:function(){var a=tdcOperationUI.getDraggedElement();var b=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),d.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),d.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model not in structure data!",
!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(b.length)return b=b.data("model_id"),d.isUndefined(b)&&new tdcNotice.notice("_getSourceCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(b),d.isUndefined(b)&&new tdcNotice.notice("_getSourceCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a);new tdcNotice.notice("_getSourceCol Error: The source container is not inside of .tdc-column !",!0,!1)},getShortcodeFromData:function(a){a.getShortcode=
"";d.each(tdcIFrameData.tdcRows.models,function(b,d,c){tdcIFrameData._checkModelData(tdcIFrameData.tdcRows.get(b.cid),a)})},bindViewsModelsWrappers:function(a,b,c,f){if(d.isEmpty(a)){d.isUndefined(f)&&(f=0);if(d.isUndefined(b)){b=tdcIFrameData.tdcRows;c=tdcIFrameData.iframeContents.find("#tdc-rows .tdc-row");if(b.models.length!==c.length){a[d.keys(a).length]={collection:b,jqDOMElements:c,info:"Error at rows: "+b.models.length+"(models) : "+c.length+"(dom)"};return}f++;d.each(c,function(d,c,k){c=b.models[c];
k=g(d);k.data("model_id",c.cid);c.set("blockUid",k.attr("id"));c.set("html",d.innerHTML);new tdcIFrameData.TdcLiveView({model:c,el:d});c.has("childCollection")&&tdcIFrameData.bindViewsModelsWrappers(a,c.get("childCollection"),k,f)})}else{switch(f){case 1:var k=c.find(".tdc-columns:first").children(".tdc-column");if(b.models.length!==k.length){a[d.keys(a).length]={collection:b,jqDOMElements:k,info:"Errors at columns: "+b.models.length+"(models) : "+k.length+"(dom)",level:f};return}break;case 2:k=c.find(".tdc-elements:first").children(".tdc-element, .tdc-element-inner-row");
if(b.models.length!==k.length){a[d.keys(a).length]={collection:b,jqDOMElements:k,info:"Errors at columns elements: "+b.models.length+"(models) : "+k.length+"(dom)",level:f};return}break;case 3:k=c.find(".tdc-inner-columns:first").children(".tdc-inner-column");if(b.models.length!==k.length){a[d.keys(a).length]={collection:b,jqDOMElements:k,info:"Errors at inner columns: "+b.models.length+"(models) : "+k.length+"(dom)",level:f};return}break;case 4:if(k=c.find(".tdc-elements:first").children(".tdc-element"),
b.models.length!==k.length){a[d.keys(a).length]={collection:b,jqDOMElements:k,info:"Errors at elements: "+b.models.length+"(models) : "+k.length+"(dom)",level:f};return}}f++;d.each(k,function(c,k,h){k=b.models[k];h=g(c);h.data("model_id",k.cid);k.set("html",c.innerHTML,{silent:!0});var e;if(4===k.get("level")){var l=h.find(".td_block_inner");l.length&&(e=l.attr("id"))}else 2===k.get("level")&&(l=h.find(".tdc-inner-row"),l.length&&(e=l.attr("id")));k.set("blockUid",e);new tdcIFrameData.TdcLiveView({model:k,
el:c});!h.hasClass("tdc-element")&&k.has("childCollection")&&0<d.size(k.get("childCollection"))&&tdcIFrameData.bindViewsModelsWrappers(a,k.get("childCollection"),h,f)})}f--}},changeRowModel:function(a,b,c){var f=a.get("childCollection");if("11"===b&&("23_13"===c||"13_23"===c||"13_13_13"===c)){c=c.split("_");var k=c[0].charAt(0)+"/"+c[0].charAt(1),e=f.at(0),l=e.get("attrs");d.isUndefined(l)?e.set("attrs",{width:k}):(l=d.clone(l),l.width=k,e.set("attrs",l));f.add(new tdcIFrameData.TdcModel({content:"",
tag:"vc_column",attrs:{width:c[1].charAt(0)+"/"+c[1].charAt(1)},type:"closed",level:1,parentModel:a}));3===c.length&&f.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:c[2].charAt(0)+"/"+c[2].charAt(1)},type:"closed",level:1,parentModel:a}));tdcIFrameData.changeColumnModel(e,b,c[0])}else if(("23_13"===b||"13_23"===b||"13_13_13"===b)&&"11"===c){b=b.split("_");e=f.at(0);l=e.get("attrs");var m=e.get("childCollection"),g=f.at(1),n=g.get("childCollection");d.isUndefined(l)||(l=d.clone(l),
delete l.width,e.set("attrs",l));d.isUndefined(m)&&(m=new tdcIFrameData.TdcCollection,e.set("childCollection",m));!d.isUndefined(n)&&n.length&&d.each(n.models,function(a,b,d){a.set("parentModel",e);m.add(a)});3===b.length&&(a=f.at(2),f=a.get("childCollection"),!d.isUndefined(f)&&f.length&&d.each(f.models,function(a,b,d){a.set("parentModel",e);m.add(a)}),tdcIFrameData.removeModel(a));tdcIFrameData.removeModel(g);tdcIFrameData.changeColumnModel(e,b[0],c)}else if(!("23_13"!==b&&"13_23"!==b&&"13_13_13"!==
b||"23_13"!==c&&"13_23"!==c&&"13_13_13"!==c)){b=b.split("_");c=c.split("_");k=c[0].charAt(0)+"/"+c[0].charAt(1);var q=c[1].charAt(0)+"/"+c[1].charAt(1);e=f.at(0);l=e.get("attrs");g=f.at(1);var w=g.get("attrs");n=g.get("childCollection");3===c.length?f.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:c[2].charAt(0)+"/"+c[2].charAt(1)},type:"closed",level:1,parentModel:a})):3===b.length&&(a=f.at(2),f=a.get("childCollection"),!d.isUndefined(f)&&f.length&&(d.isUndefined(n)&&(n=
new tdcIFrameData.TdcCollection,g.set("childCollection",n)),d.each(f.models,function(a,b,d){a.set("parentModel",g);n.add(a)})),tdcIFrameData.removeModel(a));l=d.clone(l);l.width=k;e.set("attrs",l);b[0]!==c[0]&&tdcIFrameData.changeColumnModel(e,b[0],c[0]);k=d.clone(w);k.width=q;g.set("attrs",k);b[1]!==c[1]&&tdcIFrameData.changeColumnModel(g,b[1],c[1])}tdcDebug.log(tdcIFrameData.tdcRows.models)},changeFluidStructureModel:function(a,b,c){var f=a.get("childCollection"),k=a.get("tag"),e="vc_column";b=
b.split("_");var l=c.split("_");if("vc_row"===k||"vc_row_inner"===k){"vc_row_inner"===k&&(e="vc_column_inner");if(l.length>b.length)for(k=0;k<l.length;k++){c="";for(var m=0;m<l[k].length;m++)c+=l[k].charAt(m)+"/";""!==c&&(c=c.substring(0,c.length-1));if(k<b.length){var g=f.at(k);m=g.get("attrs");var n=d.clone(m);n.width=c;g.set("attrs",n)}else f.add(new tdcIFrameData.TdcModel({content:"",tag:e,attrs:{width:c},type:"closed",level:1,parentModel:a}))}else for(k=0;k<b.length;k++)if(k<l.length){g=f.at(k);
m=g.get("attrs");n=d.clone(m);c="";for(m=0;m<l[k].length;m++)c+=l[k].charAt(m)+"/";""!==c&&(c=c.substring(0,c.length-1));n.width=c;g.set("attrs",n);var q=g}else{g=f.at(l.length);a=g.get("childCollection");var w=q.get("childCollection");d.isUndefined(w)&&(w=new tdcIFrameData.TdcCollection,q.set("childCollection",w));d.isUndefined(a)||d.each(a.models,function(a,b,d){a.set("parentModel",q);w.add(a)});tdcIFrameData.removeModel(g)}tdcDebug.log(tdcIFrameData.tdcRows.models)}},changeColumnModel:function(a,
b,c){if(!(d.isUndefined(a)||d.isUndefined(b)||d.isUndefined(c))){var f=a.get("childCollection");if(!d.isUndefined(f)&&f.length){var k=a.get("attrs");!d.isUndefined(k)&&d.has(k,"width");d.each(f.models,function(f,k,e){if("vc_row_inner"===f.get("tag")&&(f=f.get("childCollection"),!d.isUndefined(f)&&f.length)){var h="";d.each(f.models,function(a,b,c){a=a.get("attrs");!d.isUndefined(a)&&d.isObject(a)&&d.has(a,"width")&&(h=b===c.length-1?h+a.width:h+(a.width+"_"))});h=h.replace(/\//g,"");"12_12"!==h&&
"23_13"!==h&&"13_23"!==h&&"13_13_13"!==h&&(h="");if("11"===b)if("23"===c)if("23_13"===h){var l=f.at(0),g=f.at(1);e=l.get("attrs");k=g.get("attrs");e=d.clone(e);k=d.clone(k);e.width="1/2";k.width="1/2";l.set("attrs",e);g.set("attrs",k)}else if("13_23"===h)l=f.at(0),g=f.at(1),e=l.get("attrs"),k=g.get("attrs"),e=d.clone(e),k=d.clone(k),e.width="1/2",k.width="1/2",l.set("attrs",e),g.set("attrs",k);else if("13_13_13"===h){l=f.at(0);g=f.at(1);f=f.at(2);e=l.get("attrs");k=g.get("attrs");var m=f.get("attrs");
e=d.clone(e);k=d.clone(k);d.clone(m);e.width="1/2";k.width="1/2";l.set("attrs",e);g.set("attrs",k);k=f.get("childCollection");if(!d.isUndefined(k)&&k.length){var u=g.get("childCollection");d.isUndefined(u)&&(u=new tdcIFrameData.TdcCollection,g.set("childCollection",u));d.each(k.models,function(a,b,c){u.add(a);a.set("parentModel",g)})}tdcIFrameData.removeModel(f)}else{if(f.models.length){l=f.at(0);e=l.get("attrs");e=d.clone(e);var r=l.get("childCollection");delete e.width;l.set("attrs",e);d.isUndefined(r)&&
(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r));var t=0;for(d.each(f.models,function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a,b,c){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),t--}}else{if("13"===c&&f.models.length)for(l=f.at(0),e=l.get("attrs"),e=d.clone(e),r=l.get("childCollection"),delete e.width,l.set("attrs",e),d.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r)),t=0,d.each(f.models,
function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a,b,c){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),t--}else if("23"===b)if("11"===c)if("12_12"===h)l=f.at(0),g=f.at(1),e=l.get("attrs"),k=g.get("attrs"),e=d.clone(e),k=d.clone(k),e.width="1/3",k.width="1/3",l.set("attrs",e),g.set("attrs",k),k=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:3,parentModel:a}),f.add(k);
else{if(f.models.length)for(l=f.at(0),e=l.get("attrs"),e=d.clone(e),r=l.get("childCollection"),delete e.width,l.set("attrs",e),d.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r)),t=0,d.each(f.models,function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),t--}else{if("13"===c&&f.models.length)for(l=f.at(0),e=l.get("attrs"),e=d.clone(e),r=l.get("childCollection"),
delete e.width,l.set("attrs",e),d.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r)),t=0,d.each(f.models,function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a,b,c){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),t--}else if("13"===b)if("11"===c)if(""===h||"12_12"!==h&&"23_13"!==h&&"13_23"!==h&&"13_13_13"!==h){if(f.models.length)for(l=f.at(0),e=l.get("attrs"),e=d.clone(e),r=l.get("childCollection"),
delete e.width,l.set("attrs",e),d.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r)),t=0,d.each(f.models,function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a,b,c){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),t--}else"12_12"===h&&f.models.length&&(l=f.at(0),g=f.at(1),e=l.get("attrs"),k=g.get("attrs"),e.width="1/3",k.width="1/3",l.set("attrs",e),g.set("attrs",k),f.add(new tdcIFrameData.TdcModel({content:"",
tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:1,parentModel:a})));else if("23"===c&&(""===h||"12_12"!==h)&&f.models.length)for(l=f.at(0),e=l.get("attrs"),e=d.clone(e),r=l.get("childCollection"),delete e.width,l.set("attrs",e),d.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,l.set("childCollection",r)),t=0,d.each(f.models,function(a,b,c){0!==b&&(t=b,a=a.get("childCollection"),d.isUndefined(a)||d.each(a.models,function(a,b,c){a.set("parentModel",l);r.add(a)}))});0<t;)tdcIFrameData.removeModel(f.at(t)),
t--}})}}},changeInnerRowModel:function(a,b,c){if(!(d.isUndefined(a)||d.isUndefined(b)||d.isUndefined(c))){var f=a.get("childCollection");if("11"!==b||"12_12"!==c&&"23_13"!==c&&"13_23"!==c&&"13_13_13"!==c)if("12_12"!==b&&"23_13"!==b&&"13_23"!==b||"11"!==c&&"12_12"!==c&&"23_13"!==c&&"13_23"!==c&&"13_13_13"!==c)"13_13_13"!==b||"11"!==c&&"12_12"!==c&&"23_13"!==c&&"13_23"!==c?tdcIFrameData.changeFluidStructureModel(a,b,c):("11"===c?(n=f.at(0),q=n.get("attrs"),e=n.get("childCollection"),l=f.at(1),k=l.get("childCollection"),
a=f.at(2),f=a.get("childCollection"),d.isUndefined(q)||(q=d.clone(q),delete q.width,n.set("attrs",q)),d.isUndefined(e)&&(e=new tdcIFrameData.TdcCollection,n.set("childCollection",e)),!d.isUndefined(k)&&k.length&&d.each(k.models,function(a,b,c){a.set("parentModel",n);e.add(a)}),!d.isUndefined(f)&&f.length&&d.each(f.models,function(a,b,c){a.set("parentModel",n);e.add(a)}),tdcIFrameData.removeModel(l)):(g=c.split("_"),p=g[0].charAt(0)+"/"+g[0].charAt(1),b=g[1].charAt(0)+"/"+g[1].charAt(1),n=f.at(0),
q=n.get("attrs"),l=f.at(1),c=l.get("attrs"),k=l.get("childCollection"),a=f.at(2),f=a.get("childCollection"),q=d.clone(q),q.width=p,n.set("attrs",q),c=d.clone(c),c.width=b,l.set("attrs",c),d.isUndefined(k)&&(k=new tdcIFrameData.TdcCollection,l.set("childCollection",k)),!d.isUndefined(f)&&f.length&&d.each(f.models,function(a,b,c){a.set("parentModel",l);k.add(a)})),tdcIFrameData.removeModel(a));else if("11"===c){n=f.at(0);q=n.get("attrs");var e=n.get("childCollection");l=f.at(1);var k=l.get("childCollection");
d.isUndefined(q)||(q=d.clone(q),delete q.width,n.set("attrs",q));d.isUndefined(e)&&(e=new tdcIFrameData.TdcCollection,n.set("childCollection",e));!d.isUndefined(k)&&k.length&&d.each(k.models,function(a,b,c){a.set("parentModel",n);e.add(a)});tdcIFrameData.removeModel(l)}else g=c.split("_"),p=g[0].charAt(0)+"/"+g[0].charAt(1),b=g[1].charAt(0)+"/"+g[1].charAt(1),n=f.at(0),q=n.get("attrs"),l=f.at(1),c=l.get("attrs"),q=d.clone(q),q.width=p,n.set("attrs",q),c=d.clone(c),c.width=b,l.set("attrs",c),3===g.length&&
f.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:g[2].charAt(0)+"/"+g[2].charAt(1)},type:"closed",level:3,parentModel:a}));else{var l=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",type:"closed",level:3,parentModel:a}),g=c.split("_"),p=g[0].charAt(0)+"/"+g[0].charAt(1);b=g[1].charAt(0)+"/"+g[1].charAt(1);var n=f.at(0),q=n.get("attrs");d.isUndefined(q)?n.set("attrs",{width:p}):(q=d.clone(q),q.width=p,n.set("attrs",q));l.set("attrs",{width:b});f.add(l);3===
g.length&&f.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:g[2].charAt(0)+"/"+g[2].charAt(1)},type:"closed",level:3,parentModel:a}))}}},getChildCollectionWidths:function(a){if(!d.isUndefined(a)){var b;d.map(a.models,function(a,c){var f=a.get("attrs");d.has(f,"width")&&(b=d.isUndefined(b)?f.width.replace("/",""):b+("_"+f.width.replace("/","")))});return b}}}})(jQuery,Backbone,_);var tdcAdminIFrameUI;
(function(g,e,d,c){tdcAdminIFrameUI={_liveIframeWindowObject:c,_$liveIframe:c,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(a){tdcAdminIFrameUI.getIframeWindow().eval(a)},
initContent:function(a){a.find(".td-main-content-wrap .tdc-row").length||(a.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(a){a=a.find(".td-main-content-wrap");a.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(a,
b){g(b).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,b){var c=g(b);c.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');c=c.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,b){g(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){var c=g(b).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){var c=g(b);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){var c=g(b).find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))});
a.find(".tdc-elements:empty").each(function(a,b){var c="",d=g(b);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');a.find(".tdc-column").each(function(a,
b){var c=g(b);c.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');c=c.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,b){g(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){var c=g(b).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});
a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){var c=g(b);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){var c=g(b).find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,b){var c="",d=g(b);d.closest(".tdc-inner-column").length?
c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addColumnWrappers=function(a){a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var b=a.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,b){g(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
b){var c=g(b).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){var c=g(b);c.length&&c.not(".tdc-element-inner-column").addClass("tdc-element-column")});b=a.find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=a.find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,b){var c="",d=g(b);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addInnerRowWrappers=function(a){var b=a.find(".td_block_wrap");
window.checkTdBlockWrap(b);b.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,b){g(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){var c=g(b).find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(c=g(b).find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-elements:empty").each(function(a,b){var c="",d=g(b);d.closest(".tdc-inner-column").length?
c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.addInnerColumnWrappers=function(a){var b=a.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element");b=a.find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=a.find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,b){var c="",d=g(b);d.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":d.closest(".tdc-column").length&&(c=" tdc-element-column");c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);d.append(c)})};window.checkTdBlockWrap=function(a){a.each(function(a,b){var c=
g(b);0===parseInt(c.height())&&c.addClass("tdc-block-empty")})};var a=window.tdcPostSettings.postMetaVcJsStatus,b=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==a||""===b||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",
function(){tb_remove()});var a=g(this).contents();tdcAdminIFrameUI.initContent(a);tdcAdminIFrameUI._liveIframeWindowObject=g(this).get(0).contentWindow;var b=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');a.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=c;window.addWrappers(a);tdcIFrameData.init(a,!0);tdcOperationUI.init(a,!0);a.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,
"_blank")});a[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);a[0].addEventListener("mousemove",function(b){a.lastMouseEvent=b},!0)},checkIframe:function(a){if(d.isUndefined(a))a=window.tdcPostSettings.postUrl,a=0>a.indexOf("?")?a+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId):a+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId),a=g('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+a+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe),
g("#tdc-live-iframe-wrapper").append(a);else{var b=a,e=b.contents();tdcAdminIFrameUI.initContent(e);tdcAdminIFrameUI._liveIframeWindowObject=b.get(0).contentWindow;b=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');e.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=c;window.addWrappers(e);tdcIFrameData.init(e,!0);tdcOperationUI.init(e,!0);e.find("a").each(function(a,b){b.setAttribute("target","_blank")});a.removeClass("tdc-live-iframe");
a.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=a}}})(jQuery,Backbone,_);var tdcMain={};
(function(){tdcMain={_contentModified:!1,_sidebarInline:!1,_sidebarHidden:!1,_recycleShown:!1,init:function(){tdcAdminIFrameUI.init()},getContentModified:function(){return tdcMain._contentModified},setContentModified:function(){tdcMain._contentModified=!0},resetContentModified:function(){tdcMain._contentModified=!1},setSidebarInline:function(){tdcMain._sidebarInline=!0},getSidebarInline:function(){return tdcMain._sidebarInline},resetSidebarInline:function(){tdcMain._sidebarInline=!1},setSidebarHidden:function(){tdcMain._sidebarHidden=
!0},getSidebarHidden:function(){return tdcMain._sidebarHidden},resetSidebarHidden:function(){tdcMain._sidebarHidden=!1},setRecycleShown:function(){tdcMain._recycleShown=(tdcOperationUI.isRowDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isElementDragged())&&!tdcOperationUI.isSidebarElementDragged()},getRecycleShown:function(){return tdcMain._recycleShown},resetRecycleShown:function(){tdcMain._recycleShown=!1}};tdcMain.init()})();var tdcSidebarPanel={};
(function(g){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:g,_hook:{_hooks:[],addAction:function(e,d){_.isUndefined(tdcSidebarPanel._hook._hooks[e])&&(tdcSidebarPanel._hook._hooks[e]=[]);tdcSidebarPanel._hook._hooks[e].push(d)},doAction:function(e,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[e]))for(var c=0;c<tdcSidebarPanel._hook._hooks[e].length;c++)tdcSidebarPanel._hook._hooks[e][c](d)},removeAction:function(e){_.isUndefined(tdcSidebarPanel._hook._hooks[e])||delete tdcSidebarPanel._hook._hooks[e]}},
init:function(){var e=jQuery("body");e.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(d){if("focusin"===d.type||"focus"===d.type)this.oldValue=this.value;else{var c=jQuery(this);d=c.val();var a=tdcIFrameData.getModel(c.data("model_id"));c=c.data("param_name");tdcSidebarController.onUpdate(a,c,this.oldValue,d);this.oldValue=d;"block_template_id"!==c&&0!==c.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});e.on("keyup focus paste cut change",".tdc-tab-no-design .tdc-property-textfield input",function(d){var c=setTimeout(function(a){clearTimeout(c);if("focusin"===d.type)a.oldValue=a.value;else{var b=jQuery(a).val(),e=tdcIFrameData.getModel(jQuery(a).data("model_id"));"cut"===d.type&&(b="");tdcSidebarController.onUpdate(e,
jQuery(a).data("param_name"),a.oldValue,_.escape(b));a.oldValue=b}},100,this,d)});e.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(d){var c=jQuery(this),a=this;if("range"===c.attr("type"))c.next('input[type="text"]').val(c.val());else if("text"===c.attr("type")){a=c.val().trim();var b=c.data("default_value");""!==a||_.isUndefined(b)||""===b||(a=b,c.val(a));c.prev('input[type="range"]').val(a);c=c.prev('input[type="range"]');a=c.get(0)}var e=setTimeout(function(a){clearTimeout(e);
if("focusin"===d.type)a.oldValue=a.value;else{var b=jQuery(a).val(),c=tdcIFrameData.getModel(jQuery(a).data("model_id"));"cut"===d.type&&(b="");tdcSidebarController.onUpdate(c,jQuery(a).data("param_name"),a.oldValue,_.escape(b));a.oldValue=b}},100,a,d)});e.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range_multiple input",function(d){var c=jQuery(this),a=this;if("range"===c.attr("type")){var b=c.closest(".tdc-property").find('input[type="radio"]:checked');c.closest(".tdc-property").find('input[type="text"]').val(c.val());
b.data("last_value",c.val())}else if("text"===c.attr("type")){a=c.closest(".tdc-property").find('input[type="range"]');b=c.closest(".tdc-property").find('input[type="radio"]:checked');var e=b.data("default_value"),f=c.val().trim();""!==f||_.isUndefined(e)||""===e||(f=e,c.val(f));a.val(f);b.data("last_value",f);a=a.get(0)}else if("radio"===c.attr("type")){a=c.closest(".tdc-property").find('input[type="range"]');f=c.closest(".tdc-property").find('input[type="text"]');b=c.closest(".tdc-property").find('input[type="radio"]:checked');
b=c.data("last_value");e=c.data("default_value");var h=c.data("unit");c=a.data("min_"+h);var g=a.data("max_"+h);h=a.data("step_"+h);a.get(0).min=c;a.get(0).max=g;a.get(0).step=h;""===b?(f.val(e),a.val(e)):(f.val(b),a.val(b));a=a.get(0)}var l=setTimeout(function(a){clearTimeout(l);var b="",c=jQuery(a).parent().find('input[type="radio"]:checked');c.length&&(b=jQuery(c[0]).data("unit_value"));"focusin"===d.type?a.oldValue=a.value+b:(b=a.value+b,c=tdcIFrameData.getModel(jQuery(a).data("model_id")),"cut"===
d.type&&(b=""),tdcSidebarController.onUpdate(c,jQuery(a).data("param_name"),a.oldValue,_.escape(b)),a.oldValue=b)},100,a,d)});e.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(d){if("focusin"===d.type)this.oldValue=this.value;else{d=jQuery(this);var c=d.val();d.is(":checked")||(c="");var a=tdcIFrameData.getModel(d.data("model_id"));tdcSidebarController.onUpdate(a,d.data("param_name"),this.oldValue,c);this.oldValue=c}});e.on("click",".tdc-tab-no-design .tdc-image-wrap",
tdcSidebarPanel.tdcImageWrapHandler);e.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);e.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);e.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);e.on("click",".tdc-icon-selector-content > span",function(d){d=jQuery("#tdc-icon-selector");d.length||(d=tdcSidebar.buildIconSelector());d.find(".selected").removeClass("selected");var c=jQuery(this),
a=c.data("font_class"),b=tdcIFrameData.getModel(d.data("model_id"));c.addClass("selected");var e=d.prev(".tdc-property-wrap");e.find(".tdc-icon-wrap").html(c.html());e.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(b,d.data("param_name"),"",a)});e.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var d=jQuery("#tdc-icon-selector");d.length||(d=tdcSidebar.buildIconSelector());var c=jQuery(this).val(),a=d.find(".tdc-icon-selector-filter");d.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var b=
jQuery(this),d=b.data("font_id");""===c||c===d?(b.show(),b.nextAll("span").each(function(){var b=jQuery(this),c=b.data("font_class"),d=a.val().trim();""!==d&&-1===c.indexOf(d)?b.hide():b.show()})):(b.hide(),b.nextAll("span").hide())})});e.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(d){d=jQuery("#tdc-gradient");d.length||(d=tdcSidebar.buildGradient());var c=jQuery(this),a=c.closest(".tdc-property-wrap");c=c.next("input").val();d.toggle();a.after(d);a.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",
c)});e.on("mousedown",function(d){var c=jQuery("#tdc-sidebar"),a=jQuery("#tdc-icon-selector"),b=jQuery("#tdc-gradient");a.length||(a=tdcSidebar.buildIconSelector());a.length&&!a.get(0).contains(d.target)&&(a.hide(),c.after(a));b.length||(b=tdcSidebar.buildGradient());b.length&&!b.get(0).contains(d.target)&&(b.hide(),c.after(b))});e.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(d){d=jQuery("#tdc-icon-selector");d.length||(d=tdcSidebar.buildIconSelector());var c=this.value.trim();
d.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=jQuery(this);-1===a.data("font_class").indexOf(c)?a.hide():a.show()})})});e.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(d){if("focusin"===d.type)this.oldValue=this.value;else{d=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),
this.oldValue,d);this.oldValue=d}});e.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(d){d=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),this.oldValue,d);this.oldValue=d});e.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(d){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);
var c=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=c.val(),b=tdcSidebar.getCurrentRow().data("model_id");b=tdcIFrameData.getModel(b);var d=b.get("childCollection");this.oldValue="11";_.isUndefined(d)||(d=tdcIFrameData.getChildCollectionWidths(d),_.isUndefined(d)||(this.oldValue=d));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===
a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(b,this.oldValue,a),b.getShortcodeRender(1,null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(b,this.oldValue,a),b.getShortcodeRender(1,null,!0));this.oldValue=a},300)});e.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(d){if("focusin"===d.type||"focus"===d.type)this.oldValue=this.value;else{d=jQuery(this);var c=d.val(),
a=tdcIFrameData.getModel(d.data("model_id"));tdcSidebarController.onUpdate(a,d.data("param_name"),this.oldValue,c);this.oldValue=c}});e.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(d){if("focusin"===d.type||"focus"===d.type)this.oldValue=this.value;else{d=jQuery(this).val();var c=tdcSidebar._$currentInnerRow.data("model_id");c=tdcIFrameData.getModel(c);tdcIFrameData.changeInnerRowModel(c,this.oldValue,d);c.getShortcodeRender(tdcIFrameData.getColumnNumber(c),null,
!0);this.oldValue=d}});e.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(d){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);var c=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=c.val(),b=tdcSidebar._$currentInnerRow.data("model_id");b=tdcIFrameData.getModel(b);var d=b.get("childCollection");this.oldValue="11";_.isUndefined(d)||(d=tdcIFrameData.getChildCollectionWidths(d),
_.isUndefined(d)||(this.oldValue=d));tdcIFrameData.changeInnerRowModel(b,this.oldValue,a);b.getShortcodeRender(tdcIFrameData.getColumnNumber(b),null,!0);this.oldValue=a},300)});e.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(d){if("focusin"===d.type||"focus"===d.type)this.oldValue=this.value;else{d=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),this.oldValue,d);this.oldValue=
d}});e.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(d){d.preventDefault();var c=jQuery(this);d=jQuery("#tdc-wpeditor");var a=d.children(".content"),b=c.data("mapped_parameter_name");c=c.data("model_id");var e=tdcIFrameData.getModel(c).get("parentModel").get("attrs"),f="tdc-three-column";if(_.has(e,"width"))switch(e.width){case "1/3":f="tdc-one-column";break;case "2/3":f="tdc-two-column"}a.addClass("tdc-dropped-wpeditor");a.html('<iframe id="tdc-iframe-wpeditor" class="'+f+'" src="'+
window.tdcAdminSettings.pluginUrl+'/includes/wpeditor.php" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+c+'" data-mapped_parameter_name="'+b+'"></iframe>');d.show();tdcWindowFrame.setWindowFrame(d)});e.on("click","#tdc-wpeditor .tdc-iframe-close-button",function(d){d.preventDefault();jQuery("#tdc-wpeditor").hide()});e.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);e.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);e.on("click",
".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);e.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler);e.on("click",".tdc-sidebar-shortcode-row",function(d){d=jQuery(d.currentTarget).data("model_id");d=tdcIFrameData.getModel(d);var c={error:g,getShortcode:""};_.isUndefined(d)||tdcIFrameData._checkModelData(d,c);_.isUndefined(c.getShortcode)||console.log(c.getShortcode)});e.on("click",".tdc-sidebar-save-shortcode",function(d){d=jQuery(d.currentTarget).data("model_id");
d=tdcIFrameData.getModel(d);var c=d.get("tag"),a={error:g,getShortcode:""};_.isUndefined(d)||tdcIFrameData._checkModelData(d,a);_.isUndefined(a.getShortcode)||tdConfirm.modal({caption:"Saving Shortcode",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},100);return'<label>Shortcode Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var b=jQuery("#TB_ajaxContent"),d=b.find(".info");
b=b.find("input").val().trim();if(""===b)d.html("Please enter a shortcode name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings[c]&&(window.tdcAdminSettings.tdcSavings[c]=[]);for(var f=!1,e=0;e<window.tdcAdminSettings.tdcSavings[c].length;e++)if(window.tdcAdminSettings.tdcSavings[c][e].name===b){f=!0;break}f?d.html('Shortcode name already exists for "'+
c+'" ! Choose another one'):(d.html("Saving..."),window.tdcAdminSettings.tdcSavings[c].push({name:b,shortcode:window.btoa(a.getShortcode)}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Shortcode has been saved!");setTimeout(function(){tb_remove()},500)}))}}})});e.on("click",".tdc-sidebar-current-styles-settings",function(d){d=jQuery(d.currentTarget).data("model_id");d=tdcIFrameData.getModel(d);var c={error:g,getShortcode:""};_.isUndefined(d)||tdcIFrameData._checkModelData(d,
c);var a=d.get("tag");d=d.get("attrs");d=_.clone(d);if(!_.isUndefined(d)){c="";var b={},e={};for(f in d)0===f.indexOf("tds_")&&(b[f]=d[f]);var f=window.tdcAdminSettings.mappedShortcodes[a].params;for(a=0;a<f.length;a++){var h=!1,u=f[a];if(0===u.param_name.indexOf("tds_")){for(var l in b)if(u.param_name===l){e[l]=b[l];h=!0;break}h||(e[u.param_name]="")}}for(l in b)switch(b=l.split("-"),b.length){case 2:if(!_.has(e,l)){f=b[0];b=!1;for(var m in e)if(f===e[m]&&1===m.split("-").length){b=!0;break}if(!b){var p;
for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],f)){var n=p;break}_.has(e,n)&&""===e[n]&&window.tdcAdminSettings.globalStyle[n]===f&&(b=!0)}b||delete d[l]}break;case 3:f=b[0];a=b[2];for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],f)){n=p;break}b=!1;for(m in e)if(f===e[m]&&m===n+"-"+a){b=!0;break}b||_.has(e,n+"-"+a)&&""===e[n+"-"+a]&&window.tdcAdminSettings.globalStyle[n]===f&&(b=!0);b||delete d[l]}for(p in d)c+=
'"'+p+'" => "'+d[p]+'",\n';console.log(c)}})},tdcIconWrapHandler:function(e){var d=jQuery(this),c=jQuery("#tdc-icon-selector");c.length||(c=tdcSidebar.buildIconSelector());var a=d.closest(".tdc-property-wrap");e=c.find(".tdc-icon-selector-filter");var b=c.find(".tdc-icon-selector-lib"),k=c.find(".tdc-icon-selector-content");b.val("");e.val("");k.children().each(function(){jQuery(this).show()});c.data("model_id",d.data("model_id"));c.data("param_name",d.data("param_name"));c.show();a.after(c);d=c.data("param_name");
c=tdcIFrameData.getModel(c.data("model_id")).get("attrs");var f="";_.has(c,d)&&(f=c[d].trim());e.focus();k.find("span").each(function(){var a=jQuery(this),c=a.data("font_class");if(f===c){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");b.val(a);b.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(e){var d=jQuery(e.currentTarget);e=d.closest(".tdc-property-wrap").find(".tdc-icon-wrap");d.addClass("tdc-hidden-button");
e.addClass("tdc-no-icon-selected");e.html("");d=e.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,e.data("param_name"),"","")},tdcImageWrapHandler:function(e){var d=jQuery(e.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");
window.send_to_editor=function(c){var a=jQuery("img",c).attr("src"),b="",e="",f="";"undefined"===typeof a?(a=jQuery(c).attr("src"),b=jQuery(c).attr("class"),e=jQuery(c).attr("height"),f=jQuery(c).attr("width")):(b=jQuery("img",c).attr("class"),e=jQuery("img",c).attr("height"),f=jQuery("img",c).attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
dataType:"json",data:{image_class:b,action:"tdc_ajax_get_image_id"}}).done(function(b,c,k){"success"===c&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),d.attr("style","background-image: url( '"+a+"') "),d.data("image_link",a),d.data("image_id",b.image_id),d.data("image_height",e),d.data("image_width",f),d.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,
window.tb_remove(),c="",k=d.data("model_id"),k=tdcIFrameData.getModel(k),d.hasClass("tdc-no-image-selected")||(c=b.image_id.toString()),b=k.get("attrs"),b.image_height=e,b.image_width=f,k.set("attrs",b),tdcSidebarController.onUpdate(k,d.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(e){var d=jQuery(e.currentTarget);e=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");d.addClass("tdc-hidden-button");e.addClass("tdc-no-image-selected");jQuery.removeData(e,
"image_link");e.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");d=e.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,e.data("param_name"),"","")},bindPanelToModel:function(e,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==e.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===d)){var c=window.tdcAdminSettings.mappedShortcodes[e.attributes.tag];tdcSidebarPanel._deletePanel();
jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=e;for(var a=[],b=0;b<c.params.length;b++){var k=tdcSidebarPanel._defaultGroupName;_.isEmpty(c.params[b].group)||(k=c.params[b].group);a.push(k)}a=_.uniq(a);var f=k="",h=tdcSidebar.getCurrentTabId(),g,l;k+='<div class="tdc-tabs">';var m=l=g="";for(b=0;b<a.length;b++){f=tdcSidebarPanel._fixGroupName(a[b]);var p=tdcUtil.makeSafeForCSS(f);0===b?(g='<a href="#" data-tab-id="td-tab-'+p+'" class="tdc-tab-active" title="'+f+' settings">'+
f+"</a>",l='<a href="#" data-tab-id="td-tab-'+p+'" title="'+f+' settings">'+f+"</a>"):_.isUndefined(h)||h!=="td-tab-"+p?m+='<a href="#" data-tab-id="td-tab-'+p+'" title="'+f+' settings">'+f+"</a>":(g=l,m+='<a href="#" data-tab-id="td-tab-'+p+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>")}k=k+(g+m)+'</div><div class="tdc-tab-content-wrap">';m=l=g="";for(b=0;b<a.length;b++)f=tdcSidebarPanel._fixGroupName(a[b]),p=tdcUtil.makeSafeForCSS(f),f="tdc-tab-no-design","css"===p&&(f="tdc-tab-design"),
0===b?(g='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+p+'">',l='<div class="tdc-tab-content '+f+'" id="td-tab-'+p+'">',p=e.get("tag"),p=window.tdcAdminSettings.mappedShortcodes[p].tdc_start_values,_.isUndefined(p)||e.has("presetValues")||(p=JSON.parse(window.atob(p)),_.isArray(p)&&1<p.length&&e.set("presetValues",p)),e.has("presetValues")&&(p=e.get("presetValues"),m+=tdcSidebarPanel._addPresetValuesSelector(p,e))):_.isUndefined(h)||h!=="td-tab-"+p?m+='<div class="tdc-tab-content '+
f+'" id="td-tab-'+p+'">':(g=l,m+='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+p+'">'),m+=tdcSidebarPanel._bindGroupAndGetHtml(a[b],c,e),p=' data-model_id="'+e.cid+'" ',"vc_row"===e.attributes.tag?(m+='<div class="tdc-sidebar-row-buttons">',m+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+p+' title="Delete the current selected Row">Delete Row</div>',m+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+p+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',
"dev"===window.tdcAdminSettings.deployMode&&(m+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+p+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>',m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE ROW</div>'),m+="</div>"):"vc_row_inner"===e.attributes.tag?(m+='<div class="tdc-sidebar-row-buttons">',m+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+p+' title="Delete the current selected Inner Row">Delete Inner Row</div>',
m+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+p+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE INNER ROW</div>',m+="</div>"):"vc_column"!==e.attributes.tag&&"vc_inner_column"!==e.attributes.tag&&(m+='<div class="tdc-sidebar-row-buttons">',"dev"===window.tdcAdminSettings.deployMode&&(m+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+
p+' title="Get the current styles\' settings">CONSOLE: style presets</div>'),m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE SHORTCODE</div>',m+="</div>"),m+="</div>";k=k+(g+m)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(k);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===
e.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),b=jQuery("body .tdc-row-stretch-dropdown select"),c=e.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");a.length?a.val(c):(a=jQuery("body .tdc-row-col-dropdown input[value='"+c+"']"),a.length&&a.attr("checked","checked"));a=e.get("attrs");if(_.has(a,"full_width"))var d=a.full_width;_.isUndefined(d)&&(d="");b.val(d)}}})();(function(){if("vc_row_inner"===e.get("tag")){var a=
jQuery("body .tdc-innerRow-col-dropdown select"),b=e.get("childCollection");if(!_.isUndefined(b)){b=tdcIFrameData.getChildCollectionWidths(b);_.isUndefined(b)&&(b="11");var c=e.get("parentModel").get("attrs"),d="";_.has(c,"width")&&(d=c.width.replace("/",""));if(a.length)switch(a.val(b),d){case "":case "11":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").removeClass("tdc-block-col");a.find("option[value=13_23]").removeClass("tdc-block-col");a.find("option[value=13_13_13]").removeClass("tdc-block-col");
break;case "13":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").addClass("tdc-block-col");a.find("option[value=13_23]").addClass("tdc-block-col");a.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":a.find("option[value=12_12]").removeClass("tdc-block-col"),a.find("option[value=23_13]").addClass("tdc-block-col"),a.find("option[value=13_23]").addClass("tdc-block-col"),a.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(a=jQuery('body .tdc-innerRow-col-dropdown input[value="'+
b+'"]'),a.length)switch(a.attr("checked","checked"),a.next("label").show(),d){case "":case "11":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");break;case "13":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").addClass("tdc-block-col");
a.parent().find("input[value=13_23] + label").addClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");break;case "23":a.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),a.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})()}},_bindGroupAndGetHtml:function(e,d,c){for(var a=
"",b=c.get("attrs"),k=0;k<d.params.length;k++){var f=d.params[k].param_name,h=d.params[k].group;e===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[k].group)&&(a+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],c)):d.params[k].group===e&&(a+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],c));if("block_template_id"===f&&_.has(b,"block_template_id")&&!_.isEmpty(b.block_template_id)){h=b.block_template_id;f=window.tdcAdminSettings.mappedBlockTemplates;for(var g=0;g<f[h].params.length;g++)e===
tdcSidebarPanel._defaultGroupName?_.isEmpty(f[h].params[g].group)&&(a+=tdcSidebarPanel._bindParamAndGetHtml(f[h].params[g],c)):f[h].params[g].group===e&&(a+=tdcSidebarPanel._bindParamAndGetHtml(f[h].params[g],c))}else if(0===f.indexOf("tds_")){var l=f.split("-");g=l[0];var m;2===l.length?m=l[1]:2<l.length&&new tdcNotice.notice('Param "'+f+'" must have up to at most one "-" separator ',!0,!1);f=b[f];_.isEmpty(f)&&(f=window.tdcAdminSettings.globalStyle[g]);l=window.tdcAdminSettings.settingsStyle[g];
for(g=0;g<l[f].params.length;g++)if(h==e||_.isUndefined(h)&&e===tdcSidebarPanel._defaultGroupName){var p=JSON.parse(JSON.stringify(l[f].params[g]));p.param_name=f+"-"+p.param_name;_.isUndefined(m)||(p.param_name+="-"+m);a+=tdcSidebarPanel._bindParamAndGetHtml(p,c)}}}return a},_bindParamAndGetHtml:function(e,d){switch(e.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(e,d);case "gradient":return tdcSidebarPanel.addGradient(e,d);case "dropdown":return tdcSidebarPanel.addDropDown(e,d);
case "checkbox":return tdcSidebarPanel.addCheckBox(e,d);case "range":return tdcSidebarPanel.addRange(e,d);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(e,d);case "icon":return tdcSidebarPanel.addIconSelector(e,d);case "attach_image":return tdcSidebarPanel.addUploadImage(e,d);case "textfield":return tdcSidebarPanel.addTextField(e,d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(e,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(e,d);case "css_editor":return"";
case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(e,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(e,d);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(e,d);case "tdc_hidden_field":return"";default:return e.param_name+" - "+e.type+"<br>"}},_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=g;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();
jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");tdcSidebar.hideWpeditor()},_getParameterClasses:function(e){var d="tdc-property-wrap tdc-property-"+e.type;d+=" tdc-property-"+e.param_name;_.isUndefined(e["class"])||(d+=" "+
e["class"]);return d},_getParameterCurrentValue:function(e,d){return _.isUndefined(d.get("attrs")[e.param_name])?"dropdown"===e.type||_.isEmpty(e.value)?"":e.value:d.get("attrs")[e.param_name]},_getParameterDomName:function(e){return"tdc-param-"+e.param_name},_getParamterDataAtts:function(e,d){var c="";if("undefined"===typeof d)return c;c+=' data-model_id="'+d.cid+'"';"undefined"!==typeof e&&(c+=' data-param_name="'+e.param_name+'"');return c},_fixGroupName:function(e){switch(e){case "Design options":return"Css";
case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return e},clearPanel:function(){tdcSidebarPanel._deletePanel()},_addPresetValuesSelector:function(e,d){var c='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div>'+('<ul class="tdc-preset-values-list" data-model_id="'+d.cid+'">');for(var a=1;a<e.length;a++)c+='<li data-values="'+window.btoa(JSON.stringify(e[a]))+
'">'+e[a].tdc_preset_name+"</li>";c+="</ul>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});jQuery(".tdc-preset-values-list > li").click(function(){var a=jQuery(this),c=a.parent(".tdc-preset-values-list");a=JSON.parse(window.atob(a.data("values")));var d=tdcIFrameData.getModel(c.data("model_id")),e=_.clone(d.get("attrs")),g={};_.isObject(a)&&(_.map(a,function(a,b){var c=!1;_.map(window.tdcAdminSettings.mappedShortcodes[d.get("tag")].params,
function(d,f){_.isUndefined(d.tdc_presets_empty)&&d.param_name===b?(c=!0,g[b]=a):_.isUndefined(d.tdc_presets_empty)||_.isUndefined(e[d.param_name])||(g[d.param_name]=e[d.param_name])});c||0!==b.indexOf("tds_")||(g[b]=a)}),d.set("attrs",g));tdcSidebarController.onUpdate(d);setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),
$currentElement:tdcSidebar.getCurrentElement()},!0)},500)})});return c},addColorpicker:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a="",b=_.uniqueId();a+='<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">';a+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";a=a+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(e,d)+' id="'+b+'" name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="text" value="'+
tdcSidebarPanel._getParameterCurrentValue(e,d)+'"/>');a+="</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#"+b).cs_wpColorPicker()});return a},addGradient:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');a+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div>'+
("<input "+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(e,d)+'"/>');a+="</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var a=jQuery(this),c=a.find("input");a=a.find(".tdc-gradient-wrap");if(!_.isUndefined(c.val())&&""!==c.val())try{var d=JSON.parse(window.atob(c.val()));
_.isUndefined(d.css)||a.attr("style",d.css)}catch(h){d=c.val(),_.isUndefined(d)||a.attr("style","background: "+d)}})});return a},addDropDown:function(e,d){var c=!1,a=!1;_.has(e,"tdc_dropdown_images")&&""!==e.tdc_dropdown_images&&(c=!0);_.has(e,"tdc_dropdown_texts")&&""!==e.tdc_dropdown_texts&&(a=!0);var b="",k="",f=Object.keys(e.value);if(_.has(e,"tdc_min_options")&&f.length<=parseInt(e.tdc_min_options))return b;for(var h=0;h<f.length;h++){var g=!1,l="",m=f[h],p=String(tdcSidebarPanel._getParameterCurrentValue(e,
d)),n=String(e.value[f[h]]);_.isObject(e.value[f[h]])&&(g=!0,n=_.values(e.value[f[h]])[0],m=_.keys(e.value[f[h]])[0]);if(c||a){0===h&&""===p&&(p=n);p===n&&(l=" checked ");p=_.uniqueId();var q=n;if("vc_row"===d.attributes.tag||"vc_row_inner"===d.attributes.tag)q="col_"+q;k+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(e,d)+' id="'+p+'" name="'+tdcSidebarPanel._getParameterDomName(e)+'" '+l+' value="'+n+'">';c?(l="",g&&(l="tdc-standard-value"),k+='<label class="tdc-property-input-radio-label '+
l+'" for="'+p+'" title="'+m+'"><div class="'+q+'"></div></label>'):k+='<label class="tdc-property-input-radio-label" for="'+p+'" title="'+m+'">'+n+"</label>"}else p===n&&(l=' selected="selected" '),k+="<option "+l+' value="'+n+'">'+m+"</option>"}f="";_.has(e,"description")&&""!==e.description&&(f=' title="'+e.description+'" ');b+='<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">';b+='<div class="tdc-property-title"><span'+f+">"+e.heading+"</span></div>";b+='<div class="tdc-property">';c||
a?b+=k:(b+="<select "+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'">',b=b+k+"</select>");return b+"</div></div>"},addCheckBox:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a="";""!==tdcSidebarPanel._getParameterCurrentValue(e,d)&&(a=" checked ");var b=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');b+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";b=
b+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="checkbox" value="yes" '+a+"/>");return b+"</div></div>"},addRange:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a="";_.has(e,"range_max")&&""!==e.range_max&&(a=e.range_max);var b="";_.has(e,"range_min")&&""!==e.range_min&&(b=e.range_min);var k="";_.has(e,"range_step")&&""!==e.range_step&&(k=e.range_step);
var f="";_.has(e,"value")&&""!==e.value&&(f=e.value);var h="";""!==tdcSidebarPanel._getParameterCurrentValue(e,d)&&(h=tdcSidebarPanel._getParameterCurrentValue(e,d));var g=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');g+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";g=g+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="range" data-value="'+h+'" data-min="'+b+'" data-max="'+
a+'" data-step="'+k+'"/>');g=g+('<input type="text" class="tdc_range_value" data-default_value="'+f+'"/>')+"</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery('input[type="range"]').each(function(a,b){var c=jQuery(b),d=c.data("min"),e=c.data("max"),f=c.data("step"),k=c.data("value");c.get(0).min=d;c.get(0).max=e;c.get(0).step=f;c.get(0).value=k;c.next('input[type="text"]').val(k)})});return g},addRangeMultiple:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&
(c=' title="'+e.description+'" ');var a="",b="",k="",f=[],h=e.tdc_values,g="",l="",m="",p="",n;for(n in h)h.hasOwnProperty(n)&&f.push(h[n].unit);if(""!==tdcSidebarPanel._getParameterCurrentValue(e,d)){a=tdcSidebarPanel._getParameterCurrentValue(e,d);for(var q=[],w=0;w<f.length&&!(q=a.split(f[w]),1<q.length);w++);q.length&&(m=q[0],p=f[w],g=' data-range_value="'+m+'" ',l=' data-range_unit="'+p+'" ')}for(n in h)h.hasOwnProperty(n)&&(a=_.uniqueId(),b+=" data-value_"+n+'="'+h[n].value+'" ',b+=" data-min_"+
n+'="'+h[n].range_min+'" ',b+=" data-max_"+n+'="'+h[n].range_max+'" ',b+=" data-step_"+n+'="'+h[n].range_step+'" ',f="",h[n].unit===p&&(f=m),k+='<input name="'+tdcSidebarPanel._getParameterDomName(e)+'_unit" data-unit="'+n+'" data-unit_value="'+h[n].unit+'" type="radio" id="'+a+'" data-default_value="'+h[n].value+'" data-last_value="'+f+'"/>',k+='<label for="'+a+'">'+h[n].unit+"</label>");h=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');h+='<div class="tdc-property-title"><span'+
c+">"+e.heading+"</span></div>";h=h+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="range" '+g+" "+l+" "+b+"/>");h=h+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+k+'</div><input type="text" class="tdc_range_value"/>';h+="</div>";h+="</div>";h+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery('input.tdc-multiple-range[type="range"]').each(function(a,
b){var c=jQuery(b),d=c.data("range_value"),e=c.data("range_unit"),f=c.parent().find('input[type="radio"]');if(f.length)if(e=f.filter('[data-unit_value="'+e+'"]'),e.length){f=jQuery(e[0]);e=f.data("unit");var k=c.data("min_"+e),h=c.data("max_"+e),g=c.data("step_"+e);f.prop("checked",!0);d<k?d=k:d>h&&(d=h);setTimeout(function(){c.get(0).min=k;c.get(0).max=h;c.get(0).step=g;c.get(0).value=d},100);c.parent().find('input[type="text"]').val(d)}else{f=jQuery(f[0]);e=f.data("unit");k=c.data("min_"+e);h=c.data("max_"+
e);g=c.data("step_"+e);var l=c.data("value_"+e);f.prop("checked",!0);setTimeout(function(){c.get(0).min=k;c.get(0).max=h;c.get(0).step=g;c.get(0).value=l},100);c.parent().find('input[type="text"]').val(l)}})});return h},addIconSelector:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');a+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";a=a+'<div class="tdc-property">'+
('<div class="tdc-icon-wrap tdc-no-icon-selected" '+tdcSidebarPanel._getParamterDataAtts(e,d)+">");a+='</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(a,c){var b=jQuery(c);if(e.param_name===b.data("param_name")){var k=tdcSidebarPanel._getParameterCurrentValue(e,d);""!==k&&(b.html('<i class="'+k+'"></i>'),b.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button"))}})});
return a},addUploadImage:function(e,d){var c="";_.has(e,"description")&&""!==e.description&&(c=' title="'+e.description+'" ');var a=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');a+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";a=a+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(e,d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");
a+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,c){var b=jQuery(c);if(!b.parent().parent(".tdc-bg-upload").length&&e.param_name===b.data("param_name")){var k=tdcSidebarPanel._getParameterCurrentValue(e,d);""!==k&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:k,action:"tdc_ajax_get_image_url"}}).done(function(a,c,d){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),b.data("image_link",a.image_url),b.data("image_id",k),b.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return a},addTextArea:function(){},
addTextField:function(e,d){var c="",a="";if(_.has(e,"description")&&""!==e.description){var b=jQuery("<div>"+e.description+"</div>");e.description===b.text()?c=' title="'+e.description+'" ':a='<div class="tdc-description">'+e.description+"</div>"}b="";_.has(e,"placeholder")&&""!==e.placeholder&&(b=' placeholder="'+e.placeholder+'" ');var k=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');k+='<div class="tdc-property-title"><span'+c+">"+e.heading+"</span></div>";k=k+'<div class="tdc-property">'+
("<input "+tdcSidebarPanel._getParamterDataAtts(e,d)+' name="'+tdcSidebarPanel._getParameterDomName(e)+'" type="text" '+b+' value="'+tdcSidebarPanel._getParameterCurrentValue(e,d)+'"/>');return k=k+a+"</div></div>"},addTextAreaHtml:function(e,d){_.has(e,"description");var c='<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+'" data-mapped_parameter_name="'+e.param_name+'">Edit Content</a>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){});return c},addTextAreaRawHtml:function(e,
d){var c=_.uniqueId("tdc_textarea_"),a="";_.has(e,"description")&&""!==e.description&&(a=' title="'+e.description+'" ');var b=""+('<div class="'+tdcSidebarPanel._getParameterClasses(e)+'">');b+='<div class="tdc-property-title"><span'+a+">"+e.heading+"</span></div>";b=b+'<div class="tdc-property">'+('<textarea id="'+c+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(e,d)+">"+tdcSidebarPanel._getParameterCurrentValue(e,d)+"</textarea>");b+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(e,d)}}).done(function(a,b,d){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+c).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,
b,c){});jQuery("body").on("keyup","#"+c,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(encodeURIComponent(a.val()));tdcSidebarController.onUpdate(b,a.data("param_name"),c,c)});return b},addSeparatorHorizontal:function(e,d){return""+('<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(e)+'"></div>')},addTextSeparatorHorizontal:function(e,d){return""+('<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(e)+
'"><span>'+e.heading+"</span></div>")}}})();var tdcSidebar;
(function(g,e,d){tdcSidebar={$_sidebar:d,$_editRow:d,$_editColumn:d,$_editInnerRow:d,$_editInnerColumn:d,_currentTabId:d,_currentModel:d,_$currentElement:d,_$currentRow:d,_$currentColumn:d,_$currentInnerRow:d,_$currentInnerColumn:d,$_currentElementHead:d,$_currentElementSiblings:d,$_inspector:d,$_sidebarInfo:d,$_sidebarClosePage:d,$_sidebarBullet:d,$_sidebarClose:d,$_sidebarOpen:d,$_sidebarMenu:d,$_sidebarSearch:d,$_liveIframeWrapper:d,$_iconSelector:d,$_gradient:d,$_gradientLoader:d,_iconSelectorOuterHTML:d,
_gradientOuterHTML:d,init:function(){tdcSidebar.$_sidebar=g("#tdc-sidebar");tdcSidebar.$_liveIframeWrapper=g("#tdc-live-iframe-wrapper");tdcSidebar.$_editRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-row");tdcSidebar.$_editRow.data("name","Row");tdcSidebar.$_editColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-column");tdcSidebar.$_editColumn.data("name","Column");tdcSidebar.$_editInnerRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-row");tdcSidebar.$_editInnerRow.data("name","Inner Row");
tdcSidebar.$_editInnerColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-column");tdcSidebar.$_editInnerColumn.data("name","Inner Column");tdcSidebar.$_currentElementHead=tdcSidebar.$_sidebar.find(".tdc-current-element-head:first");tdcSidebar.$_currentElementSiblings=tdcSidebar.$_sidebar.find(".tdc-current-element-siblings:first");tdcSidebar.$_inspector=tdcSidebar.$_sidebar.find(".tdc-inspector:first");tdcSidebar.$_sidebarInfo=tdcSidebar.$_sidebar.find(".tdc-sidebar-info:first");tdcSidebar.$_sidebarClosePage=
tdcSidebar.$_sidebar.find(".tdc-close-page:first");tdcSidebar.$_sidebarBullet=tdcSidebar.$_sidebar.find(".tdc-bullet:first");tdcSidebar.$_sidebarClose=tdcSidebar.$_sidebar.find(".tdc-sidebar-close:first");tdcSidebar.$_sidebarOpen=tdcSidebar.$_sidebar.siblings(".tdc-sidebar-open:first");tdcSidebar.$_sidebarMenu=tdcSidebar.$_sidebar.find(".tdc-main-menu:first");tdcSidebar.$_sidebarSearch=tdcSidebar.$_sidebar.find(".tdc-sidebar-modal-search:first > input");tdcSidebar.$_iconSelector=tdcSidebar.$_sidebar.find("#tdc-icon-selector");
tdcSidebar._iconSelectorOuterHTML=tdcSidebar.$_iconSelector.get(0).outerHTML;tdcSidebar.$_gradient=tdcSidebar.$_sidebar.find("#tdc-gradient");tdcSidebar._gradientOuterHTML=tdcSidebar.$_gradient.get(0).outerHTML;tdcSidebar.$_editRow.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow()})}).mouseenter(function(c){e.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());e.isUndefined(tdcSidebar._$currentRow)||
tdcMaskUI.setCurrentContainer(tdcSidebar._$currentRow)}).mouseleave(function(c){tdcMaskUI.hide()});tdcSidebar.$_editColumn.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn()})}).mouseenter(function(c){e.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());e.isUndefined(tdcSidebar._$currentColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentColumn)}).mouseleave(function(c){tdcMaskUI.hide()});
tdcSidebar.$_editInnerRow.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow()})}).mouseenter(function(c){e.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());e.isUndefined(tdcSidebar._$currentInnerRow)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerRow)}).mouseleave(function(c){tdcMaskUI.hide()});
tdcSidebar.$_editInnerColumn.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn()})}).mouseenter(function(c){e.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());e.isUndefined(tdcSidebar._$currentInnerColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerColumn)}).mouseleave(function(c){tdcMaskUI.hide()});
g(".tdc-sidebar-element").each(function(c,a){tdcSidebar._bindElement(g(a))});tdcSidebar.$_sidebarClosePage.click(function(c){tdcMain.getContentModified()?tdConfirm.showModal("Close tagDiv Composer",tdcSidebar,function(){window.onbeforeunload=null;window.location=window.tdcAdminSettings.editPostUrl;tb_remove()},d,"Unsaved content. Still want to close tagDiv Composer?"):tdConfirm.showModal("Close tagDiv Composer",tdcSidebar,function(){window.onbeforeunload=null;window.location=window.tdcAdminSettings.editPostUrl;
tb_remove()},d,"Are you sure you want to close tagDiv Composer?")});"1"===window.localStorage.getItem("tdc_live_iframe_wrapper_inline")&&(tdcMain.setSidebarInline(),tdcSidebar.$_sidebar.addClass("tdc-sidebar-inline"),tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-inline").removeClass("tdc-live-iframe-wrapper-full"));tdcSidebar.$_sidebarBullet.click(function(c){tdcSidebar.$_sidebar.toggleClass("tdc-sidebar-inline");tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");
tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")?(tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"),tdcMain.setSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",1)):(tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full"),tdcMain.resetSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",0))});tdcSidebar.$_sidebarClose.click(function(c){tdcSidebar.$_sidebar.addClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.addClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.setSidebarHidden()});tdcSidebar.$_sidebarOpen.click(function(c){tdcSidebar.$_sidebar.removeClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.removeClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.resetSidebarHidden()});tdcSidebar.$_sidebarMenu.click(function(c){g(this).toggleClass("tdc-window-open");
g(".tdc-sidebar-modal").each(function(a,b){var c=g(b),d=c.data("button_class");c.hasClass("tdc-sidebar-modal-menu")?c.toggleClass("tdc-modal-open"):(c.removeClass("tdc-modal-open"),"undefined"!==typeof d&&""!==d&&(c=g("."+d),c.length&&c.removeClass("tdc-window-open")))})});tdcSidebar.$_sidebarSearch.keyup(function(c){var a=g(this);g(".tdc-sidebar-element").each(function(b,c){var d=g(c);-1===d.find(".tdc-element-id").html().toLowerCase().indexOf(a.val().trim().toLowerCase())?d.hide():d.show()});g(".tdc-sidebar-separator").each(function(a,
c){var b=g(c);b.nextUntil(".tdc-sidebar-separator").is(":visible")?b.show():b.hide()})});g("body").css("overflow","hidden");tdcSidebar._sidebarModal();tdcSidebar._liveInspectorTabs();tdcSidebar.updateSavedShortcodes();tdcSidebarPanel.init()},hideWpeditor:function(){g("#tdc-wpeditor").hide()},_activeBreadcrumbItem:function(){var c=tdcSidebar.getCurrentModel(),a=c.get("tag"),b="<span>"+window.tdcPostSettings.shortcodes[c.get("tag")]+"</span>",d="",f;for(f in window.tdcAdminSettings.mappedShortcodes)if("undefined"!==
typeof window.tdcAdminSettings.mappedShortcodes[f].tdc_category&&("Blocks"===window.tdcAdminSettings.mappedShortcodes[f].tdc_category||"Big Grids"===window.tdcAdminSettings.mappedShortcodes[f].tdc_category)&&window.tdcAdminSettings.mappedShortcodes[f].tdc_category===window.tdcAdminSettings.mappedShortcodes[a].tdc_category){var h="";f===a&&(h="tdc-selected-option");d+='<li class="'+h+'" data-block_type="'+window.tdcAdminSettings.mappedShortcodes[f].base+'"><div class="tdc-element-ico tdc-ico-'+window.tdcAdminSettings.mappedShortcodes[f].base+
'"></div><div class="tdc-element-id">'+window.tdcAdminSettings.mappedShortcodes[f].name+"</div></li>"}""!==d?(d="<ul>"+d+"</ul>",tdcSidebar.$_currentElementHead.addClass("tdc-block-selection")):tdcSidebar.$_currentElementHead.removeClass("tdc-block-selection");switch(a){case "vc_row":tdcSidebar.$_editRow.hide();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();var u=tdcSidebar.$_editRow;break;case "vc_column":tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.hide();
tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();u=tdcSidebar.$_editColumn;break;case "vc_row_inner":tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();u=tdcSidebar.$_editInnerRow;break;case "vc_column_inner":tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.show();tdcSidebar.$_editInnerColumn.hide();u=tdcSidebar.$_editInnerColumn;break;default:tdcSidebar.$_editRow.show(),
tdcSidebar.$_editColumn.show(),u=tdcSidebar.getCurrentElement(),"vc_column_inner"===c.get("parentModel").get("tag")?(tdcSidebar.$_editInnerRow.show(),tdcSidebar.$_editInnerColumn.show()):(tdcSidebar.$_editInnerRow.hide(),tdcSidebar.$_editInnerColumn.hide())}tdcSidebar.$_currentElementHead.html(b);tdcSidebar.$_currentElementSiblings.html(d);tdcSidebar.$_sidebar.find(".tdc-responsiveness").addClass(a);tdcSidebar.$_currentElementHead.off().mouseenter(function(a){a.preventDefault();u.trigger(a)}).mouseleave(function(a){a.preventDefault();
u.trigger(a)}).click(function(a){""!==d&&(tdcSidebar.$_currentElementSiblings.toggleClass("tdc-current-element-siblings-visible"),a=g(this),tdcSidebar.$_currentElementSiblings.hasClass("tdc-current-element-siblings-visible")?a.addClass("tdc-current-element-siblings-button-on"):a.removeClass("tdc-current-element-siblings-button-on"))});tdcSidebar.$_currentElementSiblings.find("li").off().click(function(a){a=g(this);var b=a.data("block_type"),d=a.children(".tdc-element-id").html();a.siblings(".tdc-selected-option").removeClass("tdc-selected-option");
a.addClass("tdc-selected-option");tdcSidebar.$_currentElementHead.html("<span>"+d+"</span>");e.isUndefined(b)||(c.set("tag",b),tdcSidebarController.onUpdate(c));tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_currentElementSiblings.mouseleave(function(a){tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_inspector.show()},closeModals:function(){g(".tdc-sidebar-modal").each(function(c,a){var b=
g(a),d=b.data("button_class");b.removeClass("tdc-modal-open");"undefined"!==typeof d&&""!==d&&(b=g("."+d),b.length&&b.removeClass("tdc-window-open"))})},_sidebarModal:function(){g(".tdc-add-element").click(function(){g(this).toggleClass("tdc-window-open");g(".tdc-sidebar-modal").each(function(c,a){var b=g(a),d=b.data("button_class");b.hasClass("tdc-sidebar-modal-elements")?(b.toggleClass("tdc-modal-open"),setTimeout(function(){var a=g(".tdc-sidebar-modal-search > input");a.focus();a.val("");g(".tdc-sidebar-element").each(function(a,
b){g(b).show()})},100)):(b.removeClass("tdc-modal-open"),"undefined"!==typeof d&&""!==d&&(b=g("."+d),b.length&&b.removeClass("tdc-window-open")))})})},_bindElement:function(c){c.click(function(a){a.preventDefault()}).mousedown(function(a){if(1===a.which){if("td_block_homepage_full_1"===c.data("shortcode-name")){var b=tdcIFrameData.getFirstModelByTag("td_block_homepage_full_1");if(!e.isUndefined(b)){new tdcNotice.notice("td_block_homepage_full_1 este deja in pagina",!1,!0);return}}a.preventDefault();
tdcOperationUI.activeDraggedElement(c);tdcOperationUI.showHelper(a)}}).mouseup(function(a){tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper())})},_liveInspectorTabs:function(){g("body").on("click",".tdc-tabs a",function(){var c=g(this);tdcSidebar._setCurrentTabId(c.data("tab-id"));c.hasClass("tdc-tab-active")||(g(".tdc-tabs a").removeClass("tdc-tab-active"),c.addClass("tdc-tab-active"),g(".tdc-tab-content-wrap .tdc-tab-content").removeClass("tdc-tab-content-visible"),
c=c.data("tab-id"),g("#"+c).addClass("tdc-tab-content-visible"))})},_setCurrentTabId:function(c){tdcSidebar._currentTabId=c},getCurrentTabId:function(){return tdcSidebar._currentTabId},_setCurrentElement:function(c){tdcSidebar._$currentElement=c},getCurrentElement:function(){return tdcSidebar._$currentElement},_setCurrentRow:function(c){tdcSidebar._$currentRow=c},getCurrentRow:function(){return tdcSidebar._$currentRow},_setCurrentColumn:function(c){tdcSidebar._$currentColumn=c},getCurrentColumn:function(){return tdcSidebar._$currentColumn},
_setCurrentInnerRow:function(c){tdcSidebar._$currentInnerRow=c},getCurrentInnerRow:function(){return tdcSidebar._$currentInnerRow},_setCurrentInnerColumn:function(c){tdcSidebar._$currentInnerColumn=c},getCurrentInnerColumn:function(){return tdcSidebar._$currentInnerColumn},setSidebarInfo:function(c){tdcSidebar.$_sidebarInfo.html(c)},getCurrentModel:function(){return tdcSidebar._currentModel},setSettings:function(c,a,b){if(e.isUndefined(tdcSidebar._currentModel)||e.isUndefined(b)||tdcSidebar._currentModel===
b)e.isUndefined(tdcSidebar._currentModel)||tdcSidebar._currentModel.set("current",!1),e.isUndefined(c)?(tdcSidebar._setCurrentRow(d),tdcSidebar._setCurrentColumn(d),tdcSidebar._setCurrentInnerRow(d),tdcSidebar._setCurrentInnerColumn(d),tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=d):e.has(c,"$currentRow")&&!e.isUndefined(c.$currentRow)?(tdcSidebar._setCurrentRow(c.$currentRow),e.has(c,"$currentColumn")&&!e.isUndefined(c.$currentColumn)?(tdcSidebar._setCurrentColumn(c.$currentColumn),
e.has(c,"$currentInnerRow")&&!e.isUndefined(c.$currentInnerRow)?(tdcSidebar._setCurrentInnerRow(c.$currentInnerRow),e.has(c,"$currentInnerColumn")&&!e.isUndefined(c.$currentInnerColumn)?(tdcSidebar._setCurrentInnerColumn(c.$currentInnerColumn),e.has(c,"$currentElement")&&!e.isUndefined(c.$currentElement)?(tdcSidebar._setCurrentElement(c.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentInnerColumn.data("model_id")))):
(tdcSidebar._setCurrentInnerColumn(d),tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentInnerRow.data("model_id")))):(tdcSidebar._setCurrentInnerRow(d),tdcSidebar._setCurrentInnerColumn(d),e.has(c,"$currentElement")&&!e.isUndefined(c.$currentElement)?(tdcSidebar._setCurrentElement(c.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentColumn.data("model_id"))))):
(tdcSidebar._setCurrentColumn(d),tdcSidebar._setCurrentInnerRow(d),tdcSidebar._setCurrentInnerColumn(d),tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=tdcIFrameData.getModel(c.$currentRow.data("model_id")))):(tdcSidebar._setCurrentRow(d),tdcSidebar._setCurrentColumn(d),tdcSidebar._setCurrentInnerRow(d),tdcSidebar._setCurrentInnerColumn(d),tdcSidebar._setCurrentElement(d),tdcSidebar._currentModel=d),e.isUndefined(tdcSidebar._currentModel)?tdcSidebarPanel.clearPanel():(tdcSidebar._currentModel.set("current",
!0),tdcSidebarPanel.bindPanelToModel(tdcSidebar._currentModel,a),tdcSidebar._activeBreadcrumbItem(),tdcSidebar.closeModals())},buildGradient:function(){tdcSidebar.$_gradient=g(tdcSidebar._gradientOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_gradient.find("#tdc-gradient-color-picker").tdGradient();return tdcSidebar.$_gradient},buildIconSelector:function(){tdcSidebar.$_iconSelector=g(tdcSidebar._iconSelectorOuterHTML).appendTo(tdcSidebar.$_sidebar);return tdcSidebar.$_iconSelector},updateSavedShortcodes:function(){var c=
g(".tdc-sidebar-saved-shortcodes");c.nextAll().remove();if("undefined"!==typeof window.tdcAdminSettings.tdcSavings&&""!==window.tdcAdminSettings.tdcSavings&&e.intersection(e.keys(window.tdcAdminSettings.tdcSavings),e.keys(window.tdcAdminSettings.mappedShortcodes)).length){c.show();var a;e.each(tdcAdminSettings.tdcSavings,function(b,c,d){if(b.length&&"gradients"!==c){var f="",k="",h=!1,g=!1;"vc_row"===c?(f="tdc-row-temp",k=' data-shortcode-name="vc_row" ',h=!0):(f="tdc-element",k=' data-shortcode-name="'+
c+'" ',g=!0);a+='<div class="tdc-sidebar-separator tdc-sidebar-text-separator"><span>'+window.tdcAdminSettings.mappedShortcodes[c].name+"</span></div>";e.each(b,function(b,d,e){e=d="";h&&(e=b.shortcode,e=window.atob(e),e=e.replace(/"/gi,'\\"'),e=e.replace(/\//gi,"\\/"),e=' data-template-content="'+window.btoa('"'+e+'"')+'" ');g&&(tdcIFrameData._getPostOriginalContentJSON(),d=tdcIFrameData._getContentJSON(4,window.atob(b.shortcode)),d=' data-start-values="'+window.btoa(JSON.stringify([d[0].shortcode.attrs.named]))+
'" ');a+='<div class="tdc-sidebar-element '+f+'" '+k+" "+e+" "+d+'><div class="tdc-element-ico tdc-ico-template"></div><div class="tdc-element-id">'+b.name+' - template</div><div class="tdc-element-delete" data-type="'+c+'" data-name="'+b.name+'"></div></div>'})}});var b=g(a);b.insertAfter(c);b.find(".tdc-element-delete").on("mousedown",function(a){a.preventDefault();a.stopImmediatePropagation()}).on("mouseup",function(a){if(1===a.which){var b=g(this);a=b.data("type");b=b.data("name");if("undefined"!==
typeof window.tdcAdminSettings.tdcSavings[a])for(var c=window.tdcAdminSettings.tdcSavings[a],d=0;d<c.length;d++)if(c[d].name===b.toString()){c.splice(d,1);c.length||delete window.tdcAdminSettings.tdcSavings[a];tdcUtil.updateTdcSavings();break}return!1}});c.nextAll(".tdc-sidebar-element").each(function(a,b){tdcSidebar._bindElement(g(b))})}else c.hide()}};tdcSidebar.init()})(jQuery,_);var tdcSidebarController={};
(function(g){tdcSidebarController={updateJobBuffer:{},updateJobTimer:"",_updateJob:function(){this.value=this.oldValue=this.paramName=this.model=""},_getParamMap:function(e,d,c){for(var a=window.tdcAdminSettings.mappedShortcodes[e],b=0;b<a.params.length;b++)if(a.params[b].param_name===d)return a.params[b];if(!_.isEmpty(c.block_template_id))for(c=window.tdcAdminSettings.mappedBlockTemplates[c.block_template_id],b=0;b<c.params.length;b++)if(c.params[b].param_name===d)return c.params[b];if(0===d.indexOf("tds_")){b=
d.split("-");var k=c=g;a=g;2>b.length?new tdcNotice.notice('Param "'+d+'" must have up at least one "-" separator',!0,!1):2===b.length?c=b[0]:3===b.length?(c=b[0],a=b[2]):3<b.length&&new tdcNotice.notice('Param "'+d+'" must have up to at most two "-" separator',!0,!1);if(_.isUndefined(k))for(var f in window.tdcAdminSettings.settingsStyle){if(!_.isUndefined(k))break;for(var h in window.tdcAdminSettings.settingsStyle[f])if(h===c){k=f;break}}_.isUndefined(c)&&(c=window.tdcAdminSettings.globalStyle[k]);
f=window.tdcAdminSettings.settingsStyle[k][c];for(b=0;b<f.params.length;b++)if(h=c+"-"+f.params[b].param_name,_.isUndefined(a)||(h+="-"+a),h===d)return e=JSON.parse(JSON.stringify(f.params[b])),e.param_name=c+"-"+e.param_name,_.isUndefined(a)||(e.param_name+="-"+a),e}new tdcNotice.notice("Map value not found for "+e+" "+d,!0,!1);return g},onUpdate:function(e,d,c,a){var b=new tdcSidebarController._updateJob;b.model=e;b.paramName=d;b.oldValue=c;b.value=a;tdcSidebarController._addToBuffer(b)},_addToBuffer:function(e){tdcSidebarController.updateJobBuffer[e.model.get("blockUid")]=
e;""!==tdcSidebarController.updateJobTimer&&clearTimeout(tdcSidebarController.updateJobTimer);tdcSidebarController.updateJobTimer=setTimeout(function(){1<tdcSidebarController.updateJobBuffer.length&&(console.log("Multiple jobs detected - see below"),console.log(tdcSidebarController.updateJobBuffer));for(var d in tdcSidebarController.updateJobBuffer)tdcSidebarController._doUpdateJob(tdcSidebarController.updateJobBuffer[d]);tdcSidebarController.updateJobBuffer={};tdcSidebarController.updateJobTimer=
""},500)},_doUpdateJob:function(e){if(!_.isUndefined(e.paramName)){var d=e.model.get("attrs"),c=_.clone(d);d=tdcSidebarController._getParamMap(e.model.attributes.tag,e.paramName,d);d.value===e.value?delete c[d.param_name]:c[d.param_name]=e.value;e.model.set("attrs",c)}c={error:g,getShortcode:""};tdcIFrameData._checkModelData(e.model,c);if(!_.isUndefined(c.getShortcode)){var a=e.model.get("blockUid"),b=new tdcJobManager.job;b.shortcode=c.getShortcode;b.columns=tdcIFrameData.getColumnNumber(e.model);
b.blockUid=a;parseInt(e.model.get("level"),10);e.model.set("bindNewContent",!0);b.success_callback=function(c){var d=tdcAdminIFrameUI.getIframeWindow();tdcIFrameData.deleteCallback(e.model);e.model.set("blockUid",c.blockUid);_.has(c,"replyHtml")&&(e.model.set("shortcode",b.shortcode),e.model.set("html",c.replyHtml));_.has(c,"replyJsForEval")&&(d.tdcEvalGlobal={oldBlockUid:a},tdcAdminIFrameUI.evalInIframe(c.replyJsForEval))};b.error_callback=function(a,b){tdcDebug.log(b);tdcDebug.log(a)};c=tdcSidebar.getCurrentElement();
_.isUndefined(c)&&(c=tdcSidebar.getCurrentInnerColumn(),_.isUndefined(c)&&(c=tdcSidebar.getCurrentInnerRow(),_.isUndefined(c)&&(c=tdcSidebar.getCurrentColumn(),_.isUndefined(c)&&(c=tdcSidebar.getCurrentRow()))));_.isUndefined(c)||c.addClass("tdc-changed");tdcJobManager.addJob(b)}}}})();var tdcCssEditor={};
(function(g,e,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentViewportSettings:{name:"all",settings:d},_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(c){var a=g(c.currentTarget),b=a.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(a);
g(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");g(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");g(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(c){var d=g("img",c).attr("src"),k="";"undefined"===typeof d?(d=g(c).attr("src"),k=g(c).attr("class")):k=g("img",c).attr("class");g.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:k,action:"tdc_ajax_get_image_id"}}).done(function(c,f,k){if("success"===f)if(e.isObject(c)&&e.has(c,"errors"))new tdcNotice.notice(c.errors,!0,!1);else{f=a.closest(".tdc-property-wrap");k=f.find(".tdc-css-image-remove");var h=f.find(".tdc-inherit-image");k.removeClass("tdc-hidden-button");"all"===tdcCssEditor._currentViewportSettings.name?h.hide():h.show();a.attr("style","background-image: url( '"+d+"') ");a.data("image_link",
d);a.data("image_id",c.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();f.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof a.data("model_id")?tdcCssEditor.saveWidgetForm(a):(c=tdcCssEditor._generateCssAttValue(b),f=tdcIFrameData.getModel(a.data("model_id")),tdcSidebarController.onUpdate(f,a.data("param_name"),"",c))}}).fail(function(a,b,c){})};return!1},tdcCssImageRemoveHandler:function(c){var a=g(c.currentTarget),b=a.closest(".tdc-property-wrap");
c=b.find(".tdc-css-image-wrap");var d=b.find(".tdc-inherit-image");a.addClass("tdc-hidden-button");"all"!==tdcCssEditor._currentViewportSettings.name&&d.show();b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);c.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcCssEditor._currentViewportSettings.name?c.data("image_link",""):c.data("image_link","no_value");d=c.data("model_id");e.isUndefined(d)?tdcCssEditor.saveWidgetForm(a):(a=
b.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),d=tdcIFrameData.getModel(d),tdcSidebarController.onUpdate(d,c.data("param_name"),"",a))},_updateColorField:function(c){var a=c.closest(".tdc-property-wrap"),b=a.data("tdc-for"),d=a.find(".tdc-inherit-color"),f=a.find(".wp-color-result"),h=c.data("no_value"),g=c.data("default_value");e.isUndefined(h)||1!==h?("all"!==tdcCssEditor._currentViewportSettings.name&&d.show(),tdcCssEditor._updateData(c),d={isInherited:!1},b=tdcCssEditor._getSettingsProperty(b,
"",d),d.isInherited?(c.attr("placeholder",b),c.val(""),a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),f.attr("style","background-color: "+tdcCssEditor._getRgba(b))):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(c))):(c.val("no_value"),tdcCssEditor._updateData(c),c.val(""),e.isUndefined(g)||f.attr("style","background-color: "+tdcCssEditor._getRgba(g)),tdcCssEditor._checkDefaultColor(c))},_clearColorPicker:function(c){c=g(c.currentTarget).closest(".tdc-property-wrap");
var a=c.closest(".tdc-tab-content"),b=c.find("input.wp-color-picker"),d=c.find(".tdc-inherit-color");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcCssEditor._currentViewportSettings.name&&(b.data("no_value",1),b.attr("placeholder",""),d.show());tdcCssEditor._checkDefaultColor(b);a.hasClass("tdc-tab-widget")&&(b.val(""),b.trigger("keyup"))},_showColorPicker:function(c){c=g(c.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===c.val()&&c.val("")},_changeColor:function(c){var a=
g(c.currentTarget).closest(".wp-picker-container").find("input.wp-color-picker");""!==a.val()&&a.data("no_value",0);"keyup"===c.type?setTimeout(function(){tdcCssEditor._updateColorField(a)},100):tdcCssEditor._updateColorField(a)},_inheritSelect:function(c){c=g(c.currentTarget);var a=c.closest(".tdc-property-wrap"),b=a.data("tdc-for");e.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][b])||delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][b];
var k={isInherited:!1};b=tdcCssEditor._getSettingsProperty(b,d,k);var f=a.find("select:first");k.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),c.show());e.isUndefined(b)?(f.val(f.find("option:first").val()),c.hide()):f.val(b);tdcCssEditor._updateData(f)},_inheritColor:function(c){c=g(c.currentTarget);var a=c.closest(".tdc-property-wrap"),b=a.find(".wp-color-picker"),k=a.find(".wp-color-result"),f=a.data("tdc-for");e.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f])||
delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f];b.data("no_value",0);var h={isInherited:!1};f=tdcCssEditor._getSettingsProperty(f,d,h);h.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),c.show());e.isUndefined(f)?(b.val(""),c.hide(),tdcCssEditor._updateData(b),tdcCssEditor._checkDefaultColor(b)):(b.val(""),b.attr("placeholder",f),k.attr("style","background-color: "+tdcCssEditor._getRgba(f)),
tdcCssEditor._updateData(b))},_inheritImage:function(c){var a=g(c.currentTarget);c=a.closest(".tdc-property-wrap");var b=c.find(".tdc-css-image-wrap"),k=c.find(".tdc-css-image-remove");c.find(".tdc-inherit-image").hide();k.addClass("tdc-hidden-button");b.data("image_link","");k=b.data("model_id");e.isUndefined(k)?tdcCssEditor.saveWidgetForm(a):(a=c.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),k=tdcIFrameData.getModel(k),tdcSidebarController.onUpdate(k,b.data("param_name"),"",
a));k={isInherited:!1};a=tdcCssEditor._getSettingsProperty("background-image",d,k);k.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.attr("style","background-image: url('"+a+"'")):b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(c){c=g(c.currentTarget);var a=c.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,c){tdcCssEditor._currentCssSettings=d;if("undefined"===
typeof c)g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(g("."+a.get(0).className));else{var b=tdcIFrameData.getModel(c);tdcSidebarController.onUpdate(b,a.data("param_name"),"","");g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[c,a],"Are you sure you want to clear all the CSS settings of the selected component?")},
_changeTextInput:function(c){var a=g(c.currentTarget),b=a.parent(),d=a;b.hasClass("tdc-box-margin")||b.hasClass("tdc-box-border")||b.hasClass("tdc-box-padding")||(d=a.closest(".tdc-property-wrap"));b=a.val();var f=1;a.hasClass("tdc-css-opacity")&&(f=.01);var h=NaN;switch(c.type){case "keyup":switch(c.keyCode){case 38:g.isNumeric(b)&&(h=parseFloat(b)+f);break;case 40:g.isNumeric(b)&&(h=parseFloat(b)-f)}break;case "mousewheel":g.isNumeric(b)&&(h=0<c.originalEvent.deltaY?parseFloat(b)-f:parseFloat(b)+
f)}e.isNaN(h)||(1>f&&(h=h.toFixed(2)),a.val(h));tdcCssEditor._updateData(a);b=d.data("tdc-for");c={isInherited:!1};b=tdcCssEditor._getSettingsProperty(b,"",c);c.isInherited?(a.attr("placeholder",b),a.val(""),d.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(c){if(38===c.keyCode||40===c.keyCode)return!1},_focusTextInput:function(c){c=g(c.currentTarget);for(var a=c.closest(".tdc-property-wrap"),b=a[0].classList,d=0;d<b.length;d++)0===
b[d].indexOf("tdc-el-")&&a.removeClass(b[d]);a.addClass("tdc-el-"+c.data("tdc-for"))},_changeDropDown:function(c){c=g(c.currentTarget);var a=c.closest(".tdc-property-wrap"),b=a.find(".tdc-inherit-select");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(c);var d=a.data("tdc-for"),f={isInherited:!1};tdcCssEditor._getSettingsProperty(d,"",f);f.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcCssEditor._currentViewportSettings.name?
b.hide():0===c[0].selectedIndex?e.isUndefined(tdcCssEditor._currentCssSettings.all)||e.isUndefined(tdcCssEditor._currentCssSettings.all[d])?b.hide():b.show():b.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var c=g("body");c.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);
c.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);c.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);c.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);c.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);c.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",
tdcCssEditor._changeTextInput);c.on("keydown",".tdc-tab-design input.tdc-css-width",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);c.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);c.on("change keyup",".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);c.on("keydown",
".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._changeTextInput);c.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);c.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);c.on("change",".tdc-tab-design .tdc-css-bg-position",
tdcCssEditor._changeDropDown);c.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);c.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);c.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);c.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);c.on("change",".tdc-tab-design .tdc-css-content-h-align",tdcCssEditor._changeDropDown);c.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);c.on("keyup mousewheel",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);c.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);c.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);
c.on("mousedown",".tdc-tab-design .wp-color-result",tdcCssEditor._showColorPicker);c.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);c.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);c.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);c.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);c.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);c.on("click",
".tdc-clear-css-properties",tdcCssEditor._clearCssProperties);c.on("click",".tdc-tab-design .tdc-responsive-buttons > div",function(a){a=g(this);a.addClass("selected");a.siblings().removeClass("selected");var b="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;var c=tdcAdminIFrameUI.getLiveIframe();if(!e.isUndefined(c))var f=c.contents().find(".tdc-element-selected").offset().top-c.contents().scrollTop();
e.isUndefined(tdcCssEditor.timeoutContentWidth)||clearTimeout(tdcCssEditor.timeoutContentWidth);var h="",u=0;a.hasClass("tdc-responsive-all")?(tdcCssEditor._currentViewportSettings={name:"all",settings:d},e.isUndefined(c)||c.css("width","100%")):a.hasClass("tdc-responsive-tablet-landscape")?(tdcCssEditor._currentViewportSettings={name:"landscape",settings:{limitTop:b[2].limitBottom,limitBottom:parseInt(b[1].limitBottom)+1}},e.isUndefined(c)||(h=1024)):a.hasClass("tdc-responsive-tablet-portrait")?
(tdcCssEditor._currentViewportSettings={name:"portrait",settings:{limitTop:b[1].limitBottom,limitBottom:parseInt(b[0].limitBottom)+1}},e.isUndefined(c)||(h=768)):a.hasClass("tdc-responsive-phone")&&(tdcCssEditor._currentViewportSettings={name:"phone",settings:{limitTop:b[0].limitBottom,limitBottom:d}},e.isUndefined(c)||(h=375));""!==h&&(c.css("width",h),tdcCssEditor.timeoutContentWidth=setTimeout(function(){var a=c.contents().width();a!==h&&a<h&&(u=h-a,c.css("width",h+u))},100));"dev"===window.tdcAdminSettings.deployMode&&
tdcCssEditor.setMediaInterval(h,u);g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender();e.isUndefined(c)||(a=c.contents().find(".tdc-element-selected"),a.length&&(a=a.offset().top,a=0<f?window.innerHeight>f?a-f:a-100:a-100,c.contents().scrollTop(a)))})},setMediaInterval:function(c,a){var b=g(".tdc-media-interval");b.length||(b=g('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+
a+'"></div>'),g("body").append(b),b.find("input").on("input",function(a){var c=g(this),d=tdcAdminIFrameUI.getLiveIframe(),k=c.data("scroll-bar-width");b.find("output").html(c.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){e.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);d.css("width",parseInt(c.val())+parseInt(k))},200)}));""===c?b.hide():(b.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){e.isUndefined(tdcCssEditor.timeoutIframeHtml)||
clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!e.isUndefined(tdcCssEditor._currentViewportSettings.settings)){var a=b.find("label"),d=b.find("input"),h=b.find("output");a.html(tdcCssEditor._currentViewportSettings.name);e.isUndefined(tdcCssEditor._currentViewportSettings.settings.limitBottom)?d.attr("min",200):d.attr("min",tdcCssEditor._currentViewportSettings.settings.limitBottom);d.attr("max",tdcCssEditor._currentViewportSettings.settings.limitTop);d.attr("value",c);h.html(c+"px")}},100))},_updateData:function(c){var a=
c.data("model_id"),b=c.data("param_name"),d=c.closest(".tdc-tab-content");"undefined"===typeof a?tdcCssEditor.saveWidgetForm(c):(c=tdcIFrameData.getModel(a),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(c,b,"",d))},saveWidgetForm:function(c){var a=c.closest("form");c=c.closest(".tdc-tab-content");if(a.length){var b=a.find('input[name="id_base"]').val(),d=a.find('input[name="widget-id"]').val().replace(b+"-","");b="'widget-"+b+"["+d+"][tdc_css]'";d=a.find("input[name="+b+"]");
var e=tdcCssEditor._generateCssAttValue(c);c.data("tdc_css",e);d.length?d.val(e):a.append('<input type="hidden" name='+b+' value="'+e+'">')}},addWidgetCssEditor:function(c,a){tdcCssEditor._mappedParameter=c;return tdcCssEditor._generateEditorContent(a)},addComposerCssEditor:function(c,a){tdcCssEditor._mappedParameter=c;tdcCssEditor._model=a;var b=a.get("attrs")[c.param_name];return tdcCssEditor._generateEditorContent(b)},_CsWpColorPicker:function(c){var a=c.closest(".tdc-property-wrap");c.cs_wpColorPicker();
a.find(".wp-color-result");a.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?(a=a.find(".wp-color-result"),""!==c.attr("placeholder")&&a.attr("style","background-color: "+tdcCssEditor._getRgba(c.attr("placeholder")))):("no_value"===c.val()&&c.val(""),tdcCssEditor._checkDefaultColor(c))},_checkDefaultColor:function(c){var a=c.closest(".tdc-property-wrap").find(".wp-color-result");""===c.val()&&(c=c.data("default_value"),e.isUndefined(c)?a.attr("style",""):a.attr("style","background-color: "+tdcCssEditor._getRgba(c)))},
_generateEditorContent:function(c){if(e.isEmpty(c))tdcCssEditor._currentCssSettings=d;else try{var a=JSON.parse(window.atob(c));tdcDebug.log(a);e.isObject(a)?tdcCssEditor._currentCssSettings=a:tdcCssEditor._currentCssSettings=d}catch(f){tdcCssEditor._currentCssSettings=d,new tdcNotice.notice(f.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){g(".tdc-css-image-wrap").each(function(a,b){var c=g(b),f=c.closest(".tdc-property-wrap"),h=f.find(".tdc-css-image-remove"),k=f.find(".tdc-inherit-image"),
n={isInherited:!1},q=tdcCssEditor._getSettingsProperty("background-image",d,n);n.isInherited?f.addClass(tdcCssEditor._INHERITED_CSS_CLASS):f.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);e.isUndefined(q)?(h.addClass("tdc-hidden-button"),k.hide()):("no_value"===q?h.addClass("tdc-hidden-button"):(h.removeClass("tdc-hidden-button"),c.attr("style",'background-image: url("'+q+'")')),"all"!==tdcCssEditor._currentViewportSettings.name&&k.show());c.data("image_link",q)});g(".tdc-inherit").each(function(a,
b){var c=g(b),f=c.closest(".tdc-property-wrap");if("all"===tdcCssEditor._currentViewportSettings.name||f.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))c.hide();else{var h=f.data("tdc-for");f={isInherited:!1};h=tdcCssEditor._getSettingsProperty(h,d,f);f.isInherited?c.hide():e.isUndefined(h)||c.show()}})});var b=a="",k="";c="";switch(tdcCssEditor._currentViewportSettings.name){case "all":a="selected";break;case "landscape":b="selected";break;case "portrait":k="selected";break;case "phone":c="selected"}a=
'<div class="tdc-responsive-buttons">'+('<div class="tdc-responsive-all '+a+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>')+('<div class="tdc-responsive-tablet-landscape '+b+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>')+('<div class="tdc-responsive-tablet-portrait '+k+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');a+='<div class="tdc-responsive-phone '+c+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';
a+="</div>";return a+=tdcCssEditor._generateEditorResponsiveContent()},_cleanCss:function(c,a){if("undefined"===typeof a)return d;if("no_value"===a)return a;if("background-image"===c){var b=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(a);return e.isEmpty(b)?"":b[2]}a=a.toLowerCase();a=a.replace(/!important|px/g,"");return a.trim()},_getDataNoValue:function(c){var a="";"no_value"===c&&(a=' data-no_value="1" ');return a},_generateEditorResponsiveContent:function(){function c(){return u={isInherited:!1}}
function a(a){return"all"!==tdcCssEditor._currentViewportSettings.name?'placeholder="'+a+'"':""}function b(){return u.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function k(a,d){var k=tdcCssEditor._getSettingsProperty(a,d,c()),g="-",l="";u.isInherited&&(g=k,k="");e.isUndefined(h)||"margin-left"!==a&&"margin-right"!==a||(l=h.get("tag"),l="vc_column"===l||"vc_column_inner"===l?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+a+'" name="" type="text" value="'+k+'" class="tdc-css-box-input tdc-css-box-input-'+
a+b()+l+'" title="Css '+a+'" placeholder="'+g+'" '+tdcSidebarPanel._getParamterDataAtts(f,h)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var f=tdcCssEditor._mappedParameter,h=tdcCssEditor._model,u={isInherited:!1};var l='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(f)+'">');l=l+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+k("margin-top","");l+=k("margin-right","");l+=k("margin-bottom","");l+=k("margin-left","");l=l+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+
k("border-top-width","");l+=k("border-right-width","");l+=k("border-bottom-width","");l+=k("border-left-width","");l=l+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+k("padding-top","");l+=k("padding-right","");l+=k("padding-bottom","");l+=k("padding-left","");l+="</div></div></div></div>";var m=tdcCssEditor._getSettingsProperty("border-style",d,c());l+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+b()+'" data-tdc-for="border-style">';l=l+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-border-style" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="">');l+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},
{value:"inherit",display:"Inherit"}],m);l+="</select></div></div>";var p=e.uniqueId();m=tdcCssEditor._getSettingsProperty("border-color","",c());var n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+b()+'" data-tdc-for="border-color">';l=l+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-border-color" '+
tdcSidebarPanel._getParamterDataAtts(f,h)+tdcCssEditor._getDataNoValue(m)+' data-default_value="#888888" id="'+p+'" name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+p))});m=tdcCssEditor._getSettingsProperty("border-radius","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+b()+'" data-tdc-for="border-radius">';l=l+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';m=tdcCssEditor._getSettingsProperty("width","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-width tdc-textfield-small'+b()+'" data-tdc-for="width">';l=l+'<div class="tdc-property-title"><span title="Css shadow-size">Width</span></div><div class="tdc-property">'+
('<input class="tdc-css-width" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';m=tdcCssEditor._getSettingsProperty("shadow-size","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+b()+'" data-tdc-for="shadow-size">';l=l+'<div class="tdc-property-title"><span title="Css shadow-size">Shadow size</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-size" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";var q=e.uniqueId();m=tdcCssEditor._getSettingsProperty("shadow-color","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+b()+'" data-tdc-for="shadow-color">';l=l+'<div class="tdc-property-title"><span title="Css shadow-color">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(f,h)+tdcCssEditor._getDataNoValue(m)+' data-default_value="#888888" id="'+q+'" name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+q))});m=tdcCssEditor._getSettingsProperty("shadow-offset-h","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+b()+'" data-tdc-for="shadow-offset-h">';
l=l+'<div class="tdc-property-title"><span title="Css shadow-offset-h">Shadow offset H</span></div><div class="tdc-property">'+('<input class="tdc-css-shadow-offset-h" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";m=tdcCssEditor._getSettingsProperty("shadow-offset-v","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+b()+'" data-tdc-for="shadow-offset-v">';l=l+'<div class="tdc-property-title"><span title="Css shadow-offset-v">Shadow offset V</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-offset-v" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';var w=e.uniqueId();m=tdcCssEditor._getSettingsProperty("background-color","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+b()+'" data-tdc-for="background-color">';
l=l+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(f,h)+tdcCssEditor._getDataNoValue(m)+' id="'+w+'" name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+w))});tdcCssEditor._getSettingsProperty("background-image",
d,c());l+='<div class="tdc-property-wrap tdc-property-attach_image'+b()+'">';l=l+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(f,h)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");
l+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';m=tdcCssEditor._getSettingsProperty("background-style",d,c());l+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+b()+'" data-tdc-for="background-style">';l=l+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-bg-style" '+
tdcSidebarPanel._getParamterDataAtts(f,h)+' name="">');l+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],m);l+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("background-position",d,c());l+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+b()+'" data-tdc-for="background-position">';l=l+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="">');l+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],m);l+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("opacity","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+b()+'" data-tdc-for="opacity">';l=l+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');
l+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';var z=e.uniqueId();m=tdcCssEditor._getSettingsProperty("color-1-overlay","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+b()+'" data-tdc-for="color-1-overlay">';l=l+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(f,h)+tdcCssEditor._getDataNoValue(m)+' id="'+z+'" name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+z))});var r=e.uniqueId();m=tdcCssEditor._getSettingsProperty("color-2-overlay","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+b()+'" data-tdc-for="color-2-overlay">';
l=l+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(f,h)+tdcCssEditor._getDataNoValue(m)+' id="'+r+'" name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+r))});
m=tdcCssEditor._getSettingsProperty("gradient-direction","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+b()+'" data-tdc-for="gradient-direction">';l=l+'<div class="tdc-property-title"><span title="Css gradient direction">Gradient direction</span></div><div class="tdc-property">'+('<input class="tdc-css-gradient-direction" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';
m=tdcCssEditor._getSettingsProperty("content-h-align",d,c());l+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+b()+'" data-tdc-for="content-h-align">';l=l+'<div class="tdc-property-title"><span title="Css content horizontal align">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-content-h-align" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="">');l+=tdcCssEditor._generateDropdownOptions([{value:"",
display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],m);l+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("z-index","",c());n="";u.isInherited&&(n=m,m="");l+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+b()+'" data-tdc-for="z-index">';l=l+'<div class="tdc-property-title"><span title="Z-index">Z-index</span></div><div class="tdc-property">'+('<input class="tdc-css-z-index" '+
tdcSidebarPanel._getParamterDataAtts(f,h)+' name="" type="text" '+a(n)+' value="'+m+'"/>');l+="</div></div>";m=tdcCssEditor._getSettingsPropertyFromCssSettings("display",d);l+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+b()+'" data-tdc-for="display">';l=l+'<div class="tdc-property-title"><span title="Css content horizontal align">Display</span></div><div class="tdc-property">'+('<select class="tdc-css-display" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' name="">');l+=tdcCssEditor._generateDropdownOptions([{value:"",
display:"Show"},{value:"none",display:"Hidden"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"}],m);l=l+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(f,h)+' title="Clear all tab css settings">Clear CSS settings</div>');return l+"</div>"},_getAvailableViewportSetting:function(c,
a,b){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(c){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[c]&&(d="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[c]?d=c:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][a])return tdcCssEditor._currentViewportSettings.name!==d&&(b.isInherited=!0,
tdcDebug.log(a)),tdcCssEditor._cleanCss(a,tdcCssEditor._currentCssSettings[d][a]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",a,b)}}},_getSettingsPropertyFromCssSettings:function(c,a){var b;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d=tdcCssEditor._currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[d]&&"undefined"!==typeof tdcCssEditor._currentCssSettings[d][c])return tdcCssEditor._currentViewportSettings.name!==d&&tdcDebug.log(c),
tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[d][c])}"undefined"===typeof b&&"undefined"!==typeof a&&(b=a);return b},_getSettingsProperty:function(c,a,b){var d;"undefined"===typeof b&&(b={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcCssEditor._currentViewportSettings.name,c,b));"undefined"===typeof d&&"undefined"!==typeof a&&(d=a);return d},_generateDropdownOptions:function(c,a,b){for(var d=[],f,h=!1,g=0,l=0;l<
c.length;l++)e.isUndefined(b)||b!==c[l].value||(g=l),f="",e.isUndefined(a)||a!==c[l].value||(f='selected="selected"',h=!0),d.push("<option "+f+' value="'+c[l].value+'">'+c[l].display+"</option>");h||(d[g]='<option selected="selected" value="'+c[g].value+'">'+c[g].display+"</option>");return d.join("")},_generateCssAttValue:function(c){var a={},b=c.find(".tdc-css-box-input-margin-top").val().trim(),d=c.find(".tdc-css-box-input-margin-right").val().trim(),f=c.find(".tdc-css-box-input-margin-bottom").val().trim(),
h=c.find(".tdc-css-box-input-margin-left").val().trim(),g=c.find(".tdc-css-box-input-border-top-width").val().trim(),l=c.find(".tdc-css-box-input-border-right-width").val().trim(),m=c.find(".tdc-css-box-input-border-bottom-width").val().trim(),p=c.find(".tdc-css-box-input-border-left-width").val().trim(),n=c.find(".tdc-css-box-input-padding-top").val().trim(),q=c.find(".tdc-css-box-input-padding-right").val().trim(),w=c.find(".tdc-css-box-input-padding-bottom").val().trim(),z=c.find(".tdc-css-box-input-padding-left").val().trim(),
r=c.find(".tdc-css-border-radius").val().trim(),t=c.find(".tdc-css-width").val().trim(),C=c.find(".tdc-css-shadow-size").val().trim(),v=c.find(".tdc-css-shadow-offset-h").val().trim(),y=c.find(".tdc-css-shadow-offset-v").val().trim(),x=c.find(".tdc-css-opacity").val().trim(),A=c.find(".tdc-css-gradient-direction").val().trim(),B=c.find(".tdc-css-z-index").val().trim();""!==b&&(a["margin-top"]=b);""!==d&&(a["margin-right"]=d);""!==f&&(a["margin-bottom"]=f);""!==h&&(a["margin-left"]=h);""!==g&&(a["border-top-width"]=
g);""!==l&&(a["border-right-width"]=l);""!==m&&(a["border-bottom-width"]=m);""!==p&&(a["border-left-width"]=p);""!==n&&(a["padding-top"]=n);""!==q&&(a["padding-right"]=q);""!==w&&(a["padding-bottom"]=w);""!==z&&(a["padding-left"]=z);b=c.find(".tdc-css-border-style");d=b.val().trim();""===d||b.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["border-style"]=d);b=c.find(".tdc-css-border-color");d=b.val().trim();""!==d?a["border-color"]=d:(b=b.data("no_value"),e.isUndefined(b)||
1!==b||(a["border-color"]="no_value"));""!==r&&(a["border-radius"]=r);""!==t&&(a.width=t);""!==C&&(a["shadow-size"]=C);r=c.find(".tdc-css-shadow-color");t=r.val().trim();""!==t?a["shadow-color"]=t:(r=r.data("no_value"),e.isUndefined(r)||1!==r||(a["shadow-color"]="no_value"));""!==v&&(a["shadow-offset-h"]=v);""!==y&&(a["shadow-offset-v"]=y);v=c.find(".tdc-css-bg-color");y=v.val().trim();""!==y?a["background-color"]=y:(v=v.data("no_value"),e.isUndefined(v)||1!==v||(a["background-color"]="no_value"));
v=c.find(".tdc-css-bg-image");v.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(v=v.data("image_link"),e.isUndefined(v)||("no_value"===v?a["background-image"]="no_value":""!==v&&(a["background-image"]='url("'+v+'")')));v=c.find(".tdc-css-bg-style");y=v.val().trim();""===y||v.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-style"]=y);v=c.find(".tdc-css-bg-position");y=v.val().trim();""===y||v.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||
(a["background-position"]=y);""!==x&&(a.opacity=x);x=c.find(".tdc-css-color-1-overlay");v=x.val().trim();""!==v?a["color-1-overlay"]=v:(x=x.data("no_value"),e.isUndefined(x)||1!==x||(a["color-1-overlay"]="no_value"));x=c.find(".tdc-css-color-2-overlay");v=x.val().trim();""!==v?a["color-2-overlay"]=v:(x=x.data("no_value"),e.isUndefined(x)||1!==x||(a["color-2-overlay"]="no_value"));""!==A&&(a["gradient-direction"]=A);""!==B&&(a["z-index"]=B);A=c.find(".tdc-css-content-h-align");B=A.val().trim();""===
B||A.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["content-h-align"]=B);c=c.find(".tdc-css-display");a.display=c.val().trim();e.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});e.isUndefined(a["border-style"])||"solid"!==a["border-style"]||("all"===tdcCssEditor._currentViewportSettings.name||e.isUndefined(tdcCssEditor._currentCssSettings.all)||e.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete a["border-style"];
e.isUndefined(a["background-style"])||"cover"!==a["background-style"]||("all"===tdcCssEditor._currentViewportSettings.name||e.isUndefined(tdcCssEditor._currentCssSettings.all)||e.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete a["background-style"];e.isUndefined(a["background-position"])||"center top"!==a["background-position"]||("all"===tdcCssEditor._currentViewportSettings.name||e.isUndefined(tdcCssEditor._currentCssSettings.all)||e.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&
delete a["background-position"];tdcDebug.log(a);e.isEmpty(a)?(delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name]=a,e.isUndefined(tdcCssEditor._currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+
"_max_width"]=tdcCssEditor._currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]=tdcCssEditor._currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return e.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(c){return-1!==
c.indexOf("rgb")?c:(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?"rgb("+parseInt(c[1],16)+", "+parseInt(c[2],16)+", "+parseInt(c[3],16)+")":""}}})(jQuery,_);
(function(g,e,d,c){g.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(g.support.iris){var a=this,b=a.element;g.extend(a.options,b.data());a.close=g.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');a.wrap=b.parent();a.toggler=g('<a tabindex="0" class="wp-color-result" />').insertBefore(b).css({backgroundColor:a.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",
wpColorPickerL10n.current);a.pickerContainer=g('<div class="wp-picker-holder" />').insertAfter(b);a.button=g('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):a.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear);b.wrap('<span class="wp-picker-input-wrap" />').after(a.button);b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,
change:function(b,c){a.toggler.css({backgroundColor:c.color.toString()});g.isFunction(a.options.change)&&a.options.change.call(this,b,c)}});b.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(a){a.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(b){var c=g(this).val();if(""===c||"#"===c)a.toggler.css("backgroundColor",
""),g.isFunction(a.options.clear)&&a.options.clear.call(this,b)});a.toggler.on("keyup",function(b){if(13===b.keyCode||32===b.keyCode)b.preventDefault(),a.toggler.trigger("click").next().focus()});a.button.click(function(b){var c=g(this);c.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),g.isFunction(a.options.clear)&&a.options.clear.call(this,b)):c.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");g("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide();this.element.iris("instance")&&this.element.iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");g("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===c)return this.element.iris("option",
"color");this.element.iris("option","color",a)},defaultColor:function(a){if(a===c)return this.options.defaultColor;this.options.defaultColor=a}});typeof Color.fn.toString!==c&&(Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var b=6-a.length-1;0<=b;b--)a="0"+a;return"#"+a});g.cs_ParseColorValue=function(a){a=a.replace(/\s+/g,"");var b=-1!==a.indexOf("rgba")?parseFloat(100*
a.replace(/^.*,(.+)\)/,"$1")):100;return{value:a,alpha:b,rgba:100>b?!0:!1}};g.fn.cs_wpColorPicker=function(){return this.each(function(){var a=g(this);if(!1!==a.data("rgba")){var b=g.cs_ParseColorValue(a.val());a.wpColorPicker({clear:function(){a.trigger("keyup")},change:function(b,c){var d=c.color.toString();a.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",d);a.val(d).trigger("change")},create:function(){var c=a.data("a8cIris"),d=a.closest(".wp-picker-container"),
e=g('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(d.find(".wp-picker-holder")),u=e.find(".cs-alpha-slider"),l=e.find(".cs-alpha-text"),m=e.find(".cs-alpha-slider-offset");u.slider({slide:function(b,d){var e=parseFloat(d.value/100);c._color._alpha=e;a.wpColorPicker("color",c._color.toString());l.text(1>e?e:"")},create:function(){var f=parseFloat(b.alpha/100);l.text(1>f?f:"");m.css("background-color",
b.value);d.on("click",".wp-picker-clear",function(){c._color._alpha=1;l.text("");u.slider("option","value",100).trigger("slide")});d.on("click",".wp-picker-default",function(){var b=g.cs_ParseColorValue(a.data("default-color")),d=parseFloat(b.alpha/100);c._color._alpha=d;l.text(1>d?d:"");u.slider("option","value",b.alpha).trigger("slide")});d.on("click",".wp-color-result",function(a){e.toggle()});g("body").on("click.wpcolorpicker",function(){e.hide()})},value:b.alpha,step:1,min:0,max:100})}})}else a.wpColorPicker({clear:function(){a.trigger("keyup")},
change:function(b,c){a.val(c.color.toString()).trigger("change")}})})};g(d).ready(function(){g(".cs-wp-color-picker").cs_wpColorPicker()});g.widget("wp.tdGradientColorPicker",g.wp.wpColorPicker,{open_gradient:function(a){this.element.show().iris("show").focus();this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.wrap.find(".tdc-gradient-result-percentage").html("");this.element.tdGradient().get(0).init(a)}});"undefined"===typeof g.fn.tdGradient&&
(g.fn.tdGradient=function(){return this.each(function(){var a=this,b=g(this);a.$this=b;if(!1!==b.data("rgba")){var d=g.cs_ParseColorValue(b.val());b.tdGradientColorPicker({clear:function(){b.trigger("keyup")},change:function(c,d){var e=d.color.toString();b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",e);b.val(e).trigger("change");a.triggerSelection?a.setColor(e,!0):a.setColor(e)},create:function(){var f=b.data("a8cIris"),h=b.closest(".wp-picker-container"),
k=g('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(h.find(".wp-picker-holder")),l=k.find(".cs-alpha-slider"),m=k.find(".cs-alpha-text"),p=k.find(".cs-alpha-slider-offset"),n=g('<div class="tdc-gradient-result-wrap"></div>').prependTo(h);n=g('<div class="tdc-gradient-result"><div class="tdc-gradient-color tdc-gradient-left-color"></div><div class="tdc-gradient-color tdc-gradient-right-color"></div></div>').prependTo(n);
g('<div class="tdc-gradient-degree-label">deg.</div><input class="tdc-gradient-degree" placeholder="0">').appendTo(h.find(".wp-picker-input-wrap"));g('<div class="tdc-gradient-result-labels"><div class="tdc-gradient-result-label">Solid color</div><div class="tdc-gradient-result-label tdc-gradient-result-percentage"></div><div class="tdc-gradient-result-label">Gradient</div></div>').prependTo(h);g('<div class="tdc-gradient-save">Save Gradient</div>').appendTo(h);var q=g('<div class="tdc-gradient-presets">Gradient presets</div>').appendTo(h),
w=g('<div class="tdc-gradient-values-wrapper"></div>').appendTo(h);w=g('<div class="tdc-gradient-values"></div>').appendTo(w);if("undefined"!==typeof e.tdcAdminSettings.tdcSavings.gradients&&e.tdcAdminSettings.tdcSavings.gradients.length)for(var z=!1,r=e.tdcAdminSettings.tdcSavings.gradients.length-1;0<=r;r--){var t=e.tdcAdminSettings.tdcSavings.gradients[r];try{var C=JSON.parse(e.atob(t));"undefined"!==typeof C.css&&(z=!0,g('<div class="tdc-gradient-value" style="'+C.css+'" data-gradient="'+t+'"><div class="tdc-gradient-value-delete"></div></div>').appendTo(w))}catch(v){}}z||
q.hide();a.$container=h;a.$gradientResult=n;l.slider({slide:function(a,c){var d=parseFloat(c.value/100);f._color._alpha=d;b.tdGradientColorPicker("color",f._color.toString());m.text(1>d?d:"")},create:function(){var e=parseFloat(d.alpha/100);m.text(1>e?e:"");p.css("background-color",d.value);h.on("click",".wp-picker-clear",function(){f._color._alpha=1;m.text("");l.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(c,!0):a.setColor(c)});h.on("click",".wp-picker-default",function(){var a=
g.cs_ParseColorValue(b.data("default-color")),c=parseFloat(a.alpha/100);f._color._alpha=c;m.text(1>c?c:"");l.slider("option","value",a.alpha).trigger("slide")});h.on("click",".wp-color-result",function(a){k.toggle()});g("body").on("click.wpcolorpicker",function(){k.hide()});h.on("change keyup",".tdc-gradient-degree",function(b){b=g(this);a.degree=b.val().trim();a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()})},value:d.alpha,step:1,min:0,max:100})}})}else b.tdGradientColorPicker({clear:function(){b.trigger("keyup")},
change:function(a,c){b.val(c.color.toString()).trigger("change")}});"undefined"===typeof a.setColor&&(a.setColor=function(b,c){"undefined"===typeof a.currentColor&&(a.currentColor="left",a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<span class="tdc-gradient-selected-color"></span>'),a.color1=b);switch(a.currentColor){case "left":a.color1=b;"undefined"!==typeof b||"undefined"===typeof a.color2||a.mixedColors.length||(a.color1=a.color2,
a.color2=b,a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a._showColor(a.color1));break;case "right":a.color2=b;"undefined"!==typeof b||"undefined"===typeof a.color1||a.mixedColors.length||(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1));
break;case "mixed":a._setMixedColor(b),"undefined"===typeof b&&"undefined"!==typeof a.color1&&(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1))}var d=a.$container.find(".tdc-gradient-degree");"undefined"===typeof a.degree?d.val(""):d.val(a.degree);a.mixedColors=a._getMixedColors();a._updateGradient();!0===c&&a._saveValue()},a._showColor=
function(b){a.triggerSelection=!1;a.$this.tdGradientColorPicker("color",b);a.triggerSelection=!0;b=g.cs_ParseColorValue(b);var c=parseFloat(b.alpha/100);c=1>c?c:"";a.$container.find(".cs-alpha-text").text(c);a.$container.find(".cs-alpha-slider-offset").css("background-color",b.value);a.$container.find(".cs-alpha-slider").slider("option","value",b.alpha).trigger("slide")},a.$container.on("mousedown",".tdc-gradient-color",function(b){b.stopImmediatePropagation();var c=g(this),d=a.$container.find(".tdc-gradient-result-percentage");
a.$gradientResult.find(".tdc-gradient-selected-color").remove();c.html('<div class="tdc-gradient-selected-color"></div>');c.hasClass("tdc-gradient-mix-color")?(c.addClass("tdc-gradient-current-mix"),a.eventOffsetX=b.offsetX,d.html(Math.round(100-c.data("percentage"))+"%")):d.html("");b=g(b.currentTarget);if(b.hasClass("tdc-gradient-left-color")){if(a.currentColor="left","undefined"!==typeof a.color1)var e=a.color1}else b.hasClass("tdc-gradient-right-color")?(a.currentColor="right","undefined"!==typeof a.color2&&
(e=a.color2)):(a.currentColor="mixed",b=a._getCurrentMixedColor(),"undefined"!==typeof b&&(e=b.color));"undefined"!==typeof e&&a._showColor(e)}),a.$container.on("mousedown",".tdc-gradient-result",function(b){if(b.target===b.currentTarget){var c=g(b.target);c.find(".tdc-gradient-selected-color").remove();var d=g('<div class="tdc-gradient-mix-color tdc-gradient-color"><div class="tdc-gradient-selected-color"></div></div>').appendTo(c);b=b.pageX-c.offset().left-d.outerWidth(!0)/2;c=Math.round(100-100*
b/(c.width()-d.outerWidth(!0)));d.css("left",b);d.data("percentage",c);a.currentColor="mixed"}}),a.$container.on("mouseup",".tdc-gradient-mix-color",function(b){g(this).removeClass("tdc-gradient-current-mix");a.eventOffsetX=c}),a.$container.on("mousemove",".tdc-gradient-result",function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),d=a.$container.find(".tdc-gradient-result"),e=d.find(".tdc-gradient-right-color"),f=d.find(".tdc-gradient-current-mix");if(f.length){var g=0;"undefined"!==
typeof a.eventOffsetX&&(g=a.eventOffsetX);b=b.pageX-d.offset().left-f.width()/2-g;g=100*b/(d.width()-f.outerWidth(!0));0>g?b=g=0:100<g&&(g=100,b=d.width()-e.outerWidth(!0));c.html(Math.round(g)+"%");f.css("left",b);f.data("percentage",Math.round(100-g));a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()}}),a._getCurrentMixedColor=function(){var b=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color"),c;b.length&&(c={color:b.parent().data("color"),
percentage:b.parent().data("percentage")});return c},a._setMixedColor=function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),d=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color");d.length&&("undefined"===typeof b?(d.parent().remove(),c.html("")):d.parent().data("color",b))},a._getMixedColors=function(){var b=[];a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color").each(function(){var a=g(this),c=a.data("color");
a=a.data("percentage");b.push({color:c,percentage:a})});b.sort(function(a,b){return a.percentage-b.percentage});return b},a._updateGradient=function(){if("undefined"!==typeof a.color1&&"undefined"!==typeof a.color2&&a.color1!==a.color2){var b="",d="",e=d="",k=["-webkit-linear-gradient","linear-gradient"];d="undefined"!==typeof a.degree&&""!==a.degree.trim()?a.degree+"deg,":"0deg,";for(var m=0;m<k.length;m++){var p="";if("undefined"!==typeof a.mixedColors)for(var n=0;n<a.mixedColors.length;n++){var q=
"";"undefined"!==typeof a.mixedColors[n].percentage&&(q=a.mixedColors[n].percentage+"%");"undefined"!==typeof a.mixedColors[n].color&&(p+=a.mixedColors[n].color+" "+q+",")}b+="background: "+k[m]+"("+d+a.color2+","+p+a.color1+");";e+="background: "+k[m]+"( -90deg,"+a.color2+","+p+a.color1+");"}d=d+a.color2+","+p+a.color1+"";a.result={type:"gradient",color1:a.color1,color2:a.color2,mixedColors:a.mixedColors,degree:a.degree,css:b,cssParams:d};a.$gradientResult.attr("style",e)}else if("undefined"!==typeof a.color1||
"undefined"!==typeof a.color2){b="color1";var w="color2";"undefined"!==typeof a.color2&&(b="color2",w="color1");if(a.mixedColors.length){var z=a.mixedColors[0];"undefined"!==typeof a.color2&&(z=a.mixedColors[a.mixedColors.length-1]);b=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color");g.each(b,function(){var b=g(this);z.color===b.data("color")&&z.percentage===b.data("percentage")&&(a[w]=b.data("color"),b.remove())});a.mixedColors=a._getMixedColors();a._updateGradient();a._showColor(a[w])}else a.result=
{type:"solid",color:a[b],css:"background: "+a[b]+";"},a.$gradientResult.css("background",a[b])}else a.result=c,a.$gradientResult.css("background","")},a.$container.on("mousedown",".tdc-gradient-save",function(b){var c=a.$container.find(".tdc-gradient-values");""===e.tdcAdminSettings.tdcSavings&&(e.tdcAdminSettings.tdcSavings={});"undefined"===typeof e.tdcAdminSettings.tdcSavings.gradients&&(e.tdcAdminSettings.tdcSavings.gradients=[]);if("gradient"===a.result.type){var d=e.btoa(JSON.stringify(a.result));
-1===e.tdcAdminSettings.tdcSavings.gradients.indexOf(d)&&(e.tdcAdminSettings.tdcSavings.gradients.push(d),tdcUtil.updateTdcSavings(this,function(){g('<div class="tdc-gradient-value" style="'+a.result.css+'" data-gradient="'+d+'"><div class="tdc-gradient-value-delete"></div></div>').prependTo(c);a.$container.find(".tdc-gradient-presets").show()}))}}),a.$container.on("mousedown",".tdc-gradient-value",function(b){b=jQuery(b.currentTarget).data("gradient");var c=a.$container.parent().prev(".tdc-property-gradient"),
d=c.find("input");c=c.find(".tdc-gradient-wrap");a.init(b);d.val(b);c.attr("style",a.result.css);d.trigger("change")}),a.$container.on("mousedown",".tdc-gradient-value-delete",function(b){b.preventDefault();b.stopImmediatePropagation();if("undefined"===typeof e.tdcAdminSettings.tdcSavings.gradients||0===e.tdcAdminSettings.tdcSavings.gradients.length)a.$container.find(".tdc-gradient-value").remove();else{var c=g(this).parent();b=c.data("gradient");b=e.tdcAdminSettings.tdcSavings.gradients.indexOf(b);
e.tdcAdminSettings.tdcSavings.gradients.splice(b,1);b=!0;for(var d in e.tdcAdminSettings.tdcSavings)if(e.tdcAdminSettings.tdcSavings[d].length){b=!1;break}b&&(e.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){""!==e.tdcAdminSettings.tdcSavings&&0!==e.tdcAdminSettings.tdcSavings.gradients.length||a.$container.find(".tdc-gradient-presets").hide();c.remove()})}}),a._saveValue=function(){var b=a.$container.parent().prev(".tdc-property-gradient"),c=b.find("input");b=b.find(".tdc-gradient-wrap");
if("undefined"===typeof a.result)c.val(""),b.removeAttr("style");else{switch(a.result.type){case "solid":c.val(a.result.color);break;case "gradient":c.val(e.btoa(JSON.stringify(a.result)))}b.attr("style",a.result.css)}c.trigger("change")},a.init=function(b){a.triggerSelection=!1;a.color1=c;a.color2=c;a.mixedColors=c;a.degree=c;a.currentColor=c;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option",
"value",100).trigger("slide");var d=a.$container.find(".tdc-gradient-result");d.find(".tdc-gradient-mix-color").remove();if("undefined"!==typeof b&&""!==b){try{b=JSON.parse(e.atob(b));a.color1=b.color1;a.color2=b.color2;a.degree=b.degree;a.setColor(a.color1);a.$this.tdGradientColorPicker("color",a.color1);a.mixedColors=b.mixedColors;if("undefined"!==typeof a.mixedColors)for(var f=0;f<a.mixedColors.length;f++){var k=g('<div class="tdc-gradient-color tdc-gradient-mix-color"></div>').appendTo(d),m=(d.width()-
k.outerWidth(!0))*(100-a.mixedColors[f].percentage)/100;k.css("left",m);k.data("percentage",a.mixedColors[f].percentage);"undefined"!==typeof a.mixedColors[f].color&&k.data("color",a.mixedColors[f].color)}a._updateGradient()}catch(p){a.setColor(b),a.$this.tdGradientColorPicker("color",b)}b=g.cs_ParseColorValue(a.color1);d=parseFloat(b.alpha/100);d=1>d?d:"";a.$container.find(".cs-alpha-text").text(d);a.$container.find(".cs-alpha-slider-offset").css("background-color",b.value);a.$container.find(".cs-alpha-slider").slider("option",
"value",b.alpha).trigger("slide")}else a.setColor(c),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})})})(jQuery,window,document);
(function(g){var e=function(){this.cssImportStatements=[];this.cssKeyframeStatements=[];this.cssRegex=RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi");this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})";this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)";this.cssImportStatementRegex=RegExp("@import .*?;",
"gi")};e.prototype.stripComments=function(d){return d.replace(new RegExp(this.cssCommentsRegex,"gi"),"")};e.prototype.parseCSS=function(d){if(void 0===d)return[];for(var c=[];;){var a=this.cssImportStatementRegex.exec(d);if(null!==a)this.cssImportStatements.push(a[0]),c.push({selector:"@imports",type:"imports",styles:a[0]});else break}d=d.replace(this.cssImportStatementRegex,"");a=new RegExp(this.cssKeyframeRegex,"gi");for(var b;;){b=a.exec(d);if(null===b)break;c.push({selector:"@keyframes",type:"keyframes",
styles:b[0]})}d=d.replace(a,"");for(a=new RegExp(this.combinedCSSRegex,"gi");;){b=a.exec(d);if(null===b)break;var e=void 0===b[2]?b[5].split("\r\n").join("\n").trim():b[2].split("\r\n").join("\n").trim();var f=new RegExp(this.cssCommentsRegex,"gi"),g=f.exec(e);null!==g&&(e=e.replace(f,"").trim());e=e.replace(/\n+/,"\n");-1!==e.indexOf("@media")?(e={selector:e,type:"media",subStyles:this.parseCSS(b[3]+"\n}")},null!==g&&(e.comments=g[0]),c.push(e)):(b=this.parseRules(b[6]),b={selector:e,rules:b},"@font-face"===
e&&(b.type="font-face"),null!==g&&(b.comments=g[0]),c.push(b))}return c};e.prototype.parseRules=function(d){d=d.split("\r\n").join("\n");var c=[];d=d.split(";");for(var a=0;a<d.length;a++){var b=d[a];b=b.trim();if(-1!==b.indexOf(":")){b=b.split(":");var e=b[0].trim();b=b.slice(1).join(":").trim();1>e.length||1>b.length||c.push({directive:e,value:b})}else"base64,"===b.trim().substr(0,7)?c[c.length-1].value+=b.trim():0<b.length&&c.push({directive:"",value:b,defective:!0})}return c};e.prototype.findCorrespondingRule=
function(d,c,a){void 0===a&&(a=!1);for(var b=!1,e=0;e<d.length&&(d[e].directive!==c||(b=d[e],a!==d[e].value));e++);return b};e.prototype.findBySelector=function(d,c,a){void 0===a&&(a=!1);for(var b=[],e=0;e<d.length;e++)!1===a?d[e].selector===c&&b.push(d[e]):-1!==d[e].selector.indexOf(c)&&b.push(d[e]);if(2>b.length)return b;d=b[0];for(e=1;e<b.length;e++)this.intelligentCSSPush([d],b[e]);return[d]};e.prototype.deleteBySelector=function(d,c){for(var a=[],b=0;b<d.length;b++)d[b].selector!==c&&a.push(d[b]);
return a};e.prototype.compressCSS=function(d){for(var c=[],a={},b=0;b<d.length;b++){var e=d[b];if(!0!==a[e.selector]){var f=this.findBySelector(d,e.selector);0!==f.length&&(c.push(f[0]),a[e.selector]=!0)}}return c};e.prototype.cssDiff=function(d,c){if(d.selector!==c.selector||"media"===d.type||"media"===c.type)return!1;for(var a={selector:d.selector,rules:[]},b,e,f=0;f<d.rules.length;f++)b=d.rules[f],e=this.findCorrespondingRule(c.rules,b.directive,b.value),!1===e?a.rules.push(b):b.value!==e.value&&
a.rules.push(b);for(f=0;f<c.rules.length;f++)e=c.rules[f],b=this.findCorrespondingRule(d.rules,e.directive),!1===b&&(e.type="DELETED",a.rules.push(e));return 0===a.rules.length?!1:a};e.prototype.intelligentMerge=function(d,c,a){void 0===a&&(a=!1);for(var b=0;b<c.length;b++)this.intelligentCSSPush(d,c[b],a);for(b=0;b<d.length;b++)c=d[b],"media"!==c.type&&"keyframes"!==c.type&&(c.rules=this.compactRules(c.rules))};e.prototype.intelligentCSSPush=function(d,c,a){var b=!1;void 0===a&&(a=!1);if(!1===a)for(a=
0;a<d.length;a++){if(d[a].selector===c.selector){b=d[a];break}}else for(a=d.length-1;-1<a;a--)if(d[a].selector===c.selector){b=d[a];break}if(!1===b)d.push(c);else if("media"!==c.type)for(d=0;d<c.rules.length;d++){a=c.rules[d];var e=this.findCorrespondingRule(b.rules,a.directive);!1===e?b.rules.push(a):"DELETED"===a.type?e.type="DELETED":e.value=a.value}else b.subStyles=b.subStyles.concat(c.subStyles)};e.prototype.compactRules=function(d){for(var c=[],a=0;a<d.length;a++)"DELETED"!==d[a].type&&c.push(d[a]);
return c};e.prototype.getCSSForEditor=function(d,c){void 0===c&&(c=0);var a="";void 0===d&&(d=this.css);for(var b=0;b<d.length;b++)"imports"===d[b].type&&(a+=d[b].styles+"\n\n");for(b=0;b<d.length;b++){var e=d[b];if(void 0!==e.selector){var f="";void 0!==e.comments&&(f=e.comments+"\n");"media"===e.type?(a+=f+e.selector+"{\n",a+=this.getCSSForEditor(e.subStyles,c+1),a+="}\n\n"):"keyframes"!==e.type&&"imports"!==e.type&&(a+=this.getSpaces(c)+f+e.selector+" {\n",a+=this.getCSSOfRules(e.rules,c+1),a+=
this.getSpaces(c)+"}\n\n")}}for(b=0;b<d.length;b++)"keyframes"===d[b].type&&(a+=d[b].styles+"\n\n");return a};e.prototype.getImports=function(d){for(var c=[],a=0;a<d.length;a++)"imports"===d[a].type&&c.push(d[a].styles);return c};e.prototype.getCSSOfRules=function(d,c){for(var a="",b=0;b<d.length;b++)void 0!==d[b]&&(a=void 0===d[b].defective?a+(this.getSpaces(c)+d[b].directive+": "+d[b].value+";\n"):a+(this.getSpaces(c)+d[b].value+";\n"));return a||"\n"};e.prototype.getSpaces=function(d){for(var c=
"",a=0;a<4*d;a++)c+=" ";return c};e.prototype.applyNamespacing=function(d,c){var a=d,b="."+this.cssPreviewNamespace;void 0!==c&&(b=c);"string"===typeof d&&(a=this.parseCSS(d));for(var e=0;e<a.length;e++){var f=a[e];if(!(-1<f.selector.indexOf("@font-face")||-1<f.selector.indexOf("keyframes")||-1<f.selector.indexOf("@import")||-1<f.selector.indexOf(".form-all")||-1<f.selector.indexOf("#stage")))if("media"!==f.type){for(var g=f.selector.split(","),u=[],l=0;l<g.length;l++)-1===g[l].indexOf(".supernova")?
u.push(b+" "+g[l]):u.push(g[l]);f.selector=u.join(",")}else f.subStyles=this.applyNamespacing(f.subStyles,c)}return a};e.prototype.clearNamespacing=function(d,c){void 0===c&&(c=!1);var a=d,b="."+this.cssPreviewNamespace;"string"===typeof d&&(a=this.parseCSS(d));for(var e=0;e<a.length;e++){var f=a[e];if("media"!==f.type){for(var g=f.selector.split(","),u=[],l=0;l<g.length;l++)u.push(g[l].split(b+" ").join(""));f.selector=u.join(",")}else f.subStyles=this.clearNamespacing(f.subStyles,!0)}return!1===
c?this.getCSSForEditor(a):a};e.prototype.createStyleElement=function(d,c,a){void 0===a&&(a=!1);!1===this.testMode&&"nonamespace"!==a&&(c=this.applyNamespacing(c));"string"!==typeof c&&(c=this.getCSSForEditor(c));!0===a&&(c=this.getCSSForEditor(this.parseCSS(c)));if(!1!==this.testMode)return this.testMode("create style #"+d,c);(a=document.getElementById(d))&&a.parentNode.removeChild(a);a=document.head||document.getElementsByTagName("head")[0];var b=document.createElement("style");b.id=d;b.type="text/css";
a.appendChild(b);b.styleSheet&&!b.sheet?b.styleSheet.cssText=c:b.appendChild(document.createTextNode(c))};g.cssjs=e})(this);var tdcLoader={init:function(){}};jQuery(window).load(function(){jQuery("body").addClass("tdcComposerLoaded")});var tdcLivePanel;
(function(g,e){tdcLivePanel={$tdcAction:e,$tdcContent:e,$tdcIframeCover:e,_iframeSrc:e,$panel:e,_currentSettingsPanel:e,_currentSettingsPanelInLoading:!1,init:function(){tdcLivePanel.$panel=jQuery("#tdc-live-panel");tdcLivePanel.$tdcAction=tdcLivePanel.$panel.find("#tdc_action");tdcLivePanel.$tdcContent=tdcLivePanel.$panel.find("#tdc_content");tdcLivePanel.$tdcCustomized=tdcLivePanel.$panel.find("#tdc_customized");tdcLivePanel.$tdcIframeCover=jQuery("#tdc-iframe-cover");tdcLivePanel.$panel.submit({},
function(d){var c=jQuery("#tdc-live-iframe-temp");c.load(function(){var a=jQuery(this);if("tdc-live-iframe-temp"!==a.attr("id"))tdcAdminIFrameUI.checkIframe(a);else{var b=jQuery("#tdc-live-iframe");tdcLivePanel.$tdcIframeCover.removeClass("tdc-iframe-cover-show");b.addClass("tdc-remove-iframe");setTimeout(function(){b.remove();c.attr("id","tdc-live-iframe");tdcAdminIFrameUI.checkIframe(c);tdcLivePanel.$panel.attr("action","")},400)}})});tdcLivePanel.$panel.on("change","#tdc_page_template",function(d){d.preventDefault();
d=jQuery(this);var c=d.data("control-id");jQuery("#hidden_"+c).val(d.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-page-template",function(d){d=jQuery(this);var c=d.data("control-id");jQuery("#hidden_"+c).val(d.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".td-visual-selector-o-img",function(d){d.preventDefault();d=jQuery(this);var c=d.data("uid");jQuery("#"+c).val(d.data("option-value"));tdcLivePanel.submit()});
tdcLivePanel.$panel.on("click",".tdc-panel-menu",function(d){var c=jQuery(this);d=c.data("menu_id");c=c.data("menu_name");tdcLivePanelMenuSettings.showSettings(d,c)});tdcLivePanel.$panel.on("click",".tdc-page-settings",function(d){tdcLivePanelPageSettings.showSettings()})},setCurrentSettingsPanel:function(d){if(!g.isUndefined(d)){if(!g.isUndefined(tdcLivePanel._currentSettingsPanel)){if(tdcLivePanel._currentSettingsPanel===d)return;var c=tdcLivePanel._currentSettingsPanel.hasClass("clear-position"),
a=c?tdcLivePanel._currentSettingsPanel.getPosition(!1):tdcLivePanel._currentSettingsPanel.getPosition(!0);tdcLivePanel._currentSettingsPanel.removeClass("clear-position");tdcLivePanel._currentSettingsPanel.closeSettings()}tdcLivePanel._currentSettingsPanel=d;!g.isUndefined(c)&&c&&(tdcLivePanel._currentSettingsPanel.addClass("clear-position"),tdcLivePanel._currentSettingsPanel.setPosition(a))}},getCurrentSettingsPanel:function(){return tdcLivePanel._currentSettingsPanel},submit:function(){var d=jQuery("#tdc-live-iframe");
g.isUndefined(tdcLivePanel._iframeSrc)&&(tdcLivePanel._iframeSrc=d.attr("src"));var c="uid_"+Math.floor(1E4*Math.random()+1)+"_"+Math.floor(100*Math.random()+1),a=jQuery('<iframe id="tdc-live-iframe-temp" name="'+c+'" scrolling="auto" src="about:blank" style="width: 100%; height: 100%" class="tdc-live-iframe-temp"></iframe>');a.insertAfter(d);a.load(function(){jQuery(a.get(0).contentWindow).scrollTop(jQuery(d.get(0).contentWindow).scrollTop())});tdcLivePanel.$panel.attr("target",c);tdcLivePanel.$panel.attr("action",
tdcLivePanel._iframeSrc);tdcLivePanel.$tdcIframeCover.show();tdcLivePanel.$tdcIframeCover.addClass("tdc-iframe-cover-show");c={error:e,getShortcode:""};tdcIFrameData.getShortcodeFromData(c);g.isUndefined(c.error)||tdcDebug.log(c.error);g.isUndefined(c.getShortcode)||(tdcLivePanel.$tdcContent.val(c.getShortcode),window.tdcPostSettings.postContent=c.getShortcode);tdcLivePanel.$tdcAction.val("preview");tdcLivePanel.$tdcCustomized.val(JSON.stringify(window.tdcAdminSettings.customized));tdcLivePanel.$panel.submit()}};
tdcLivePanel.init()})(_);function preinit(g){api.menuList=g.find("#menu-to-edit");api.targetList=api.menuList}var tdcLivePanelMenuSettings;
(function(g,e){tdcLivePanelMenuSettings={_isInitialized:!1,_menuId:e,_menuName:e,_url:e,_currentIframeId:e,$_currentIframeMenuSettings:e,$_tdcMenuSettings:e,$_iframeCloseButton:e,$_iframeApplyButton:e,$_iframeOkButton:e,init:function(){tdcLivePanelMenuSettings._isInitialized||(tdcLivePanelMenuSettings.$_tdcMenuSettings=jQuery("#tdc-menu-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(d,c){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelMenuSettings);tdcLivePanelMenuSettings._menuId=
d;tdcLivePanelMenuSettings._menuName=c;tdcLivePanelMenuSettings._url=window.tdcAdminSettings.adminUrl+"/nav-menus.php?action=edit&menu="+d+"&tdc-menu-settings=1";tdcLivePanelMenuSettings._currentIframeId="tdc-iframe-settings-menu-"+tdcLivePanelMenuSettings._menuId;tdcLivePanelMenuSettings.$_currentIframeMenuSettings=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+tdcLivePanelMenuSettings._currentIframeId);var a=tdcLivePanelMenuSettings._currentIframeId+"-data",b=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+
a);b.length||(b=jQuery('<div id="'+a+'" style="display: none"></div>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.append(b));tdcLivePanelMenuSettings.$_tdcMenuSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelMenuSettings.$_tdcMenuSettings);tdcLivePanelMenuSettings.$_currentIframeMenuSettings.length?(tdcLivePanelMenuSettings.$_currentIframeMenuSettings.show(),tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:d,menuName:c}),tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId)):
(tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass("tdc-dropped"),tdcLivePanelMenuSettings.$_currentIframeMenuSettings=jQuery('<iframe id="'+tdcLivePanelMenuSettings._currentIframeId+'" class="tdc-iframe-settings-menu" src="'+tdcLivePanelMenuSettings._url+'" data-menu_id="'+tdcLivePanelMenuSettings._menuId+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.children(".content").append(tdcLivePanelMenuSettings.$_currentIframeMenuSettings),
tdcLivePanelMenuSettings.$_currentIframeMenuSettings.load(function(){var a=tdcLivePanelMenuSettings.$_currentIframeMenuSettings.contents();tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass("tdc-dropped");tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:tdcLivePanelMenuSettings._menuId,menuName:tdcLivePanelMenuSettings._menuName});tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId);a.find("body").on("mousedown mouseup",function(a){window.parent.jQuery("#tdc-menu-settings").trigger(a)});
tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()}));tdcLivePanelMenuSettings.$_currentIframeMenuSettings.siblings(".tdc-iframe-settings-menu").each(function(a,b){var c=jQuery(b);c.is(":visible")&&(tdcLivePanelMenuSettings._synchronizeIframeMenuData(c.attr("id")),c.hide())});tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()},_closeSettings:function(){if(!g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)){var d=
jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")),c=jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")+"-data"),a=c.html(),b=d.contents().find("#update-nav-menu");""!==a&&(b.html(a),tdcLivePanelMenuSettings._reinitWpNavMenu(d[0].contentWindow||d[0].contentDocument),c.html(""));tdcLivePanelMenuSettings.$_tdcMenuSettings.hide();d.hide()}},closeSettings:function(){g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)||(tdcLivePanelMenuSettings.$_iframeCloseButton.trigger("click"),
tdcLivePanelMenuSettings.removeClass("clear-position"))},setPosition:function(d){tdcLivePanelMenuSettings.$_tdcMenuSettings.css({top:d.top,left:d.left})},getPosition:function(d){var c={};c.top=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().top-jQuery(window).scrollTop();c.left=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().left-jQuery(window).scrollLeft();d&&(c.top+=tdcLivePanelMenuSettings.$_tdcMenuSettings.height()/2,c.left+=tdcLivePanelMenuSettings.$_tdcMenuSettings.width()/2);return c},
addClass:function(d){tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass(d)},removeClass:function(d){tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass(d)},hasClass:function(d){return tdcLivePanelMenuSettings.$_tdcMenuSettings.hasClass(d)},_synchronizeIframeMenuData:function(d){var c=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+d+"-data"),a=c.html();d=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+d);var b=d.contents().find("#update-nav-menu");""===a?c.html(b.contents().clone()):(b.html(a),
tdcLivePanelMenuSettings._reinitWpNavMenu(d[0].contentWindow||d[0].contentDocument))},_reinitWpNavMenu:function(d){d.menus.oneThemeLocationNoMenus=!1;d.wpNavMenu.jQueryExtensions=function(){};d.wpNavMenu.attachMenuEditListeners=function(){};d.wpNavMenu.attachQuickSearchListeners=function(){};d.wpNavMenu.attachThemeLocationsListeners=function(){};d.wpNavMenu.attachMenuSaveSubmitListeners=function(){};d.wpNavMenu.attachTabsPanelListeners=function(){};d.wpNavMenu.attachUnsavedChangesListener=function(){};
d.wpNavMenu.initManageLocations=function(){};d.wpNavMenu.initAccessibility=function(){};d.wpNavMenu.initToggles=function(){};d.wpNavMenu.initPreviewing=function(){};d.wpNavMenu.init()},_setIframeInterface:function(d){function c(a,b){var c=jQuery("#"+a),d=c.contents(),e=jQuery("#"+a+"-data");d.find("#update-nav-menu").find("select[name*=td_mega_menu_cat]").each(function(a,b){var c=jQuery(b),d=c.find("option"),e=c.find("option:first");""===c.val()?(d.removeAttr("selected"),e.attr("selected","selected")):
d.each(function(a,b){var d=jQuery(b);c.val()===d.attr("value")?d.attr("selected","selected"):d.removeAttr("selected")})});d.find("#update-nav-menu").find("input").each(function(a,b){var c=jQuery(b);c.attr("value",c.val())});e.html(d.find("#update-nav-menu").contents().clone());!0===b&&(tdcLivePanelMenuSettings.$_tdcMenuSettings.hide(),c.hide())}function a(a){a=jQuery(a);var b=a.data("current_iframe");a=a.data("current_menu");b=jQuery("#"+b);var c=b.contents();(b[0].contentWindow||b[0].contentDocument).wpNavMenu.eventOnClickMenuSave();
b=c.find("#update-nav-menu").serializeArray();window.tdcAdminSettings.customized.menus["existing_menu_"+a]=JSON.stringify(b);tdcLivePanel.submit()}if(g.isUndefined(d))tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeCloseButton.hide(),tdcLivePanelMenuSettings.$_iframeApplyButton.hide(),tdcLivePanelMenuSettings.$_iframeOkButton.hide();else{var b=d.menuId;d=d.menuName;g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)&&(tdcLivePanelMenuSettings.$_iframeCloseButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-close-button"),tdcLivePanelMenuSettings.$_iframeCloseButton.click(function(a){tdcLivePanelMenuSettings._closeSettings()}));
g.isUndefined(tdcLivePanelMenuSettings.$_iframeApplyButton)&&(tdcLivePanelMenuSettings.$_iframeApplyButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-apply-button"),tdcLivePanelMenuSettings.$_iframeApplyButton.click(function(b){c(jQuery(this).data("current_iframe"),!1);a(this)}));g.isUndefined(tdcLivePanelMenuSettings.$_iframeOkButton)&&(tdcLivePanelMenuSettings.$_iframeOkButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-ok-button"),tdcLivePanelMenuSettings.$_iframeOkButton.click(function(b){c(jQuery(this).data("current_iframe"),
!0);a(this)}));tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".title").html("MENU: "+d);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe","tdc-iframe-settings-menu-"+b);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-menu-"+b);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-menu-"+b);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",b);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
b);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",b);tdcLivePanelMenuSettings.$_iframeCloseButton.show();tdcLivePanelMenuSettings.$_iframeApplyButton.show();tdcLivePanelMenuSettings.$_iframeOkButton.show()}},saveMenuSettings:function(){tdcLivePanelMenuSettings.$_tdcMenuSettings.find("iframe").each(function(d,c){var a=jQuery(c);tdcLivePanelMenuSettings._synchronizeIframeMenuData(a.attr("id"));(c.contentWindow||c.contentDocument).wpNavMenu.eventOnClickMenuSave();var b=a.data("menu_id");
a=a.contents().find("#update-nav-menu");var e=a.serializeArray(),f={};a.find("input[name=nav-menu-data]").val(JSON.stringify(e));a.find("input[type=hidden]").each(function(a,b){var c=jQuery(b);f[c.attr("name")]=c.val()});jQuery.ajax({url:"nav-menus.php?menu="+b,method:"POST",data:f})})}};tdcLivePanelMenuSettings.init()})(_);var tdcLivePanelPageSettings;
(function(g,e){tdcLivePanelPageSettings={_isInitialized:!1,_url:e,_currentIframeId:e,$_tdcPageSettings:e,$_currentIframePageSettings:e,$_iframeCloseButton:e,$_iframeApplyButton:e,$_iframeOkButton:e,init:function(){tdcLivePanelPageSettings._isInitialized||(tdcLivePanelPageSettings.$_tdcPageSettings=jQuery("#tdc-page-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelPageSettings);tdcLivePanelPageSettings._url=window.tdcAdminSettings.editPostUrl+
"&tdc-page-settings=1";tdcLivePanelPageSettings.$_currentIframePageSettings=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-settings-page");tdcLivePanelPageSettings.$_tdcPageSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelPageSettings.$_tdcPageSettings);tdcLivePanelPageSettings.$_currentIframePageSettings.length?(tdcLivePanelPageSettings.$_currentIframePageSettings.show(),tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"})):(tdcLivePanelPageSettings.$_tdcPageSettings.addClass("tdc-dropped"),
tdcLivePanelPageSettings.$_currentIframePageSettings=jQuery('<iframe class="tdc-iframe-settings-page" src="'+tdcLivePanelPageSettings._url+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelPageSettings.$_tdcPageSettings.children(".content").append(tdcLivePanelPageSettings.$_currentIframePageSettings),tdcLivePanelPageSettings.$_currentIframePageSettings.load(function(){var d=tdcLivePanelPageSettings.$_currentIframePageSettings.contents();tdcLivePanelPageSettings.$_tdcPageSettings.removeClass("tdc-dropped");
tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"});d.find("body").on("mousedown mouseup",function(c){window.parent.jQuery("#tdc-page-settings").trigger(c)});tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()}));tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()},_setIframeInterface:function(d){function c(a){var b=jQuery("iframe.tdc-iframe-settings-page");b.contents();
!0===a&&(tdcLivePanelPageSettings.$_tdcPageSettings.hide(),b.hide())}function a(a){a=jQuery("iframe.tdc-iframe-settings-page").contents().find("#post").serializeArray();for(var b={td_homepage_loop:{},td_page:{},page_template:""},c=0;c<a.length;c++){var d=a[c].name;"td_homepage_loop[td_sidebar_position]"===d||"td_homepage_loop[td_sidebar]"===d||"td_homepage_loop[td_layout]"===d||"td_homepage_loop[list_custom_title_show]"===d||"td_homepage_loop[list_custom_title]"===d||"td_homepage_loop[post_ids]"===
d||"td_homepage_loop[category_id]"===d||"td_homepage_loop[category_ids]"===d||"td_homepage_loop[tag_slug]"===d||"td_homepage_loop[autors_id]"===d||"td_homepage_loop[installed_post_types]"===d||"td_homepage_loop[sort]"===d||"td_homepage_loop[limit]"===d||"td_homepage_loop[offset]"===d||"td_homepage_loop[el_class]"===d||"td_homepage_loop[show_featured_posts]"===d||"td_homepage_loop[td_unique_articles]"===d||"td_homepage_loop[td_unique_articles]"===d?(d=d.replace(/td_homepage_loop\[|\]/gi,""),b.td_homepage_loop[d]=
a[c].value):"td_page[td_unique_articles]"===d?b.td_page[d.replace(/td_page\[|\]/gi,"")]=a[c].value:"page_template"===d&&(b.page_template=a[c].value)}window.tdcAdminSettings.customized.page_settings=JSON.stringify(b);tdcLivePanel.submit()}g.isUndefined(d)?(tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeCloseButton.hide(),
tdcLivePanelPageSettings.$_iframeApplyButton.hide(),tdcLivePanelPageSettings.$_iframeOkButton.hide()):(g.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)&&(tdcLivePanelPageSettings.$_iframeCloseButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-close-button"),tdcLivePanelPageSettings.$_iframeCloseButton.click(function(a){tdcLivePanelPageSettings._closeSettings()})),g.isUndefined(tdcLivePanelPageSettings.$_iframeApplyButton)&&(tdcLivePanelPageSettings.$_iframeApplyButton=
tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-apply-button"),tdcLivePanelPageSettings.$_iframeApplyButton.click(function(b){c(!1);a(this)})),g.isUndefined(tdcLivePanelPageSettings.$_iframeOkButton)&&(tdcLivePanelPageSettings.$_iframeOkButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-ok-button"),tdcLivePanelPageSettings.$_iframeOkButton.click(function(b){c(!0);a(this)})),tdcLivePanelPageSettings.$_tdcPageSettings.find(".title").html("Page settings"),tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",
"tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeCloseButton.show(),tdcLivePanelPageSettings.$_iframeApplyButton.show(),tdcLivePanelPageSettings.$_iframeOkButton.show())},_closeSettings:function(){tdcLivePanelPageSettings.$_tdcPageSettings.hide();tdcLivePanelPageSettings.removeClass("clear-position");
tdcLivePanelPageSettings.setPosition({top:"",left:""})},closeSettings:function(){g.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)||tdcLivePanelPageSettings.$_iframeCloseButton.trigger("click")},setPosition:function(d){tdcLivePanelPageSettings.$_tdcPageSettings.css({top:d.top,left:d.left})},getPosition:function(d){var c={};c.top=tdcLivePanelPageSettings.$_tdcPageSettings.offset().top-jQuery(window).scrollTop();c.left=tdcLivePanelPageSettings.$_tdcPageSettings.offset().left-jQuery(window).scrollLeft();
d&&(c.top+=tdcLivePanelPageSettings.$_tdcPageSettings.height()/2,c.left+=tdcLivePanelPageSettings.$_tdcPageSettings.width()/2);return c},addClass:function(d){tdcLivePanelPageSettings.$_tdcPageSettings.addClass(d)},removeClass:function(d){tdcLivePanelPageSettings.$_tdcPageSettings.removeClass(d)},hasClass:function(d){return tdcLivePanelPageSettings.$_tdcPageSettings.hasClass(d)}};tdcLivePanelPageSettings.init()})(_);
