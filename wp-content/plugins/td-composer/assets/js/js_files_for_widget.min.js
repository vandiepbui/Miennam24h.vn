var tdcAdminIFrameUI;
(function(g,a,d,b){tdcAdminIFrameUI={_liveIframeWindowObject:b,_$liveIframe:b,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(b){tdcAdminIFrameUI.getIframeWindow().eval(b)},initContent:function(b){b.find(".td-main-content-wrap .tdc-row").length||
(b.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(b){b=b.find(".td-main-content-wrap");b.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(b,c){g(c).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});
b.find(".tdc-column").each(function(b,c){var a=g(c);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});b.find(".tdc-inner-row").each(function(b,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,c){var a=g(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),
a.length&&a.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-element, .tdc-element-inner-row").each(function(b,c){var a=g(c);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});b.find(".tdc-column").each(function(b,c){var a=g(c).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))});b.find(".tdc-elements:empty").each(function(b,
c){var a="",f=g(c);f.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":f.closest(".tdc-column").length&&(a=" tdc-element-column");a=g('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);f.append(a)})};window.addRowWrappers=function(b){b.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');b.find(".tdc-column").each(function(b,c){var a=g(c);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');
a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});b.find(".tdc-inner-row").each(function(b,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,c){var a=g(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-element, .tdc-element-inner-row").each(function(b,
c){var a=g(c);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});b.find(".tdc-column").each(function(b,c){var a=g(c).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))});b.find(".tdc-elements:empty").each(function(b,c){var a="",f=g(c);f.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":f.closest(".tdc-column").length&&
(a=" tdc-element-column");a=g('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);f.append(a)})};window.addColumnWrappers=function(b){b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var c=b.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");b.find(".tdc-inner-row").each(function(b,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,
c){var a=g(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-element, .tdc-element-inner-row").each(function(b,c){var a=g(c);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});c=b.find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=b.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));b.find(".tdc-elements:empty").each(function(b,c){var a="",f=g(c);f.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":f.closest(".tdc-column").length&&(a=" tdc-element-column");a=g('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);f.append(a)})};window.addInnerRowWrappers=function(b){var c=b.find(".td_block_wrap");
window.checkTdBlockWrap(c);c.addClass("tdc-element");b.find(".tdc-inner-row").each(function(b,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(b,c){var a=g(c).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=g(c).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});b.find(".tdc-elements:empty").each(function(b,c){var a="",f=g(c);f.closest(".tdc-inner-column").length?
a=" tdc-element-inner-column":f.closest(".tdc-column").length&&(a=" tdc-element-column");a=g('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);f.append(a)})};window.addInnerColumnWrappers=function(b){var c=b.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");c=b.find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=b.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));b.find(".tdc-elements:empty").each(function(b,c){var a="",f=g(c);f.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":f.closest(".tdc-column").length&&(a=" tdc-element-column");a=g('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);f.append(a)})};window.checkTdBlockWrap=function(b){b.each(function(b,c){var a=
g(c);0===parseInt(a.height())&&a.addClass("tdc-block-empty")})};var b=window.tdcPostSettings.postMetaVcJsStatus,a=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==b||""===a||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",
function(){tb_remove()});var c=g(this).contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=g(this).get(0).contentWindow;var a=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(a);tdcAdminWrapperUI.$recycle=a;tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(c);tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.on("click","a",function(b){b.preventDefault();"undefined"!==this.href&&window.open(this.href,
"_blank")});c[0].addEventListener("mousedown",function(b){1!==b.which&&b.stopPropagation()},!0);c[0].addEventListener("mousemove",function(b){c.lastMouseEvent=b},!0)},checkIframe:function(c){if(d.isUndefined(c))c=window.tdcPostSettings.postUrl,c=0>c.indexOf("?")?c+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId):c+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId),c=g('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+c+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe),
g("#tdc-live-iframe-wrapper").append(c);else{var a=c,e=a.contents();tdcAdminIFrameUI.initContent(e);tdcAdminIFrameUI._liveIframeWindowObject=a.get(0).contentWindow;a=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');e.find("body").prepend(a);tdcAdminWrapperUI.$recycle=a;tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(e);tdcIFrameData.init(e,!0);tdcOperationUI.init(e,!0);e.find("a").each(function(b,c){c.setAttribute("target","_blank")});c.removeClass("tdc-live-iframe");
c.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=c}}})(jQuery,Backbone,_);var tdcCssEditor={};
(function(g,a,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentViewportSettings:{name:"all",settings:d},_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var c=g(b.currentTarget),f=c.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(c);
g(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");g(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");g(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){var d=g("img",b).attr("src"),e="";"undefined"===typeof d?(d=g(b).attr("src"),e=g(b).attr("class")):e=g("img",b).attr("class");g.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:e,action:"tdc_ajax_get_image_id"}}).done(function(b,e,h){if("success"===e)if(a.isObject(b)&&a.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{e=c.closest(".tdc-property-wrap");h=e.find(".tdc-css-image-remove");var k=e.find(".tdc-inherit-image");h.removeClass("tdc-hidden-button");"all"===tdcCssEditor._currentViewportSettings.name?k.hide():k.show();c.attr("style","background-image: url( '"+d+"') ");c.data("image_link",
d);c.data("image_id",b.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof c.data("model_id")?tdcCssEditor.saveWidgetForm(c):(b=tdcCssEditor._generateCssAttValue(f),e=tdcIFrameData.getModel(c.data("model_id")),tdcSidebarController.onUpdate(e,c.data("param_name"),"",b))}}).fail(function(b,c,a){})};return!1},tdcCssImageRemoveHandler:function(b){var c=g(b.currentTarget),f=c.closest(".tdc-property-wrap");
b=f.find(".tdc-css-image-wrap");var d=f.find(".tdc-inherit-image");c.addClass("tdc-hidden-button");"all"!==tdcCssEditor._currentViewportSettings.name&&d.show();f.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcCssEditor._currentViewportSettings.name?b.data("image_link",""):b.data("image_link","no_value");d=b.data("model_id");a.isUndefined(d)?tdcCssEditor.saveWidgetForm(c):(c=
f.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),d=tdcIFrameData.getModel(d),tdcSidebarController.onUpdate(d,b.data("param_name"),"",c))},_updateColorField:function(b){var c=b.closest(".tdc-property-wrap"),f=c.data("tdc-for"),d=c.find(".tdc-inherit-color"),h=c.find(".wp-color-result"),n=b.data("no_value"),g=b.data("default_value");a.isUndefined(n)||1!==n?("all"!==tdcCssEditor._currentViewportSettings.name&&d.show(),tdcCssEditor._updateData(b),d={isInherited:!1},f=tdcCssEditor._getSettingsProperty(f,
"",d),d.isInherited?(b.attr("placeholder",f),b.val(""),c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),h.attr("style","background-color: "+tdcCssEditor._getRgba(f))):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),a.isUndefined(g)||h.attr("style","background-color: "+tdcCssEditor._getRgba(g)),tdcCssEditor._checkDefaultColor(b))},_clearColorPicker:function(b){b=g(b.currentTarget).closest(".tdc-property-wrap");
var c=b.closest(".tdc-tab-content"),a=b.find("input.wp-color-picker"),d=b.find(".tdc-inherit-color");b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcCssEditor._currentViewportSettings.name&&(a.data("no_value",1),a.attr("placeholder",""),d.show());tdcCssEditor._checkDefaultColor(a);c.hasClass("tdc-tab-widget")&&(a.val(""),a.trigger("keyup"))},_showColorPicker:function(b){b=g(b.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===b.val()&&b.val("")},_changeColor:function(b){var c=
g(b.currentTarget).closest(".wp-picker-container").find("input.wp-color-picker");""!==c.val()&&c.data("no_value",0);"keyup"===b.type?setTimeout(function(){tdcCssEditor._updateColorField(c)},100):tdcCssEditor._updateColorField(c)},_inheritSelect:function(b){b=g(b.currentTarget);var c=b.closest(".tdc-property-wrap"),f=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f])||delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f];
var e={isInherited:!1};f=tdcCssEditor._getSettingsProperty(f,d,e);var h=c.find("select:first");e.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),b.show());a.isUndefined(f)?(h.val(h.find("option:first").val()),b.hide()):h.val(f);tdcCssEditor._updateData(h)},_inheritColor:function(b){b=g(b.currentTarget);var c=b.closest(".tdc-property-wrap"),f=c.find(".wp-color-picker"),e=c.find(".wp-color-result"),h=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h])||
delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h];f.data("no_value",0);var n={isInherited:!1};h=tdcCssEditor._getSettingsProperty(h,d,n);n.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),b.show());a.isUndefined(h)?(f.val(""),b.hide(),tdcCssEditor._updateData(f),tdcCssEditor._checkDefaultColor(f)):(f.val(""),f.attr("placeholder",h),e.attr("style","background-color: "+tdcCssEditor._getRgba(h)),
tdcCssEditor._updateData(f))},_inheritImage:function(b){var c=g(b.currentTarget);b=c.closest(".tdc-property-wrap");var f=b.find(".tdc-css-image-wrap"),e=b.find(".tdc-css-image-remove");b.find(".tdc-inherit-image").hide();e.addClass("tdc-hidden-button");f.data("image_link","");e=f.data("model_id");a.isUndefined(e)?tdcCssEditor.saveWidgetForm(c):(c=b.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,f.data("param_name"),"",
c));e={isInherited:!1};c=tdcCssEditor._getSettingsProperty("background-image",d,e);e.isInherited?(b.addClass(tdcCssEditor._INHERITED_CSS_CLASS),f.attr("style","background-image: url('"+c+"'")):f.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(b){b=g(b.currentTarget);var c=b.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(b,c){tdcCssEditor._currentCssSettings=d;if("undefined"===
typeof c)g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(g("."+b.get(0).className));else{var a=tdcIFrameData.getModel(c);tdcSidebarController.onUpdate(a,b.data("param_name"),"","");g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[b,c],"Are you sure you want to clear all the CSS settings of the selected component?")},
_changeTextInput:function(b){var c=g(b.currentTarget),f=c.parent(),d=c;f.hasClass("tdc-box-margin")||f.hasClass("tdc-box-border")||f.hasClass("tdc-box-padding")||(d=c.closest(".tdc-property-wrap"));f=c.val();var h=1;c.hasClass("tdc-css-opacity")&&(h=.01);var n=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:g.isNumeric(f)&&(n=parseFloat(f)+h);break;case 40:g.isNumeric(f)&&(n=parseFloat(f)-h)}break;case "mousewheel":g.isNumeric(f)&&(n=0<b.originalEvent.deltaY?parseFloat(f)-h:parseFloat(f)+
h)}a.isNaN(n)||(1>h&&(n=n.toFixed(2)),c.val(n));tdcCssEditor._updateData(c);f=d.data("tdc-for");b={isInherited:!1};f=tdcCssEditor._getSettingsProperty(f,"",b);b.isInherited?(c.attr("placeholder",f),c.val(""),d.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(b){if(38===b.keyCode||40===b.keyCode)return!1},_focusTextInput:function(b){b=g(b.currentTarget);for(var c=b.closest(".tdc-property-wrap"),a=c[0].classList,d=0;d<a.length;d++)0===
a[d].indexOf("tdc-el-")&&c.removeClass(a[d]);c.addClass("tdc-el-"+b.data("tdc-for"))},_changeDropDown:function(b){b=g(b.currentTarget);var c=b.closest(".tdc-property-wrap"),d=c.find(".tdc-inherit-select");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var e=c.data("tdc-for"),h={isInherited:!1};tdcCssEditor._getSettingsProperty(e,"",h);h.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcCssEditor._currentViewportSettings.name?
d.hide():0===b[0].selectedIndex?a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all[e])?d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var b=g("body");b.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);
b.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);b.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",
tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-width",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);b.on("keydown",
".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);b.on("change",".tdc-tab-design .tdc-css-bg-position",
tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-content-h-align",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);b.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);
b.on("mousedown",".tdc-tab-design .wp-color-result",tdcCssEditor._showColorPicker);b.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);b.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);b.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);b.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);b.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);b.on("click",
".tdc-clear-css-properties",tdcCssEditor._clearCssProperties);b.on("click",".tdc-tab-design .tdc-responsive-buttons > div",function(b){b=g(this);b.addClass("selected");b.siblings().removeClass("selected");var c="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;var e=tdcAdminIFrameUI.getLiveIframe();if(!a.isUndefined(e))var h=e.contents().find(".tdc-element-selected").offset().top-e.contents().scrollTop();
a.isUndefined(tdcCssEditor.timeoutContentWidth)||clearTimeout(tdcCssEditor.timeoutContentWidth);var n="",q=0;b.hasClass("tdc-responsive-all")?(tdcCssEditor._currentViewportSettings={name:"all",settings:d},a.isUndefined(e)||e.css("width","100%")):b.hasClass("tdc-responsive-tablet-landscape")?(tdcCssEditor._currentViewportSettings={name:"landscape",settings:{limitTop:c[2].limitBottom,limitBottom:parseInt(c[1].limitBottom)+1}},a.isUndefined(e)||(n=1024)):b.hasClass("tdc-responsive-tablet-portrait")?
(tdcCssEditor._currentViewportSettings={name:"portrait",settings:{limitTop:c[1].limitBottom,limitBottom:parseInt(c[0].limitBottom)+1}},a.isUndefined(e)||(n=768)):b.hasClass("tdc-responsive-phone")&&(tdcCssEditor._currentViewportSettings={name:"phone",settings:{limitTop:c[0].limitBottom,limitBottom:d}},a.isUndefined(e)||(n=375));""!==n&&(e.css("width",n),tdcCssEditor.timeoutContentWidth=setTimeout(function(){var b=e.contents().width();b!==n&&b<n&&(q=n-b,e.css("width",n+q))},100));"dev"===window.tdcAdminSettings.deployMode&&
tdcCssEditor.setMediaInterval(n,q);g(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender();a.isUndefined(e)||(b=e.contents().find(".tdc-element-selected"),b.length&&(b=b.offset().top,b=0<h?window.innerHeight>h?b-h:b-100:b-100,e.contents().scrollTop(b)))})},setMediaInterval:function(b,c){var d=g(".tdc-media-interval");d.length||(d=g('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+
c+'"></div>'),g("body").append(d),d.find("input").on("input",function(b){var c=g(this),f=tdcAdminIFrameUI.getLiveIframe(),e=c.data("scroll-bar-width");d.find("output").html(c.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){a.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);f.css("width",parseInt(c.val())+parseInt(e))},200)}));""===b?d.hide():(d.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){a.isUndefined(tdcCssEditor.timeoutIframeHtml)||
clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!a.isUndefined(tdcCssEditor._currentViewportSettings.settings)){var c=d.find("label"),f=d.find("input"),n=d.find("output");c.html(tdcCssEditor._currentViewportSettings.name);a.isUndefined(tdcCssEditor._currentViewportSettings.settings.limitBottom)?f.attr("min",200):f.attr("min",tdcCssEditor._currentViewportSettings.settings.limitBottom);f.attr("max",tdcCssEditor._currentViewportSettings.settings.limitTop);f.attr("value",b);n.html(b+"px")}},100))},_updateData:function(b){var c=
b.data("model_id"),a=b.data("param_name"),d=b.closest(".tdc-tab-content");"undefined"===typeof c?tdcCssEditor.saveWidgetForm(b):(b=tdcIFrameData.getModel(c),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(b,a,"",d))},saveWidgetForm:function(b){var c=b.closest("form");b=b.closest(".tdc-tab-content");if(c.length){var a=c.find('input[name="id_base"]').val(),d=c.find('input[name="widget-id"]').val().replace(a+"-","");a="'widget-"+a+"["+d+"][tdc_css]'";d=c.find("input[name="+a+"]");
var h=tdcCssEditor._generateCssAttValue(b);b.data("tdc_css",h);d.length?d.val(h):c.append('<input type="hidden" name='+a+' value="'+h+'">')}},addWidgetCssEditor:function(b,c){tdcCssEditor._mappedParameter=b;return tdcCssEditor._generateEditorContent(c)},addComposerCssEditor:function(b,c){tdcCssEditor._mappedParameter=b;tdcCssEditor._model=c;var a=c.get("attrs")[b.param_name];return tdcCssEditor._generateEditorContent(a)},_CsWpColorPicker:function(b){var c=b.closest(".tdc-property-wrap");b.cs_wpColorPicker();
c.find(".wp-color-result");c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?(c=c.find(".wp-color-result"),""!==b.attr("placeholder")&&c.attr("style","background-color: "+tdcCssEditor._getRgba(b.attr("placeholder")))):("no_value"===b.val()&&b.val(""),tdcCssEditor._checkDefaultColor(b))},_checkDefaultColor:function(b){var c=b.closest(".tdc-property-wrap").find(".wp-color-result");""===b.val()&&(b=b.data("default_value"),a.isUndefined(b)?c.attr("style",""):c.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},
_generateEditorContent:function(b){if(a.isEmpty(b))tdcCssEditor._currentCssSettings=d;else try{var c=JSON.parse(window.atob(b));tdcDebug.log(c);a.isObject(c)?tdcCssEditor._currentCssSettings=c:tdcCssEditor._currentCssSettings=d}catch(h){tdcCssEditor._currentCssSettings=d,new tdcNotice.notice(h.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){g(".tdc-css-image-wrap").each(function(b,c){var f=g(c),e=f.closest(".tdc-property-wrap"),h=e.find(".tdc-css-image-remove"),n=e.find(".tdc-inherit-image"),
m={isInherited:!1},t=tdcCssEditor._getSettingsProperty("background-image",d,m);m.isInherited?e.addClass(tdcCssEditor._INHERITED_CSS_CLASS):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);a.isUndefined(t)?(h.addClass("tdc-hidden-button"),n.hide()):("no_value"===t?h.addClass("tdc-hidden-button"):(h.removeClass("tdc-hidden-button"),f.attr("style",'background-image: url("'+t+'")')),"all"!==tdcCssEditor._currentViewportSettings.name&&n.show());f.data("image_link",t)});g(".tdc-inherit").each(function(b,
c){var f=g(c),e=f.closest(".tdc-property-wrap");if("all"===tdcCssEditor._currentViewportSettings.name||e.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))f.hide();else{var h=e.data("tdc-for");e={isInherited:!1};h=tdcCssEditor._getSettingsProperty(h,d,e);e.isInherited?f.hide():a.isUndefined(h)||f.show()}})});var f=c="",e="";b="";switch(tdcCssEditor._currentViewportSettings.name){case "all":c="selected";break;case "landscape":f="selected";break;case "portrait":e="selected";break;case "phone":b="selected"}c=
'<div class="tdc-responsive-buttons">'+('<div class="tdc-responsive-all '+c+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>')+('<div class="tdc-responsive-tablet-landscape '+f+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>')+('<div class="tdc-responsive-tablet-portrait '+e+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');c+='<div class="tdc-responsive-phone '+b+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';
c+="</div>";return c+=tdcCssEditor._generateEditorResponsiveContent()},_cleanCss:function(b,c){if("undefined"===typeof c)return d;if("no_value"===c)return c;if("background-image"===b){var f=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(c);return a.isEmpty(f)?"":f[2]}c=c.toLowerCase();c=c.replace(/!important|px/g,"");return c.trim()},_getDataNoValue:function(b){var c="";"no_value"===b&&(c=' data-no_value="1" ');return c},_generateEditorResponsiveContent:function(){function b(){return q={isInherited:!1}}
function c(b){return"all"!==tdcCssEditor._currentViewportSettings.name?'placeholder="'+b+'"':""}function f(){return q.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function e(c,d){var e=tdcCssEditor._getSettingsProperty(c,d,b()),k="-",m="";q.isInherited&&(k=e,e="");a.isUndefined(n)||"margin-left"!==c&&"margin-right"!==c||(m=n.get("tag"),m="vc_column"===m||"vc_column_inner"===m?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+c+'" name="" type="text" value="'+e+'" class="tdc-css-box-input tdc-css-box-input-'+
c+f()+m+'" title="Css '+c+'" placeholder="'+k+'" '+tdcSidebarPanel._getParamterDataAtts(h,n)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var h=tdcCssEditor._mappedParameter,n=tdcCssEditor._model,q={isInherited:!1};var k='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(h)+'">');k=k+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+e("margin-top","");k+=e("margin-right","");k+=e("margin-bottom","");k+=e("margin-left","");k=k+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+
e("border-top-width","");k+=e("border-right-width","");k+=e("border-bottom-width","");k+=e("border-left-width","");k=k+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+e("padding-top","");k+=e("padding-right","");k+=e("padding-bottom","");k+=e("padding-left","");k+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",d,b());k+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+f()+'" data-tdc-for="border-style">';k=k+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-border-style" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},
{value:"inherit",display:"Inherit"}],l);k+="</select></div></div>";var p=a.uniqueId();l=tdcCssEditor._getSettingsProperty("border-color","",b());var m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+f()+'" data-tdc-for="border-color">';k=k+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-border-color" '+
tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(l)+' data-default_value="#888888" id="'+p+'" name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+p))});l=tdcCssEditor._getSettingsProperty("border-radius","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+f()+'" data-tdc-for="border-radius">';k=k+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';l=tdcCssEditor._getSettingsProperty("width","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-width tdc-textfield-small'+f()+'" data-tdc-for="width">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size">Width</span></div><div class="tdc-property">'+
('<input class="tdc-css-width" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';l=tdcCssEditor._getSettingsProperty("shadow-size","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-size">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size">Shadow size</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-size" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";var t=a.uniqueId();l=tdcCssEditor._getSettingsProperty("shadow-color","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+f()+'" data-tdc-for="shadow-color">';k=k+'<div class="tdc-property-title"><span title="Css shadow-color">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(l)+' data-default_value="#888888" id="'+t+'" name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+t))});l=tdcCssEditor._getSettingsProperty("shadow-offset-h","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-offset-h">';
k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-h">Shadow offset H</span></div><div class="tdc-property">'+('<input class="tdc-css-shadow-offset-h" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("shadow-offset-v","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+f()+'" data-tdc-for="shadow-offset-v">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-v">Shadow offset V</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-offset-v" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';var x=a.uniqueId();l=tdcCssEditor._getSettingsProperty("background-color","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+f()+'" data-tdc-for="background-color">';
k=k+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(l)+' id="'+x+'" name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+x))});tdcCssEditor._getSettingsProperty("background-image",
d,b());k+='<div class="tdc-property-wrap tdc-property-attach_image'+f()+'">';k=k+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(h,n)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");
k+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",d,b());k+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+f()+'" data-tdc-for="background-style">';k=k+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-bg-style" '+
tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",d,b());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+f()+'" data-tdc-for="background-position">';k=k+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="opacity">';k=k+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');
k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';var z=a.uniqueId();l=tdcCssEditor._getSettingsProperty("color-1-overlay","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+f()+'" data-tdc-for="color-1-overlay">';k=k+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(l)+' id="'+z+'" name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+z))});var w=a.uniqueId();l=tdcCssEditor._getSettingsProperty("color-2-overlay","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+f()+'" data-tdc-for="color-2-overlay">';
k=k+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,n)+tdcCssEditor._getDataNoValue(l)+' id="'+w+'" name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(g("#"+w))});
l=tdcCssEditor._getSettingsProperty("gradient-direction","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="gradient-direction">';k=k+'<div class="tdc-property-title"><span title="Css gradient direction">Gradient direction</span></div><div class="tdc-property">'+('<input class="tdc-css-gradient-direction" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';
l=tdcCssEditor._getSettingsProperty("content-h-align",d,b());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+f()+'" data-tdc-for="content-h-align">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-content-h-align" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",
display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("z-index","",b());m="";q.isInherited&&(m=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+f()+'" data-tdc-for="z-index">';k=k+'<div class="tdc-property-title"><span title="Z-index">Z-index</span></div><div class="tdc-property">'+('<input class="tdc-css-z-index" '+
tdcSidebarPanel._getParamterDataAtts(h,n)+' name="" type="text" '+c(m)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsPropertyFromCssSettings("display",d);k+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+f()+'" data-tdc-for="display">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align">Display</span></div><div class="tdc-property">'+('<select class="tdc-css-display" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",
display:"Show"},{value:"none",display:"Hidden"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"}],l);k=k+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(h,n)+' title="Clear all tab css settings">Clear CSS settings</div>');return k+"</div>"},_getAvailableViewportSetting:function(b,
c,a){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(b){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]&&(d="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]?d=b:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][c])return tdcCssEditor._currentViewportSettings.name!==d&&(a.isInherited=!0,
tdcDebug.log(c)),tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[d][c]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",c,a)}}},_getSettingsPropertyFromCssSettings:function(b,c){var a;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d=tdcCssEditor._currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[d]&&"undefined"!==typeof tdcCssEditor._currentCssSettings[d][b])return tdcCssEditor._currentViewportSettings.name!==d&&tdcDebug.log(b),
tdcCssEditor._cleanCss(b,tdcCssEditor._currentCssSettings[d][b])}"undefined"===typeof a&&"undefined"!==typeof c&&(a=c);return a},_getSettingsProperty:function(b,c,a){var d;"undefined"===typeof a&&(a={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcCssEditor._currentViewportSettings.name,b,a));"undefined"===typeof d&&"undefined"!==typeof c&&(d=c);return d},_generateDropdownOptions:function(b,c,d){for(var f=[],h,n=!1,g=0,k=0;k<
b.length;k++)a.isUndefined(d)||d!==b[k].value||(g=k),h="",a.isUndefined(c)||c!==b[k].value||(h='selected="selected"',n=!0),f.push("<option "+h+' value="'+b[k].value+'">'+b[k].display+"</option>");n||(f[g]='<option selected="selected" value="'+b[g].value+'">'+b[g].display+"</option>");return f.join("")},_generateCssAttValue:function(b){var c={},d=b.find(".tdc-css-box-input-margin-top").val().trim(),e=b.find(".tdc-css-box-input-margin-right").val().trim(),h=b.find(".tdc-css-box-input-margin-bottom").val().trim(),
n=b.find(".tdc-css-box-input-margin-left").val().trim(),g=b.find(".tdc-css-box-input-border-top-width").val().trim(),k=b.find(".tdc-css-box-input-border-right-width").val().trim(),l=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),p=b.find(".tdc-css-box-input-border-left-width").val().trim(),m=b.find(".tdc-css-box-input-padding-top").val().trim(),t=b.find(".tdc-css-box-input-padding-right").val().trim(),x=b.find(".tdc-css-box-input-padding-bottom").val().trim(),z=b.find(".tdc-css-box-input-padding-left").val().trim(),
w=b.find(".tdc-css-border-radius").val().trim(),y=b.find(".tdc-css-width").val().trim(),C=b.find(".tdc-css-shadow-size").val().trim(),r=b.find(".tdc-css-shadow-offset-h").val().trim(),v=b.find(".tdc-css-shadow-offset-v").val().trim(),u=b.find(".tdc-css-opacity").val().trim(),A=b.find(".tdc-css-gradient-direction").val().trim(),B=b.find(".tdc-css-z-index").val().trim();""!==d&&(c["margin-top"]=d);""!==e&&(c["margin-right"]=e);""!==h&&(c["margin-bottom"]=h);""!==n&&(c["margin-left"]=n);""!==g&&(c["border-top-width"]=
g);""!==k&&(c["border-right-width"]=k);""!==l&&(c["border-bottom-width"]=l);""!==p&&(c["border-left-width"]=p);""!==m&&(c["padding-top"]=m);""!==t&&(c["padding-right"]=t);""!==x&&(c["padding-bottom"]=x);""!==z&&(c["padding-left"]=z);d=b.find(".tdc-css-border-style");e=d.val().trim();""===e||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["border-style"]=e);d=b.find(".tdc-css-border-color");e=d.val().trim();""!==e?c["border-color"]=e:(d=d.data("no_value"),a.isUndefined(d)||
1!==d||(c["border-color"]="no_value"));""!==w&&(c["border-radius"]=w);""!==y&&(c.width=y);""!==C&&(c["shadow-size"]=C);w=b.find(".tdc-css-shadow-color");y=w.val().trim();""!==y?c["shadow-color"]=y:(w=w.data("no_value"),a.isUndefined(w)||1!==w||(c["shadow-color"]="no_value"));""!==r&&(c["shadow-offset-h"]=r);""!==v&&(c["shadow-offset-v"]=v);r=b.find(".tdc-css-bg-color");v=r.val().trim();""!==v?c["background-color"]=v:(r=r.data("no_value"),a.isUndefined(r)||1!==r||(c["background-color"]="no_value"));
r=b.find(".tdc-css-bg-image");r.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(r=r.data("image_link"),a.isUndefined(r)||("no_value"===r?c["background-image"]="no_value":""!==r&&(c["background-image"]='url("'+r+'")')));r=b.find(".tdc-css-bg-style");v=r.val().trim();""===v||r.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-style"]=v);r=b.find(".tdc-css-bg-position");v=r.val().trim();""===v||r.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||
(c["background-position"]=v);""!==u&&(c.opacity=u);u=b.find(".tdc-css-color-1-overlay");r=u.val().trim();""!==r?c["color-1-overlay"]=r:(u=u.data("no_value"),a.isUndefined(u)||1!==u||(c["color-1-overlay"]="no_value"));u=b.find(".tdc-css-color-2-overlay");r=u.val().trim();""!==r?c["color-2-overlay"]=r:(u=u.data("no_value"),a.isUndefined(u)||1!==u||(c["color-2-overlay"]="no_value"));""!==A&&(c["gradient-direction"]=A);""!==B&&(c["z-index"]=B);A=b.find(".tdc-css-content-h-align");B=A.val().trim();""===
B||A.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["content-h-align"]=B);b=b.find(".tdc-css-display");c.display=b.val().trim();a.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});a.isUndefined(c["border-style"])||"solid"!==c["border-style"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete c["border-style"];
a.isUndefined(c["background-style"])||"cover"!==c["background-style"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete c["background-style"];a.isUndefined(c["background-position"])||"center top"!==c["background-position"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&
delete c["background-position"];tdcDebug.log(c);a.isEmpty(c)?(delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name]=c,a.isUndefined(tdcCssEditor._currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+
"_max_width"]=tdcCssEditor._currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]=tdcCssEditor._currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return a.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(b){return-1!==
b.indexOf("rgb")?b:(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?"rgb("+parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16)+")":""}}})(jQuery,_);var tdcSidebarPanel={};
(function(g){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:g,_hook:{_hooks:[],addAction:function(a,d){_.isUndefined(tdcSidebarPanel._hook._hooks[a])&&(tdcSidebarPanel._hook._hooks[a]=[]);tdcSidebarPanel._hook._hooks[a].push(d)},doAction:function(a,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[a]))for(var b=0;b<tdcSidebarPanel._hook._hooks[a].length;b++)tdcSidebarPanel._hook._hooks[a][b](d)},removeAction:function(a){_.isUndefined(tdcSidebarPanel._hook._hooks[a])||delete tdcSidebarPanel._hook._hooks[a]}},
init:function(){var a=jQuery("body");a.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{var b=jQuery(this);a=b.val();var c=tdcIFrameData.getModel(b.data("model_id"));b=b.data("param_name");tdcSidebarController.onUpdate(c,b,this.oldValue,a);this.oldValue=a;"block_template_id"!==b&&0!==b.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});a.on("keyup focus paste cut change",".tdc-tab-no-design .tdc-property-textfield input",function(a){var b=setTimeout(function(c){clearTimeout(b);if("focusin"===a.type)c.oldValue=c.value;else{var d=jQuery(c).val(),e=tdcIFrameData.getModel(jQuery(c).data("model_id"));"cut"===a.type&&(d="");tdcSidebarController.onUpdate(e,
jQuery(c).data("param_name"),c.oldValue,_.escape(d));c.oldValue=d}},100,this,a)});a.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(a){var b=jQuery(this),c=this;if("range"===b.attr("type"))b.next('input[type="text"]').val(b.val());else if("text"===b.attr("type")){c=b.val().trim();var d=b.data("default_value");""!==c||_.isUndefined(d)||""===d||(c=d,b.val(c));b.prev('input[type="range"]').val(c);b=b.prev('input[type="range"]');c=b.get(0)}var e=setTimeout(function(b){clearTimeout(e);
if("focusin"===a.type)b.oldValue=b.value;else{var c=jQuery(b).val(),d=tdcIFrameData.getModel(jQuery(b).data("model_id"));"cut"===a.type&&(c="");tdcSidebarController.onUpdate(d,jQuery(b).data("param_name"),b.oldValue,_.escape(c));b.oldValue=c}},100,c,a)});a.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range_multiple input",function(a){var b=jQuery(this),c=this;if("range"===b.attr("type")){var d=b.closest(".tdc-property").find('input[type="radio"]:checked');b.closest(".tdc-property").find('input[type="text"]').val(b.val());
d.data("last_value",b.val())}else if("text"===b.attr("type")){c=b.closest(".tdc-property").find('input[type="range"]');d=b.closest(".tdc-property").find('input[type="radio"]:checked');var e=d.data("default_value"),h=b.val().trim();""!==h||_.isUndefined(e)||""===e||(h=e,b.val(h));c.val(h);d.data("last_value",h);c=c.get(0)}else if("radio"===b.attr("type")){c=b.closest(".tdc-property").find('input[type="range"]');h=b.closest(".tdc-property").find('input[type="text"]');d=b.closest(".tdc-property").find('input[type="radio"]:checked');
d=b.data("last_value");e=b.data("default_value");var n=b.data("unit");b=c.data("min_"+n);var g=c.data("max_"+n);n=c.data("step_"+n);c.get(0).min=b;c.get(0).max=g;c.get(0).step=n;""===d?(h.val(e),c.val(e)):(h.val(d),c.val(d));c=c.get(0)}var k=setTimeout(function(b){clearTimeout(k);var c="",d=jQuery(b).parent().find('input[type="radio"]:checked');d.length&&(c=jQuery(d[0]).data("unit_value"));"focusin"===a.type?b.oldValue=b.value+c:(c=b.value+c,d=tdcIFrameData.getModel(jQuery(b).data("model_id")),"cut"===
a.type&&(c=""),tdcSidebarController.onUpdate(d,jQuery(b).data("param_name"),b.oldValue,_.escape(c)),b.oldValue=c)},100,c,a)});a.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val();a.is(":checked")||(b="");var c=tdcIFrameData.getModel(a.data("model_id"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("click",".tdc-tab-no-design .tdc-image-wrap",
tdcSidebarPanel.tdcImageWrapHandler);a.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);a.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);a.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);a.on("click",".tdc-icon-selector-content > span",function(a){a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());a.find(".selected").removeClass("selected");var b=jQuery(this),
c=b.data("font_class"),d=tdcIFrameData.getModel(a.data("model_id"));b.addClass("selected");var e=a.prev(".tdc-property-wrap");e.find(".tdc-icon-wrap").html(b.html());e.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(d,a.data("param_name"),"",c)});a.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());var b=jQuery(this).val(),c=a.find(".tdc-icon-selector-filter");a.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var a=
jQuery(this),d=a.data("font_id");""===b||b===d?(a.show(),a.nextAll("span").each(function(){var b=jQuery(this),a=b.data("font_class"),d=c.val().trim();""!==d&&-1===a.indexOf(d)?b.hide():b.show()})):(a.hide(),a.nextAll("span").hide())})});a.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(a){a=jQuery("#tdc-gradient");a.length||(a=tdcSidebar.buildGradient());var b=jQuery(this),c=b.closest(".tdc-property-wrap");b=b.next("input").val();a.toggle();c.after(a);c.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",
b)});a.on("mousedown",function(a){var b=jQuery("#tdc-sidebar"),c=jQuery("#tdc-icon-selector"),d=jQuery("#tdc-gradient");c.length||(c=tdcSidebar.buildIconSelector());c.length&&!c.get(0).contains(a.target)&&(c.hide(),b.after(c));d.length||(d=tdcSidebar.buildGradient());d.length&&!d.get(0).contains(a.target)&&(d.hide(),b.after(d))});a.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(a){a=jQuery("#tdc-icon-selector");a.length||(a=tdcSidebar.buildIconSelector());var b=this.value.trim();
a.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=jQuery(this);-1===a.data("font_class").indexOf(b)?a.hide():a.show()})})});a.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),
this.oldValue,a);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(a){a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a});a.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);
var b=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=b.val(),d=tdcSidebar.getCurrentRow().data("model_id");d=tdcIFrameData.getModel(d);var e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=tdcIFrameData.getChildCollectionWidths(e),_.isUndefined(e)||(this.oldValue=e));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===
a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(d,this.oldValue,a),d.getShortcodeRender(1,null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(d,this.oldValue,a),d.getShortcodeRender(1,null,!0));this.oldValue=a},300)});a.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val(),
c=tdcIFrameData.getModel(a.data("model_id"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcSidebar._$currentInnerRow.data("model_id");b=tdcIFrameData.getModel(b);tdcIFrameData.changeInnerRowModel(b,this.oldValue,a);b.getShortcodeRender(tdcIFrameData.getColumnNumber(b),null,
!0);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);var b=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=b.val(),d=tdcSidebar._$currentInnerRow.data("model_id");d=tdcIFrameData.getModel(d);var e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=tdcIFrameData.getChildCollectionWidths(e),
_.isUndefined(e)||(this.oldValue=e));tdcIFrameData.changeInnerRowModel(d,this.oldValue,a);d.getShortcodeRender(tdcIFrameData.getColumnNumber(d),null,!0);this.oldValue=a},300)});a.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=
a}});a.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(a){a.preventDefault();var b=jQuery(this);a=jQuery("#tdc-wpeditor");var c=a.children(".content"),d=b.data("mapped_parameter_name");b=b.data("model_id");var e=tdcIFrameData.getModel(b).get("parentModel").get("attrs"),h="tdc-three-column";if(_.has(e,"width"))switch(e.width){case "1/3":h="tdc-one-column";break;case "2/3":h="tdc-two-column"}c.addClass("tdc-dropped-wpeditor");c.html('<iframe id="tdc-iframe-wpeditor" class="'+h+'" src="'+
window.tdcAdminSettings.pluginUrl+'/includes/wpeditor.php" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+b+'" data-mapped_parameter_name="'+d+'"></iframe>');a.show();tdcWindowFrame.setWindowFrame(a)});a.on("click","#tdc-wpeditor .tdc-iframe-close-button",function(a){a.preventDefault();jQuery("#tdc-wpeditor").hide()});a.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);a.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);a.on("click",
".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);a.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler);a.on("click",".tdc-sidebar-shortcode-row",function(a){a=jQuery(a.currentTarget).data("model_id");a=tdcIFrameData.getModel(a);var b={error:g,getShortcode:""};_.isUndefined(a)||tdcIFrameData._checkModelData(a,b);_.isUndefined(b.getShortcode)||console.log(b.getShortcode)});a.on("click",".tdc-sidebar-save-shortcode",function(a){a=jQuery(a.currentTarget).data("model_id");
a=tdcIFrameData.getModel(a);var b=a.get("tag"),c={error:g,getShortcode:""};_.isUndefined(a)||tdcIFrameData._checkModelData(a,c);_.isUndefined(c.getShortcode)||tdConfirm.modal({caption:"Saving Shortcode",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},100);return'<label>Shortcode Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),d=a.find(".info");
a=a.find("input").val().trim();if(""===a)d.html("Please enter a shortcode name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings[b]&&(window.tdcAdminSettings.tdcSavings[b]=[]);for(var h=!1,n=0;n<window.tdcAdminSettings.tdcSavings[b].length;n++)if(window.tdcAdminSettings.tdcSavings[b][n].name===a){h=!0;break}h?d.html('Shortcode name already exists for "'+
b+'" ! Choose another one'):(d.html("Saving..."),window.tdcAdminSettings.tdcSavings[b].push({name:a,shortcode:window.btoa(c.getShortcode)}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Shortcode has been saved!");setTimeout(function(){tb_remove()},500)}))}}})});a.on("click",".tdc-sidebar-current-styles-settings",function(a){a=jQuery(a.currentTarget).data("model_id");a=tdcIFrameData.getModel(a);var b={error:g,getShortcode:""};_.isUndefined(a)||tdcIFrameData._checkModelData(a,
b);var c=a.get("tag");a=a.get("attrs");a=_.clone(a);if(!_.isUndefined(a)){b="";var d={},e={};for(h in a)0===h.indexOf("tds_")&&(d[h]=a[h]);var h=window.tdcAdminSettings.mappedShortcodes[c].params;for(c=0;c<h.length;c++){var n=!1,q=h[c];if(0===q.param_name.indexOf("tds_")){for(var k in d)if(q.param_name===k){e[k]=d[k];n=!0;break}n||(e[q.param_name]="")}}for(k in d)switch(d=k.split("-"),d.length){case 2:if(!_.has(e,k)){h=d[0];d=!1;for(var l in e)if(h===e[l]&&1===l.split("-").length){d=!0;break}if(!d){var p;
for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],h)){var m=p;break}_.has(e,m)&&""===e[m]&&window.tdcAdminSettings.globalStyle[m]===h&&(d=!0)}d||delete a[k]}break;case 3:h=d[0];c=d[2];for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],h)){m=p;break}d=!1;for(l in e)if(h===e[l]&&l===m+"-"+c){d=!0;break}d||_.has(e,m+"-"+c)&&""===e[m+"-"+c]&&window.tdcAdminSettings.globalStyle[m]===h&&(d=!0);d||delete a[k]}for(p in a)b+=
'"'+p+'" => "'+a[p]+'",\n';console.log(b)}})},tdcIconWrapHandler:function(a){var d=jQuery(this),b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var c=d.closest(".tdc-property-wrap");a=b.find(".tdc-icon-selector-filter");var f=b.find(".tdc-icon-selector-lib"),e=b.find(".tdc-icon-selector-content");f.val("");a.val("");e.children().each(function(){jQuery(this).show()});b.data("model_id",d.data("model_id"));b.data("param_name",d.data("param_name"));b.show();c.after(b);d=b.data("param_name");
b=tdcIFrameData.getModel(b.data("model_id")).get("attrs");var h="";_.has(b,d)&&(h=b[d].trim());a.focus();e.find("span").each(function(){var a=jQuery(this),b=a.data("font_class");if(h===b){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");f.val(a);f.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(a){var d=jQuery(a.currentTarget);a=d.closest(".tdc-property-wrap").find(".tdc-icon-wrap");d.addClass("tdc-hidden-button");
a.addClass("tdc-no-icon-selected");a.html("");d=a.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,a.data("param_name"),"","")},tdcImageWrapHandler:function(a){var d=jQuery(a.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");
window.send_to_editor=function(a){var b=jQuery("img",a).attr("src"),f="",e="",h="";"undefined"===typeof b?(b=jQuery(a).attr("src"),f=jQuery(a).attr("class"),e=jQuery(a).attr("height"),h=jQuery(a).attr("width")):(f=jQuery("img",a).attr("class"),e=jQuery("img",a).attr("height"),h=jQuery("img",a).attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
dataType:"json",data:{image_class:f,action:"tdc_ajax_get_image_id"}}).done(function(a,c,f){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),d.attr("style","background-image: url( '"+b+"') "),d.data("image_link",b),d.data("image_id",a.image_id),d.data("image_height",e),d.data("image_width",h),d.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,
window.tb_remove(),c="",f=d.data("model_id"),f=tdcIFrameData.getModel(f),d.hasClass("tdc-no-image-selected")||(c=a.image_id.toString()),a=f.get("attrs"),a.image_height=e,a.image_width=h,f.set("attrs",a),tdcSidebarController.onUpdate(f,d.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(a){var d=jQuery(a.currentTarget);a=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");d.addClass("tdc-hidden-button");a.addClass("tdc-no-image-selected");jQuery.removeData(a,
"image_link");a.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");d=a.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,a.data("param_name"),"","")},bindPanelToModel:function(a,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==a.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===d)){var b=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];tdcSidebarPanel._deletePanel();
jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=a;for(var c=[],f=0;f<b.params.length;f++){var e=tdcSidebarPanel._defaultGroupName;_.isEmpty(b.params[f].group)||(e=b.params[f].group);c.push(e)}c=_.uniq(c);var h=e="",n=tdcSidebar.getCurrentTabId(),g,k;e+='<div class="tdc-tabs">';var l=k=g="";for(f=0;f<c.length;f++){h=tdcSidebarPanel._fixGroupName(c[f]);var p=tdcUtil.makeSafeForCSS(h);0===f?(g='<a href="#" data-tab-id="td-tab-'+p+'" class="tdc-tab-active" title="'+h+' settings">'+
h+"</a>",k='<a href="#" data-tab-id="td-tab-'+p+'" title="'+h+' settings">'+h+"</a>"):_.isUndefined(n)||n!=="td-tab-"+p?l+='<a href="#" data-tab-id="td-tab-'+p+'" title="'+h+' settings">'+h+"</a>":(g=k,l+='<a href="#" data-tab-id="td-tab-'+p+'" class="tdc-tab-active" title="'+h+' settings">'+h+"</a>")}e=e+(g+l)+'</div><div class="tdc-tab-content-wrap">';l=k=g="";for(f=0;f<c.length;f++)h=tdcSidebarPanel._fixGroupName(c[f]),p=tdcUtil.makeSafeForCSS(h),h="tdc-tab-no-design","css"===p&&(h="tdc-tab-design"),
0===f?(g='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+p+'">',k='<div class="tdc-tab-content '+h+'" id="td-tab-'+p+'">',p=a.get("tag"),p=window.tdcAdminSettings.mappedShortcodes[p].tdc_start_values,_.isUndefined(p)||a.has("presetValues")||(p=JSON.parse(window.atob(p)),_.isArray(p)&&1<p.length&&a.set("presetValues",p)),a.has("presetValues")&&(p=a.get("presetValues"),l+=tdcSidebarPanel._addPresetValuesSelector(p,a))):_.isUndefined(n)||n!=="td-tab-"+p?l+='<div class="tdc-tab-content '+
h+'" id="td-tab-'+p+'">':(g=k,l+='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+p+'">'),l+=tdcSidebarPanel._bindGroupAndGetHtml(c[f],b,a),p=' data-model_id="'+a.cid+'" ',"vc_row"===a.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+p+' title="Delete the current selected Row">Delete Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+p+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',
"dev"===window.tdcAdminSettings.deployMode&&(l+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+p+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE ROW</div>'),l+="</div>"):"vc_row_inner"===a.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+p+' title="Delete the current selected Inner Row">Delete Inner Row</div>',
l+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+p+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE INNER ROW</div>',l+="</div>"):"vc_column"!==a.attributes.tag&&"vc_inner_column"!==a.attributes.tag&&(l+='<div class="tdc-sidebar-row-buttons">',"dev"===window.tdcAdminSettings.deployMode&&(l+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+
p+' title="Get the current styles\' settings">CONSOLE: style presets</div>'),l+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+p+' title="Save current row">SAVE SHORTCODE</div>',l+="</div>"),l+="</div>";e=e+(g+l)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(e);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===
a.get("tag")){var b=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),d=a.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);_.isUndefined(d)&&(d="11");b.length?b.val(d):(b=jQuery("body .tdc-row-col-dropdown input[value='"+d+"']"),b.length&&b.attr("checked","checked"));b=a.get("attrs");if(_.has(b,"full_width"))var e=b.full_width;_.isUndefined(e)&&(e="");c.val(e)}}})();(function(){if("vc_row_inner"===a.get("tag")){var b=
jQuery("body .tdc-innerRow-col-dropdown select"),c=a.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var d=a.get("parentModel").get("attrs"),e="";_.has(d,"width")&&(e=d.width.replace("/",""));if(b.length)switch(b.val(c),e){case "":case "11":b.find("option[value=12_12]").addClass("tdc-block-col");b.find("option[value=23_13]").removeClass("tdc-block-col");b.find("option[value=13_23]").removeClass("tdc-block-col");b.find("option[value=13_13_13]").removeClass("tdc-block-col");
break;case "13":b.find("option[value=12_12]").addClass("tdc-block-col");b.find("option[value=23_13]").addClass("tdc-block-col");b.find("option[value=13_23]").addClass("tdc-block-col");b.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":b.find("option[value=12_12]").removeClass("tdc-block-col"),b.find("option[value=23_13]").addClass("tdc-block-col"),b.find("option[value=13_23]").addClass("tdc-block-col"),b.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(b=jQuery('body .tdc-innerRow-col-dropdown input[value="'+
c+'"]'),b.length)switch(b.attr("checked","checked"),b.next("label").show(),e){case "":case "11":b.parent().find("input[value=12_12] + label").addClass("tdc-block-col");b.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");b.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");b.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");break;case "13":b.parent().find("input[value=12_12] + label").addClass("tdc-block-col");b.parent().find("input[value=23_13] + label").addClass("tdc-block-col");
b.parent().find("input[value=13_23] + label").addClass("tdc-block-col");b.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");break;case "23":b.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),b.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),b.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),b.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})()}},_bindGroupAndGetHtml:function(a,d,b){for(var c=
"",f=b.get("attrs"),e=0;e<d.params.length;e++){var h=d.params[e].param_name,g=d.params[e].group;a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[e].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[e],b)):d.params[e].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[e],b));if("block_template_id"===h&&_.has(f,"block_template_id")&&!_.isEmpty(f.block_template_id)){g=f.block_template_id;h=window.tdcAdminSettings.mappedBlockTemplates;for(var q=0;q<h[g].params.length;q++)a===
tdcSidebarPanel._defaultGroupName?_.isEmpty(h[g].params[q].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(h[g].params[q],b)):h[g].params[q].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(h[g].params[q],b))}else if(0===h.indexOf("tds_")){var k=h.split("-");q=k[0];var l;2===k.length?l=k[1]:2<k.length&&new tdcNotice.notice('Param "'+h+'" must have up to at most one "-" separator ',!0,!1);h=f[h];_.isEmpty(h)&&(h=window.tdcAdminSettings.globalStyle[q]);k=window.tdcAdminSettings.settingsStyle[q];
for(q=0;q<k[h].params.length;q++)if(g==a||_.isUndefined(g)&&a===tdcSidebarPanel._defaultGroupName){var p=JSON.parse(JSON.stringify(k[h].params[q]));p.param_name=h+"-"+p.param_name;_.isUndefined(l)||(p.param_name+="-"+l);c+=tdcSidebarPanel._bindParamAndGetHtml(p,b)}}}return c},_bindParamAndGetHtml:function(a,d){switch(a.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(a,d);case "gradient":return tdcSidebarPanel.addGradient(a,d);case "dropdown":return tdcSidebarPanel.addDropDown(a,d);
case "checkbox":return tdcSidebarPanel.addCheckBox(a,d);case "range":return tdcSidebarPanel.addRange(a,d);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(a,d);case "icon":return tdcSidebarPanel.addIconSelector(a,d);case "attach_image":return tdcSidebarPanel.addUploadImage(a,d);case "textfield":return tdcSidebarPanel.addTextField(a,d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(a,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(a,d);case "css_editor":return"";
case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(a,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(a,d);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(a,d);case "tdc_hidden_field":return"";default:return a.param_name+" - "+a.type+"<br>"}},_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=g;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();
jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");tdcSidebar.hideWpeditor()},_getParameterClasses:function(a){var d="tdc-property-wrap tdc-property-"+a.type;d+=" tdc-property-"+a.param_name;_.isUndefined(a["class"])||(d+=" "+
a["class"]);return d},_getParameterCurrentValue:function(a,d){return _.isUndefined(d.get("attrs")[a.param_name])?"dropdown"===a.type||_.isEmpty(a.value)?"":a.value:d.get("attrs")[a.param_name]},_getParameterDomName:function(a){return"tdc-param-"+a.param_name},_getParamterDataAtts:function(a,d){var b="";if("undefined"===typeof d)return b;b+=' data-model_id="'+d.cid+'"';"undefined"!==typeof a&&(b+=' data-param_name="'+a.param_name+'"');return b},_fixGroupName:function(a){switch(a){case "Design options":return"Css";
case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return a},clearPanel:function(){tdcSidebarPanel._deletePanel()},_addPresetValuesSelector:function(a,d){var b='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div>'+('<ul class="tdc-preset-values-list" data-model_id="'+d.cid+'">');for(var c=1;c<a.length;c++)b+='<li data-values="'+window.btoa(JSON.stringify(a[c]))+
'">'+a[c].tdc_preset_name+"</li>";b+="</ul>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});jQuery(".tdc-preset-values-list > li").click(function(){var a=jQuery(this),b=a.parent(".tdc-preset-values-list");a=JSON.parse(window.atob(a.data("values")));var c=tdcIFrameData.getModel(b.data("model_id")),d=_.clone(c.get("attrs")),g={};_.isObject(a)&&(_.map(a,function(a,b){var e=!1;_.map(window.tdcAdminSettings.mappedShortcodes[c.get("tag")].params,
function(c,f){_.isUndefined(c.tdc_presets_empty)&&c.param_name===b?(e=!0,g[b]=a):_.isUndefined(c.tdc_presets_empty)||_.isUndefined(d[c.param_name])||(g[c.param_name]=d[c.param_name])});e||0!==b.indexOf("tds_")||(g[b]=a)}),c.set("attrs",g));tdcSidebarController.onUpdate(c);setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),
$currentElement:tdcSidebar.getCurrentElement()},!0)},500)})});return b},addColorpicker:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="",f=_.uniqueId();c+='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' id="'+f+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" value="'+
tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');c+="</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#"+f).cs_wpColorPicker()});return c},addGradient:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div>'+
("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');c+="</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var a=jQuery(this),b=a.find("input");a=a.find(".tdc-gradient-wrap");if(!_.isUndefined(b.val())&&""!==b.val())try{var c=JSON.parse(window.atob(b.val()));
_.isUndefined(c.css)||a.attr("style",c.css)}catch(n){c=b.val(),_.isUndefined(c)||a.attr("style","background: "+c)}})});return c},addDropDown:function(a,d){var b=!1,c=!1;_.has(a,"tdc_dropdown_images")&&""!==a.tdc_dropdown_images&&(b=!0);_.has(a,"tdc_dropdown_texts")&&""!==a.tdc_dropdown_texts&&(c=!0);var f="",e="",h=Object.keys(a.value);if(_.has(a,"tdc_min_options")&&h.length<=parseInt(a.tdc_min_options))return f;for(var g=0;g<h.length;g++){var q=!1,k="",l=h[g],p=String(tdcSidebarPanel._getParameterCurrentValue(a,
d)),m=String(a.value[h[g]]);_.isObject(a.value[h[g]])&&(q=!0,m=_.values(a.value[h[g]])[0],l=_.keys(a.value[h[g]])[0]);if(b||c){0===g&&""===p&&(p=m);p===m&&(k=" checked ");p=_.uniqueId();var t=m;if("vc_row"===d.attributes.tag||"vc_row_inner"===d.attributes.tag)t="col_"+t;e+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(a,d)+' id="'+p+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" '+k+' value="'+m+'">';b?(k="",q&&(k="tdc-standard-value"),e+='<label class="tdc-property-input-radio-label '+
k+'" for="'+p+'" title="'+l+'"><div class="'+t+'"></div></label>'):e+='<label class="tdc-property-input-radio-label" for="'+p+'" title="'+l+'">'+m+"</label>"}else p===m&&(k=' selected="selected" '),e+="<option "+k+' value="'+m+'">'+l+"</option>"}h="";_.has(a,"description")&&""!==a.description&&(h=' title="'+a.description+'" ');f+='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';f+='<div class="tdc-property-title"><span'+h+">"+a.heading+"</span></div>";f+='<div class="tdc-property">';b||
c?f+=e:(f+="<select "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'">',f=f+e+"</select>");return f+"</div></div>"},addCheckBox:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="";""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&(c=" checked ");var f=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');f+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";f=
f+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="checkbox" value="yes" '+c+"/>");return f+"</div></div>"},addRange:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="";_.has(a,"range_max")&&""!==a.range_max&&(c=a.range_max);var f="";_.has(a,"range_min")&&""!==a.range_min&&(f=a.range_min);var e="";_.has(a,"range_step")&&""!==a.range_step&&(e=a.range_step);
var h="";_.has(a,"value")&&""!==a.value&&(h=a.value);var g="";""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&(g=tdcSidebarPanel._getParameterCurrentValue(a,d));var q=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');q+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";q=q+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="range" data-value="'+g+'" data-min="'+f+'" data-max="'+
c+'" data-step="'+e+'"/>');q=q+('<input type="text" class="tdc_range_value" data-default_value="'+h+'"/>')+"</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery('input[type="range"]').each(function(a,b){var c=jQuery(b),d=c.data("min"),e=c.data("max"),f=c.data("step"),h=c.data("value");c.get(0).min=d;c.get(0).max=e;c.get(0).step=f;c.get(0).value=h;c.next('input[type="text"]').val(h)})});return q},addRangeMultiple:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&
(b=' title="'+a.description+'" ');var c="",f="",e="",h=[],g=a.tdc_values,q="",k="",l="",p="",m;for(m in g)g.hasOwnProperty(m)&&h.push(g[m].unit);if(""!==tdcSidebarPanel._getParameterCurrentValue(a,d)){c=tdcSidebarPanel._getParameterCurrentValue(a,d);for(var t=[],x=0;x<h.length&&!(t=c.split(h[x]),1<t.length);x++);t.length&&(l=t[0],p=h[x],q=' data-range_value="'+l+'" ',k=' data-range_unit="'+p+'" ')}for(m in g)g.hasOwnProperty(m)&&(c=_.uniqueId(),f+=" data-value_"+m+'="'+g[m].value+'" ',f+=" data-min_"+
m+'="'+g[m].range_min+'" ',f+=" data-max_"+m+'="'+g[m].range_max+'" ',f+=" data-step_"+m+'="'+g[m].range_step+'" ',h="",g[m].unit===p&&(h=l),e+='<input name="'+tdcSidebarPanel._getParameterDomName(a)+'_unit" data-unit="'+m+'" data-unit_value="'+g[m].unit+'" type="radio" id="'+c+'" data-default_value="'+g[m].value+'" data-last_value="'+h+'"/>',e+='<label for="'+c+'">'+g[m].unit+"</label>");g=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');g+='<div class="tdc-property-title"><span'+
b+">"+a.heading+"</span></div>";g=g+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="range" '+q+" "+k+" "+f+"/>");g=g+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+e+'</div><input type="text" class="tdc_range_value"/>';g+="</div>";g+="</div>";g+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery('input.tdc-multiple-range[type="range"]').each(function(a,
b){var c=jQuery(b),d=c.data("range_value"),e=c.data("range_unit"),f=c.parent().find('input[type="radio"]');if(f.length)if(e=f.filter('[data-unit_value="'+e+'"]'),e.length){f=jQuery(e[0]);e=f.data("unit");var h=c.data("min_"+e),g=c.data("max_"+e),k=c.data("step_"+e);f.prop("checked",!0);d<h?d=h:d>g&&(d=g);setTimeout(function(){c.get(0).min=h;c.get(0).max=g;c.get(0).step=k;c.get(0).value=d},100);c.parent().find('input[type="text"]').val(d)}else{f=jQuery(f[0]);e=f.data("unit");h=c.data("min_"+e);g=c.data("max_"+
e);k=c.data("step_"+e);var l=c.data("value_"+e);f.prop("checked",!0);setTimeout(function(){c.get(0).min=h;c.get(0).max=g;c.get(0).step=k;c.get(0).value=l},100);c.parent().find('input[type="text"]').val(l)}})});return g},addIconSelector:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+
('<div class="tdc-icon-wrap tdc-no-icon-selected" '+tdcSidebarPanel._getParamterDataAtts(a,d)+">");c+='</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(b,c){var e=jQuery(c);if(a.param_name===e.data("param_name")){var f=tdcSidebarPanel._getParameterCurrentValue(a,d);""!==f&&(e.html('<i class="'+f+'"></i>'),e.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button"))}})});
return c},addUploadImage:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(a,d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");
c+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(b,c){var e=jQuery(c);if(!e.parent().parent(".tdc-bg-upload").length&&a.param_name===e.data("param_name")){var f=tdcSidebarPanel._getParameterCurrentValue(a,d);""!==f&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:f,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(e.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),e.data("image_link",a.image_url),e.data("image_id",f),e.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return c},addTextArea:function(){},
addTextField:function(a,d){var b="",c="";if(_.has(a,"description")&&""!==a.description){var f=jQuery("<div>"+a.description+"</div>");a.description===f.text()?b=' title="'+a.description+'" ':c='<div class="tdc-description">'+a.description+"</div>"}f="";_.has(a,"placeholder")&&""!==a.placeholder&&(f=' placeholder="'+a.placeholder+'" ');var e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');e+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";e=e+'<div class="tdc-property">'+
("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" '+f+' value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');return e=e+c+"</div></div>"},addTextAreaHtml:function(a,d){_.has(a,"description");var b='<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+'" data-mapped_parameter_name="'+a.param_name+'">Edit Content</a>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){});return b},addTextAreaRawHtml:function(a,
d){var b=_.uniqueId("tdc_textarea_"),c="";_.has(a,"description")&&""!==a.description&&(c=' title="'+a.description+'" ');var f=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');f+='<div class="tdc-property-title"><span'+c+">"+a.heading+"</span></div>";f=f+'<div class="tdc-property">'+('<textarea id="'+b+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(a,d)+">"+tdcSidebarPanel._getParameterCurrentValue(a,d)+"</textarea>");f+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(a,d)}}).done(function(a,c,d){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+b).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,
b,c){});jQuery("body").on("keyup","#"+b,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(encodeURIComponent(a.val()));tdcSidebarController.onUpdate(b,a.data("param_name"),c,c)});return f},addSeparatorHorizontal:function(a,d){return""+('<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(a)+'"></div>')},addTextSeparatorHorizontal:function(a,d){return""+('<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(a)+
'"><span>'+a.heading+"</span></div>")}}})();var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(g,a){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+g+"&"+a:window.tdcAdminSettings.wpRestUrl+g+"?"+a},makeSafeForCSS:function(g){return g.replace(/[^a-z0-9]/g,function(a){var d=a.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?a.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})},updateTdcSavings:function(g,a){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(d,b,c){"success"===b&&(_.isObject(d)&&_.has(d,"errors")?new tdcNotice.notice(d.errors,!0,!1):("undefined"!==typeof a&&a.call(g),tdcSidebar.updateSavedShortcodes()))}).fail(function(a,b,c){})}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(g){this.shortcode=g.shortcode;this.columns=g.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(g){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var a=new tdcJobManager.jobRequest(g);
jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+a.jobId+"&tmp_blockUid="+a.blockUid+"&uuid="+tdcJobManager._getUniqueID()+"&post_id="+window.tdcPostSettings.postId),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:a,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},
success:function(d,b,c){null===d?g.error_callback(a,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(g.blockUid,d.jobId)?g.success_callback(d):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(d,b,c){g.error_callback(a,"tdcJobManager.addJob - Error callback - textStatus: "+b+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(g,
a){return"undefined"===typeof tdcJobManager._sentJobs[g]||parseInt(tdcJobManager._sentJobs[g])<parseInt(a)?(tdcJobManager._sentJobs[g]=a,!0):!1},_generateJobId:function(){var g=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return g},_getUniqueID:function(){function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()}}})();
